{"version":3,"sources":["webpack://datGuiEase/webpack/universalModuleDefinition","webpack://datGuiEase/./src/EaseManager.js","webpack://datGuiEase/./src/gui/addEaseGUI.js","webpack://datGuiEase/./src/gui/controller/GUIController.js","webpack://datGuiEase/./src/gui/model/GUIModel.js","webpack://datGuiEase/./src/gui/model/ease/Ease.js","webpack://datGuiEase/./src/gui/model/ease/EaseProperties.js","webpack://datGuiEase/./src/gui/model/ease/EaseProperty.js","webpack://datGuiEase/./src/gui/model/ease/composites/Anchor.js","webpack://datGuiEase/./src/gui/model/ease/composites/Handle.js","webpack://datGuiEase/./src/gui/model/ease/composites/Point.js","webpack://datGuiEase/./src/gui/model/ease/exceptions/InvalidSVGPathException.js","webpack://datGuiEase/./src/gui/model/preset/EasePreset.js","webpack://datGuiEase/./src/gui/model/preset/EasePresetProvider.js","webpack://datGuiEase/./src/gui/model/preset/enum/Curve.js","webpack://datGuiEase/./src/gui/model/preset/enum/Orientation.js","webpack://datGuiEase/./src/gui/model/preset/presets.js","webpack://datGuiEase/./src/gui/view/GUIView.js","webpack://datGuiEase/./src/gui/view/GUIViewEvent.js","webpack://datGuiEase/./src/gui/view/HTMLElementDirector.js","webpack://datGuiEase/./src/gui/view/dom/directors/CurveSelectorDirector.js","webpack://datGuiEase/./src/gui/view/dom/directors/EaseEditorDirector.js","webpack://datGuiEase/./src/gui/view/dom/directors/EasePanelBackgroundDirector.js","webpack://datGuiEase/./src/gui/view/dom/directors/EasePanelDirector.js","webpack://datGuiEase/./src/gui/view/dom/directors/EasePropertiesDirector.js","webpack://datGuiEase/./src/gui/view/dom/directors/OrientationSelectorDirector.js","webpack://datGuiEase/./src/gui/view/dom/selectors.js","webpack://datGuiEase/./src/gui/view/editor/EaseEditor.js","webpack://datGuiEase/./src/gui/view/editor/events/EditorCurveChangeEvent.js","webpack://datGuiEase/./src/gui/view/editor/lib/curvesjs/BezierPoint.js","webpack://datGuiEase/./src/gui/view/editor/lib/curvesjs/Curve.js","webpack://datGuiEase/./src/gui/view/editor/lib/curvesjs/Point.js","webpack://datGuiEase/./src/index.js","webpack://datGuiEase/./src/middleware/Middleware.js","webpack://datGuiEase/./src/middleware/cast/CastEntry.js","webpack://datGuiEase/./src/middleware/cast/InstanceCastEntry.js","webpack://datGuiEase/./src/middleware/cast/PredicateCastEntry.js","webpack://datGuiEase/./src/middleware/cast/TransformCastEntry.js","webpack://datGuiEase/./node_modules/bezier-js/dist/bezier.cjs","webpack://datGuiEase/./src/gui/view/dom/gui.html","webpack://datGuiEase/./src/gui/view/dom/property.html","webpack://datGuiEase/./src/index.scss","webpack://datGuiEase/external {\"commonjs\":\"dat.gui\",\"commonjs2\":\"dat.gui\",\"amd\":\"dat.gui\",\"root\":\"dat\"}","webpack://datGuiEase/webpack/bootstrap","webpack://datGuiEase/webpack/runtime/define property getters","webpack://datGuiEase/webpack/runtime/hasOwnProperty shorthand","webpack://datGuiEase/webpack/runtime/make namespace object","webpack://datGuiEase/webpack/startup"],"names":["EaseManager","_middlewares","ease","some","middleware","isFormatSupported","find","Middleware","checkSignature","push","console","warn","dom","dat","addEaseGUI","object","property","controller","GUIController","_recallSavedValue","li","_addRow","addClass","appendChild","domElement","_augmentController","__controllers","DEFAULT_PRESET_NAME","gui","root","getRoot","matchedIndex","__rememberedObjects","indexOf","controllerMap","__rememberedObjectIndecesToControllers","undefined","load","remembered","presetMap","preset","value","initialValue","setValue","document","createElement","__ul","onResize","__li","__gui","name","querySelector","innerHTML","listen","remove","__preset_select","onValueModified","_markPresetModified","bind","modified","opt","selectedIndex","arguments","rawEase","_middleware","_model","GUIModel","_view","GUIView","curves","activePreset","setOrientations","getCurveOrientations","curve","setPreset","isEditingSupported","showEditButton","on","GUIViewEvent","CURVE_PRESET_SELECTED","_onCurvePresetSelected","ORIENTATION_PRESET_SELECTED","_onOrientationPresetSelected","PROPERTY_MODIFIED","_onPropertyModified","EDIT_EASE_CLICKED","_onEditEaseClicked","EASE_MODIFIED","_onEaseModified","ACCEPT_EASE_EDIT_CLICKED","_onAcceptEaseEditClicked","DISCARD_EASE_EDIT_CLICKED","_onDiscardEaseEditClicked","_onValueModified","toString","easeSvgPath","Ease","fromSVGPath","matchingPreset","getPresetMatchingEase","EasePreset","CURVE","CUSTOM","ORIENTATION","NONE","_applyRevertedValue","callback","externalEase","__onChange","call","__onFinishChange","updateDisplay","nextCurve","currentOrientation","orientation","nextOrientations","nextOrientation","includes","nextPreset","getMatchingPreset","clone","_applyValue","props","copyValues","propertyName","get","mutate","preEditPreset","openEditor","modifiedEase","closeEditor","controllers","Controller","_presets","presets","_curves","_extractCurves","_orientationsMap","_extractOrientationsPerCurveMap","_activePreset","_preEditPreset","equals","reduce","orientationsMap","Map","curveMatchingPresets","filter","orientations","map","set","anchors","_anchors","Array","from","_props","EaseProperties","length","toSVGPath","points","i","startAnchor","endAnchor","toPoint","handle","t","findBezierSegment","segmentStartAnchor","segmentEndAnchor","segmentT","x","toFixed","segmentAnchor","y","segmentBezier","Bezier","segmentBezierStep","intersects","p1","p2","shift","svgPath","anchor","Anchor","of","entries","add","mutation","uiConfig","trimmedPath","trim","match","splice","safeParseCoordinate","startX","startY","cCoords","replace","split","Error","ofOriginAndHandle","Point","a","lastAnchor","slice","e","InvalidSVGPathException","path","firstAnchor","originPoint","path2","point","isArray","computeValue","progress","rawCoordinate","coordinate","Number","parseFloat","NaN","_ease","defaultValue","mutationFunction","EaseProperty","has","values","reset","_name","_defaultValue","_value","_mutationFunction","_uiConfig","Handle","ofOrigin","copy","originPointLike","handlePointLike","pointLike","easeOrSvgPath","UNDEFINED","ofSVGPath","Curve","Orientation","EasePresetProvider","samplePreset","_sample","_curveAlias","_orientationAlias","curveAlias","Object","propertyEntry","next","freeze","LINEAR","SINE","QUAD","CUBIC","QUART","QUINT","EXPO","CIRC","BACK","ELASTIC","BOUNCE","IN","OUT","IN_OUT","Linear","ofSample","SineIn","SineOut","SineInOut","QuadIn","QuadOut","QuadInOut","CubicIn","CubicOut","CubicInOut","QuartIn","QuartOut","QuartInOut","ExpoIn","ExpoOut","ExpoInOut","CircIn","CircOut","CircInOut","BackIn","BackOut","BackInOut","guiName","_renderTemplate","domTemplate","_element","_easePanelDirector","EasePanelDirector","_easePropertiesDirector","EasePropertiesDirector","_easeEditorDirector","args","emit","_isEditorOpen","initialEase","classList","EaseEditorDirector","cleanUp","HTMLElementDirector","template","DOMParser","parseFromString","body","firstChild","htmlElement","eventKey","addEventListener","event","detail","dispatchEvent","CustomEvent","CurveSelectorDirector","rootDomElement","_composeOptions","option","options","onchange","Option","_createCustomCurveOption","customCurveOption","setAttribute","_editor","EaseEditor","EditorCurveChangeEvent","KEY","_svgPathInspector","_initSvgPathInspector","_copyButton","_initCopyButton","_acceptButton","_initAcceptButton","_discardButton","_initDiscardButton","canvas","canvasClone","cloneNode","parentNode","replaceChild","inspectorElement","oninput","svgPathInspectorElement","buttonElement","onclick","select","execCommand","info","EasePanelBackgroundDirector","_cornerCurveCanvas","width","height","_cornerCurveCanvasContext","getContext","ctx","strokeStyle","fillStyle","lineWidth","clearRect","beginPath","moveTo","bezierCurveTo","lineTo","stroke","fill","_curveSelector","_orientationSelector","OrientationSelectorDirector","_background","_editButtonElement","style","display","refresh","StringController","NumberControllerBox","NumberControllerSlider","BooleanController","_values","createDatGuiController","onChange","append","config","createStringController","createNumberController","createBooleanController","extendControllerDOM","createNumberSliderController","createNumberBoxController","sliderController","min","max","step","boxController","wrapperElement","propertyDomTemplate","forEach","method","pc","pb","prototype","apply","toUpperCase","controllerElement","firstElementChild","removeAttribute","easePanel","curveSelector","orientationSelector","cornerCurveCanvas","editButton","propertiesContainer","editorCanvas","editorSvgPathInspector","editorSvgPathCopyButton","editorAcceptButton","editorDeclineButton","_canvas","_ctx","_prepareContext","_curve","_createCurveJSInstance","_propagateEvents","cw","ch","startPoint","addAnchor","_fromCanvasX","position","_fromCanvasY","cp2","endPoint","cp1","pointColor","pointSize","cpDist","firstPoint","BezierPoint","_toCanvasX","_toCanvasY","precedingCurveEndAnchor","followingCurveStartAnchor","lastPoint","draw","clientWidth","clientHeight","CurveJS","setPointStyle","setLineStyle","_round","coord","numberOfFloatDigits","power","Math","pow","round","context","color","size","r","collapsed","v1x","v1y","v2x","v2y","interval","lineColor","mouseX","mouseY","events","canvasEvents","createLUT","frame","tolerance","iMin","iMax","key","xTarget","xCurrent","lookupX","abs","lookupY","pct","func","dist","dragReady","dragCP","draging","_this","evt","bbox","getBoundingClientRect","clientX","left","clientY","top","p","sqrt","cursor","keys","deltaW","deltaH","posX","floor","posY","move","temp","ondrag","onmousemove","preventDefault","addPoint","onnewpoint","offsetX","offsetY","collapse","ontogglecontrol","onremovepoint","sort","b","pP","window","keyCode","arc","PI","closePath","easeManager","addEase","hasCompatibleMiddleware","getCompatibleMiddleware","extend","GUI","addOverride","castEntries","_castEntries","castEntry","TransformCastEntry","entry","thirdPartyEaseOrPredicateFunction","followupArguments","_predicatePreset","_instancePreset","thirdPartyEaseOrPredicate","predicateFunction","thirdPartyToNativeCast","nativeToThirdPartyCast","transform","thirdPartyEase","supportsCastInward","castInward","nativeEase","supportsCastOutward","castOutward","nativeEasePreset","PredicateCastEntry","InstanceCastEntry","instanceLike","test","CastEntry","nativeEasePresetOrPresetProvider","_thirdPartyEase","_preset","_parseNativePreset","rawNativePreset","_predicate","_transformThirdPartyToNativeEase","_transformNativeToThirdPartyEase"],"mappings":"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AAO,KAAKiB,UAAL,CAAgBjB,cAAhB,KAAmC,KAAKkB,gCAA/C;AACH;;;aAED,oBAAWlB,cAAX,EAA2B;AACvB,eAAO,IAAIlc,sBAAJ,CAAe,KAAKod,gCAAL,CAAsClB,cAAtC,CAAf,EAAsEtT,kBAAM1I,MAA5E,CAAP;AACH;;;aAED,qBAAYsc,gBAAZ,EAA8B;AAC1B,eAAO,KAAKa,gCAAL,CAAsCb,gBAAgB,CAAC1iB,IAAvD,CAAP;AACH;;;aAED,YAAUgiB,iBAAV,EAA6BC,sBAA7B,EAAqDC,sBAArD,EAA6E;AACzE,0BAAWT,kBAAX,6BAAiC7d,SAAjC;AACH;;;;IAvB4Bmf,sB;;iBA0BlBtB,kB;;;;;;;;;;;;;AC7BF;;AAEb,8CAA6C;AAC7C;AACA,CAAC,EAAC;AACF,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,QAAQ;;AAET;AACA;AACA,CAAC;;;AAGD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,mBAAmB;;AAEnB;AACA;AACA;AACA,KAAK;;;AAGL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,KAAK;;;AAGL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,KAAK;;;AAGL;;AAEA;AACA,qBAAqB,sBAAsB;AAC3C;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;;AAEV;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;;AAGL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;;AAGL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA,iDAAiD,OAAO;AACxD;;AAEA,0BAA0B,OAAO;AACjC;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA,sBAAsB,SAAS;AAC/B;AACA;AACA;;AAEA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;;AAEA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,sCAAsC,SAAS;AAC/C;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA,KAAK;;;AAGL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;;AAGT;AACA,OAAO;;;AAGP;AACA;AACA;AACA,KAAK;;;AAGL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA,KAAK;;;AAGL;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,kBAAkB;AAClB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,qCAAqC;;AAErC;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;AACA;;AAEA,iCAAiC,SAAS;AAC1C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC;;AAElC;AACA;AACA;AACA,UAAU;;;AAGV;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,KAAK;;;AAGL;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,mBAAmB,cAAc;AACjC;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,OAAO;AACP;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA,yCAAyC,WAAW;AACpD;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,8BAA8B;;AAE9B;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;;;AAGL;AACA;AACA;;AAEA;AACA;AACA,KAAK;;;AAGL;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB;;AAExB;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,MAAM;;AAEN;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,oCAAoC,UAAU;AAC9C;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,mBAAmB;AACnB;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,mBAAmB;;AAEnB;AACA;;AAEA,yBAAyB,WAAW;AACpC;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,6BAA6B,gBAAgB;AAC7C;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;;AAEzB;AACA;AACA;AACA;AACA;;AAEA,eAAe,eAAe;AAC9B;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,4BAA4B,OAAO;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;;AAEf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;;AAEb,sJAAsJ;;AAEtJ;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;;;AAGL;AACA;;AAEA,2CAA2C,OAAO;AAClD;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;;;AAGL;AACA;AACA;AACA;AACA;AACA,MAAM;;AAEN;AACA;AACA;AACA,8DAA8D;;AAE9D;AACA;AACA,KAAK;;;AAGL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,OAAO;AACP;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB;;AAEnB;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,gCAAgC,oBAAoB;AACpD;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;;AAGL;AACA;AACA;;AAEA;AACA,4BAA4B,gBAAgB;AAC5C;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA,0CAA0C;AAC1C;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,KAAK;;;AAGL;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;;;AAGA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,KAAK;AACL;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;;AAGL;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA,KAAK,EAAE;;AAEP;AACA;;AAEA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA,KAAK,YAAY;;AAEjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,yCAAyC,aAAa;AACtD;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,wCAAwC,SAAS;AACjD;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,qBAAqB;;AAErB;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA,OAAO;AACP,KAAK,EAAE;;AAEP;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,eAAe;;AAEf;AACA,iBAAiB;;AAEjB,cAAc;;AAEd;AACA;AACA;AACA;AACA,mBAAmB;;AAEnB;AACA;AACA,eAAe;;AAEf;AACA,qBAAqB;;AAErB;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C;;AAE9C;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,gCAAgC;;AAEhC;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;;AAEA;AACA,WAAW;;;AAGX;AACA,SAAS;AACT;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA,OAAO;;;AAGP;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;;AAEA,cAAc;;;;;;;;;;;;;;;;ACj9Dd;AACA,i+DAAi+D;AACj+D;AACA,iEAAe,IAAI,E;;;;;;;;;;;;;;;ACHnB;AACA;AACA;AACA,iEAAe,IAAI,E;;;;;;;;;;;;ACHnB;;;;;;;;;;;;ACAA,qD;;;;;;UCAA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;;WCtBA;WACA;WACA;WACA;WACA,wCAAwC,yCAAyC;WACjF;WACA;WACA,E;;;;;WCPA,wF;;;;;WCAA;WACA;WACA;WACA,sDAAsD,kBAAkB;WACxE;WACA,+CAA+C,cAAc;WAC7D,E;;;;;UCNA;UACA;UACA;UACA","file":"dat.gui.ease.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"dat.gui\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"dat.gui\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"datGuiEase\"] = factory(require(\"dat.gui\"));\n\telse\n\t\troot[\"datGuiEase\"] = factory(root[\"dat\"]);\n})(self, function(__WEBPACK_EXTERNAL_MODULE_dat_gui__) {\nreturn ","import Middleware from \"./middleware/Middleware\";\n\nexport default class EaseManager {\n    constructor() {\n        this._middlewares = [];\n    }\n\n    /**\n     * Checks whether a compatible middleware for ease was provided\n     * @param {Ease} ease - Ease instance of animation library of your choice\n     * @return {boolean}\n     */\n    hasCompatibleMiddleware(ease) {\n        return this._middlewares.some(middleware => middleware.isFormatSupported(ease));\n    }\n\n    /**\n     * Returns a compatible middleware for ease\n     * @param {Ease} ease - Ease instance of animation library of your choice\n     * @return {Middleware | null}\n     */\n    getCompatibleMiddleware(ease) {\n        return this._middlewares.find(middleware => middleware.isFormatSupported(ease)) || null;\n    }\n\n     /**\n     * Register middleware to handle Ease objects of animation library of your choice\n     * @param {Middleware} middleware - Middleware instance\n     * @return {this} self reference for chaining.\n     */\n    use(middleware) {\n        if (middleware && Middleware.checkSignature(middleware)) {\n            this._middlewares.push(middleware);\n        }\n        else {\n            console.warn(\"Middleware instance expected\");\n        }\n    }\n}","import * as dat from \"dat.gui\";\nimport GUIController from \"./controller/GUIController\";\nconst dom = dat.dom.dom;\n\nexport default function addEaseGUI(object, property, middleware) {\n    const controller = new GUIController(object, property, middleware);\n\n    // Partial copy of add() method\n    // https://github.com/dataarts/dat.gui/blob/40f4fc193e25ee51e7e57dfbbfc3118b3927169f/src/dat/gui/GUI.js#L1152\n    _recallSavedValue(this, controller);\n\n    const li = _addRow(this);\n    dom.addClass(li, \"cr\");\n    dom.addClass(li, 'ease');\n    li.appendChild(controller.domElement);\n\n    _augmentController(this, li, controller);\n\n    this.__controllers.push(controller);\n\n    return controller;\n}\n\n\nconst DEFAULT_PRESET_NAME = 'Default';\n// Copy of recallSavedValue() method\n// https://github.com/dataarts/dat.gui/blob/40f4fc193e25ee51e7e57dfbbfc3118b3927169f/src/dat/gui/GUI.js#L1080\nfunction _recallSavedValue(gui, controller) {\n    const root = gui.getRoot();\n    const matchedIndex = root.__rememberedObjects.indexOf(controller.object);\n\n    if (matchedIndex !== -1) {\n        let controllerMap = root.__rememberedObjectIndecesToControllers[matchedIndex];\n\n        if (controllerMap === undefined) {\n            controllerMap = {};\n            root.__rememberedObjectIndecesToControllers[matchedIndex] = controllerMap;\n        }\n\n        controllerMap[controller.property] = controller;\n\n        if (root.load && root.load.remembered) {\n            const presetMap = root.load.remembered;\n\n            let preset;\n\n            if (presetMap[gui.preset]) {\n                preset = presetMap[gui.preset];\n            } else if (presetMap[DEFAULT_PRESET_NAME]) {\n                preset = presetMap[DEFAULT_PRESET_NAME];\n            } else {\n                return;\n            }\n\n            if (preset[matchedIndex] && preset[matchedIndex][controller.property] !== undefined) {\n                const value = preset[matchedIndex][controller.property];\n\n                controller.initialValue = value;\n                controller.setValue(value);\n            }\n        }\n    }\n}\n\n// Partial copy of addRow() method\n// https://github.com/dataarts/dat.gui/blob/40f4fc193e25ee51e7e57dfbbfc3118b3927169f/src/dat/gui/GUI.js#L889\nfunction _addRow(gui) {\n    const li = document.createElement('li');\n    gui.__ul.appendChild(li);\n    gui.onResize();\n    return li;\n}\n\n// Partial copy of augmentController() method\n// https://github.com/dataarts/dat.gui/blob/40f4fc193e25ee51e7e57dfbbfc3118b3927169f/src/dat/gui/GUI.js#L922\nfunction _augmentController(gui, li, controller) {\n    controller.__li = li;\n    controller.__gui = this;\n\n    controller.name = function (name) {\n        this.__li.querySelector(\".property-name\").innerHTML = name;\n        return this;\n    };\n\n    controller.listen = function () {\n        this.__gui.listen(this);\n        return this;\n    };\n\n    controller.remove = function () {\n        this.__gui.remove(this);\n        return this;\n    };\n\n    if (gui.getRoot().__preset_select) {\n        controller.onValueModified = _markPresetModified.bind(null, gui, true);\n    }\n}\n\n// Copy of markPresetModified() method\n// https://github.com/dataarts/dat.gui/blob/40f4fc193e25ee51e7e57dfbbfc3118b3927169f/src/dat/gui/GUI.js#L912\nfunction _markPresetModified(gui, modified) {\n    const opt = gui.__preset_select[gui.__preset_select.selectedIndex];\n  \n    if (modified) {\n      opt.innerHTML = opt.value + '*';\n    } else {\n      opt.innerHTML = opt.value;\n    }\n}","import * as dat from \"dat.gui\";\nimport Ease from '../model/ease/Ease';\nimport EasePreset from \"../model/preset/EasePreset\";\nimport GUIView, { GUIViewEvent } from \"../view/GUIView\";\nimport GUIModel from \"../model/GUIModel\";\n\nexport default class GUIController extends dat.controllers.Controller {\n    constructor(object, property, middleware) {\n        super(...arguments);\n        \n        const rawEase = object[property];\n        const preset = middleware.import(rawEase);\n\n        this._middleware = middleware;\n        this._model = new GUIModel(middleware);\n        this._view = new GUIView(property, this._model.curves);\n\n        this._model.activePreset = preset;\n\n        this._view.setOrientations(this._model.getCurveOrientations(preset.curve));\n        this._view.setPreset(preset);\n        \n        if (this._middleware.isEditingSupported()) {\n            this._view.showEditButton();\n        }\n\n        this._view.on(GUIViewEvent.CURVE_PRESET_SELECTED, this._onCurvePresetSelected.bind(this));\n        this._view.on(GUIViewEvent.ORIENTATION_PRESET_SELECTED, this._onOrientationPresetSelected.bind(this));\n        this._view.on(GUIViewEvent.PROPERTY_MODIFIED, this._onPropertyModified.bind(this));\n        this._view.on(GUIViewEvent.EDIT_EASE_CLICKED, this._onEditEaseClicked.bind(this));\n        this._view.on(GUIViewEvent.EASE_MODIFIED, this._onEaseModified.bind(this));\n        this._view.on(GUIViewEvent.ACCEPT_EASE_EDIT_CLICKED, this._onAcceptEaseEditClicked.bind(this));\n        this._view.on(GUIViewEvent.DISCARD_EASE_EDIT_CLICKED, this._onDiscardEaseEditClicked.bind(this));\n\n        this.domElement = this._view.domElement;\n        this._onValueModified = null;\n    }\n\n    // Called from dat.GUI to store serialized value in revertable preset\n    // (part of dat.GUi.prototype.remember() functionality)\n    getValue() {\n        return this._model.activePreset.ease.toString();\n    }\n\n    // Called from dat.GUI upon initializing with remembered value\n    // or once preset is reverted\n    setValue(easeSvgPath) {\n        const ease = Ease.fromSVGPath(easeSvgPath);\n        const matchingPreset = this._model.getPresetMatchingEase(ease);\n        \n        if (matchingPreset) {\n            this._model.activePreset = matchingPreset;\n        }\n        else {\n            this._model.activePreset = new EasePreset(ease, EasePreset.CURVE.CUSTOM, EasePreset.ORIENTATION.NONE);\n        }\n        \n        this._view.setOrientations(this._model.getCurveOrientations(this._model.activePreset.curve));\n        this._view.setPreset(this._model.activePreset);\n\n        this._applyRevertedValue(this._model.activePreset);\n    }\n\n    set onValueModified(callback) {\n        this._onValueModified = callback;\n    }\n\n    _applyValue(preset) {\n        this._applyRevertedValue(preset);\n\n        if (this._onValueModified) {\n            this._onValueModified();\n        }\n    }\n\n    _applyRevertedValue(preset) {\n        const externalEase = this._middleware.export(preset);\n        this.object[this.property] = externalEase;\n        \n        if (this.__onChange) {\n            this.__onChange.call(this, externalEase);\n        }\n        if (this.__onFinishChange) {\n            this.__onFinishChange.call(this, externalEase);\n        }\n\n        this.updateDisplay();\n    }\n\n    _onCurvePresetSelected(nextCurve) {\n        const { orientation: currentOrientation } = this._model.activePreset;\n        const nextOrientations = this._model.getCurveOrientations(nextCurve);\n        const nextOrientation = nextOrientations.includes(currentOrientation) ? currentOrientation : nextOrientations[0];\n        const nextPreset = this._model.getMatchingPreset(nextCurve, nextOrientation).clone();\n        \n        this._model.activePreset = nextPreset;\n\n        this._view.setOrientations(nextOrientations);\n        this._view.setPreset(nextPreset);\n\n        this._applyValue(nextPreset);\n    }\n\n    _onOrientationPresetSelected(nextOrientation) {\n        const nextPreset = this._model.getMatchingPreset(this._model.activePreset.curve, nextOrientation).clone();\n        nextPreset.ease.props.copyValues(this._model.activePreset.ease.props);\n\n        this._model.activePreset = nextPreset;\n        this._view.setPreset(nextPreset);\n\n        this._applyValue(nextPreset);\n    }\n\n    _onPropertyModified(propertyName, value) {\n        const preset = this._model.activePreset;\n        const ease = preset.ease;\n        const property = ease.props.get(propertyName);\n\n        property.value = value;\n        property.mutate(ease, value);\n\n        this._view.setPreset(preset);\n        this._applyValue(preset);\n    }\n\n    _onEditEaseClicked() {\n        this._model.preEditPreset = this._model.activePreset.clone();\n\n        this._view.openEditor(this._model.activePreset.ease);\n    }\n\n    _onEaseModified(modifiedEase) {\n        const matchingPreset = this._model.getPresetMatchingEase(modifiedEase);\n\n        if (matchingPreset) {\n            this._model.activePreset = matchingPreset.clone();\n        }\n        else {\n            this._model.activePreset = new EasePreset(modifiedEase, EasePreset.CURVE.CUSTOM, EasePreset.ORIENTATION.NONE);\n        }\n\n        this._view.setPreset(this._model.activePreset);\n        this._applyValue(this._model.activePreset);\n    }\n\n    _onAcceptEaseEditClicked() {\n        this._view.closeEditor();\n        this._view.setPreset(this._model.activePreset);\n        this._applyValue(this._model.activePreset);\n    }\n\n    _onDiscardEaseEditClicked() {\n        this._model.activePreset = this._model.preEditPreset;\n        this._view.closeEditor();\n        this._view.setPreset(this._model.activePreset);\n        this._applyValue(this._model.activePreset);\n    }\n};","class GUIModel {\n    constructor(middleware) {\n        this._presets = middleware.presets;\n        this._curves = _extractCurves(this._presets);\n        this._orientationsMap = _extractOrientationsPerCurveMap(this._presets, this._curves);\n        this._activePreset = null;\n        this._preEditPreset = null;\n    }\n\n    get presets() {\n        return this._presets;\n    }\n\n    get curves() {\n        return this._curves;\n    }\n\n    get activePreset() {\n        return this._activePreset;\n    }\n\n    set activePreset(preset) {\n        this._activePreset = preset;\n    }\n\n    get preEditPreset() {\n        return this._preEditPreset;\n    }\n\n    set preEditPreset(preset) {\n        this._preEditPreset = preset;\n    }\n\n    getCurveOrientations(curve) {\n        return this._orientationsMap.get(curve) || [];\n    }\n\n    getMatchingPreset(curve, orientation) {\n        return this._presets.find(preset => preset.curve === curve && preset.orientation === orientation);\n    }\n\n    getPresetMatchingEase(ease) {\n        return this._presets.find(preset => preset.ease.equals(ease));\n    }\n}\n\nfunction _extractCurves(presets) {\n    return presets.reduce((curves, preset) => curves.includes(preset.curve) ? curves : [...curves, preset.curve], []);\n}\n\nfunction _extractOrientationsPerCurveMap(presets, curves) {\n    const orientationsMap = new Map();\n\n    for (let curve of curves) {\n        const curveMatchingPresets = presets.filter(preset => preset.curve === curve);\n        const orientations = curveMatchingPresets.map(preset => preset.orientation);\n\n        orientationsMap.set(curve, orientations);\n    }\n\n    return orientationsMap;\n}\n\nexport default GUIModel;","import Anchor from \"./composites/Anchor\";\nimport Handle from \"./composites/Handle\";\nimport Point from \"./composites/Point\";\nimport InvalidSVGPathException from \"./exceptions/InvalidSVGPathException\";\nimport { Bezier } from \"bezier-js\"; // consider switching entire Ease class to bezier-js \nimport EaseProperties from \"./EaseProperties\";\n\nclass Ease {\n    constructor(...anchors) {\n        this._anchors = Array.from(anchors);\n        this._props = new EaseProperties(this);\n    }\n\n    get props() {\n        return this._props;\n    }\n\n    get anchors() {\n        return this._anchors;\n    }\n\n    get firstAnchor() {\n        return this._anchors[0];\n    }\n\n    get lastAnchor() {\n        return this._anchors[this._anchors.length - 1];\n    }\n\n    get svgPath() {\n        return Ease.toSVGPath(this);\n    }\n\n    get points() {\n        const points = [];\n\n        for (let i = 0; i < this.anchors.length; i += 2) {\n            const startAnchor = this.anchors[i];\n            const endAnchor = this.anchors[i + 1];\n            \n            points.push(startAnchor.toPoint(), startAnchor.handle.toPoint(), endAnchor.handle.toPoint(), endAnchor.toPoint());\n        }\n\n        return points;\n    }\n\n    computeValue(t) {\n        const [segmentStartAnchor, segmentEndAnchor] = findBezierSegment(this._anchors, t);\n        const segmentT = (t - segmentStartAnchor.x) / (segmentEndAnchor.x - segmentStartAnchor.x);\n        \n        if (segmentT.toFixed(3) === \"0.000\" || segmentT.toFixed(3) === \"1.000\") {\n            const segmentAnchor = segmentT === 0 ? segmentStartAnchor : segmentEndAnchor;\n\n            return segmentAnchor.y;\n        }\n        else {\n            const segmentBezier = new Bezier(segmentStartAnchor, segmentStartAnchor.handle, segmentEndAnchor.handle, segmentEndAnchor);\n            const segmentBezierStep = segmentBezier.intersects({p1: {x: t, y: -10}, p2: {x: t, y: 10}}).shift();\n            \n            return segmentBezier.get(segmentBezierStep).y;\n        }\n    }\n\n    equals(ease) {\n        return this.svgPath === ease.svgPath;\n    }\n    \n    addAnchor(x, y) {\n        const anchor = new Anchor(x, y);\n        this.anchors.push(anchor);\n        return anchor;\n    }\n\n    toString() {\n        return this.svgPath;\n    }\n\n    clone() {\n        const clone = Ease.of(...this._anchors.map(anchor => anchor.clone()));\n        for (let [propertyName, property] of this._props.entries()) {\n            clone.props.add(propertyName, property.value, property.mutation, property.uiConfig);\n        }\n        return clone;\n    }\n\n    static of(...anchors) {\n        return new Ease(...anchors);\n    }\n\n    static ofSVGPath(svgPath) {\n        try {\n            const trimmedPath = svgPath.trim();\n            const [startX, startY] = trimmedPath.match(/^M *(?<x>-?[\\d\\.]+),(?<y>-?[\\d\\.]+)/).splice(-2).map(safeParseCoordinate);\n            const cCoords = trimmedPath.replace(/^M.*C */, \"\").split(/[ ,]/).map(safeParseCoordinate);\n\n            if (cCoords.length % 6 !== 0) {\n                throw new Error(\"Irregular number of coordinates provided.\")\n            }\n            else {\n                const anchors = [];\n\n                anchors[0] = Anchor.ofOriginAndHandle(\n                    Point.of(startX, startY),\n                    Point.of(cCoords[0], cCoords[1])\n                );\n        \n                for (let i = 2; i < cCoords.length - 4; i += 6) {\n                    const a = (i - 2) / 3 + 1;\n                    \n                    anchors[a] = Anchor.ofOriginAndHandle(\n                        Point.of(cCoords[i + 2], cCoords[i + 3]),\n                        Point.of(cCoords[i],  cCoords[i + 1])\n                    );\n    \n                    anchors[a + 1] = Anchor.ofOriginAndHandle(\n                        Point.of(cCoords[i + 2], cCoords[i + 3]),\n                        Point.of(cCoords[i + 4], cCoords[i + 5])\n                    );\n                }\n    \n                const lastAnchor = Anchor.ofOriginAndHandle(\n                    Point.of(...cCoords.slice(-2)),\n                    Point.of(cCoords[cCoords.length - 4], cCoords[cCoords.length - 3])\n                );\n    \n                anchors.push(lastAnchor);\n                \n                return Ease.of(...anchors);\n            }\n        }\n        catch (e) {\n            throw new InvalidSVGPathException(e);\n        }\n    }\n\n    static toSVGPath(ease) {\n        let path = `M ${ease.firstAnchor.x},${ease.firstAnchor.y} C`;\n\n        for (let i = 0; i < ease.anchors.length; i += 2) {\n            const startAnchor = ease.anchors[i];\n            const endAnchor = ease.anchors[i + 1];\n            \n            path += ` ${startAnchor.handle.x},${startAnchor.handle.y} ${endAnchor.handle.x},${endAnchor.handle.y} ${endAnchor.x},${endAnchor.y}`;\n        }\n\n        const points = ease.points;\n        const originPoint = points.shift();\n        let path2 = `M ${originPoint.x},${originPoint.y} C`;\n\n        for (let point of points) {\n            path2 += ` ${point.x},${point.y}`;\n        }\n\n        return path;\n    }\n\n    static checkSignature(object) {\n        return Array.isArray(object.anchors) && typeof object.svgPath === \"string\" && typeof object.computeValue === \"function\";\n    }\n}\n\nfunction findBezierSegment(anchors, progress) {\n    let startAnchor, endAnchor;\n\n    for (let i = 0; i < anchors.length; i++) {\n        startAnchor = anchors[i];\n        endAnchor = anchors[i + 1];\n\n        if (startAnchor.x <= progress && endAnchor.x >= progress) break;\n    }\n\n    return [startAnchor, endAnchor];\n}\n\nfunction safeParseCoordinate(rawCoordinate) {\n    const coordinate = Number.parseFloat(rawCoordinate);\n    if (coordinate === NaN) throw new Error(`Error parsing coordinate \"${rawCoordinate}\"`);\n    return coordinate;\n}\n\nexport {\n    Ease,\n    Anchor,\n    Handle,\n    Point,\n    InvalidSVGPathException\n}\n\nexport default Ease;","import EaseProperty from \"./EaseProperty\";\n\nexport default class EaseProperties extends Map {\n    constructor(ease) {\n        super();\n        \n        this._ease = ease;\n    }\n\n    add(propertyName, defaultValue, mutationFunction, uiConfig) {\n        this.set(propertyName, new EaseProperty(propertyName, defaultValue, mutationFunction, uiConfig));\n    }\n\n    getValue(propertyName) {\n        return this.has(propertyName) ? this.get(propertyName).value : undefined;\n    }\n\n    setValue(propertyName, value) {\n        if (this.has(propertyName)) {\n            this.get(propertyName).value = value;\n        }\n    }\n\n    copyValues(props) {\n        for (let property of props.values()) {\n            if (this.has(property.name)) {\n                this.get(property.name).value = property.value;\n            }\n        }\n    }\n\n    resetValues() {\n        for (let property of this.values()) {\n            property.reset();\n        }\n    }\n}","class EaseProperty {\n    constructor(name, value, mutationFunction, uiConfig) {\n        this._name = name;\n        this._defaultValue = value;\n        this._value = this._defaultValue;\n        this._mutationFunction = mutationFunction;\n        this._uiConfig = uiConfig;\n    }\n\n    get name() {\n        return this._name;\n    }\n\n    get value() {\n        return this._value;\n    }\n\n    set value(value) {\n        this._value = value;\n    }\n\n    get mutation() {\n        return this._mutationFunction;\n    }\n\n    get uiConfig() {\n        return this._uiConfig;\n    }\n\n    mutate(ease, value = this._value) {\n        if (this._mutationFunction) {\n            this._mutationFunction(ease, value);\n        }\n    }\n    \n    reset() {\n        this._value = this._defaultValue;\n    }\n}\n\nexport default EaseProperty;","import Handle from \"./Handle\";\nimport Point from \"./Point\";\n\nexport default class Anchor extends Point {\n    constructor(x, y) {\n        super(x, y);\n        this.handle = new Handle(x, y);\n    }\n\n    toPoint() {\n        return Point.of(this.x, this.y);\n    }\n\n    clone() {\n        const clone = Anchor.ofOrigin(this);\n        clone.handle.copy(this.handle);\n        return clone;\n    }\n\n    static ofOriginAndHandle(originPointLike, handlePointLike) {\n        const anchor = Anchor.ofOrigin(originPointLike);\n        anchor.handle.copy(handlePointLike);\n        return anchor;\n    }\n\n    static ofOrigin(pointLike) {\n        return Anchor.of(pointLike.x, pointLike.y)\n    }\n\n    static of(x, y) {\n        return new Anchor(x, y);\n    }\n}","import Point from \"./Point\";\n\nexport default class Handle extends Point {\n    toPoint() {\n        return Point.of(this.x, this.y);\n    }\n    \n    static of(x, y) {\n        return new Handle(x, y);\n    }\n}","export default class Point {\n    constructor(x = 0, y = 0) {\n        this.x = x;\n        this.y = y;\n    }\n\n    copy(pointLike) {\n        this.x = pointLike.x;\n        this.y = pointLike.y;\n    }\n\n    static of(x, y) {\n        return new Point(x, y);\n    }\n}","export default class InvalidSVGPathException extends Error {}","import Ease from \"../ease/Ease\";\nimport Curve from \"./enum/Curve\";\nimport Orientation from \"./enum/Orientation\";\n\nclass EasePreset {\n    static CURVE = Curve;\n    static ORIENTATION = Orientation;\n\n    constructor(easeOrSvgPath, curve = EasePreset.CURVE.UNDEFINED, orientation = EasePreset.ORIENTATION.NONE) {\n        this.ease = easeOrSvgPath instanceof Ease ? easeOrSvgPath : Ease.ofSVGPath(easeOrSvgPath);\n        this.curve = curve;\n        this.orientation = orientation;\n    }\n\n    clone() {\n        return EasePreset.of(this.ease.clone(), this.curve, this.orientation);\n    }\n\n    toString() {\n        return `[${this.ease.toString()}][${this.curve}.${this.orientation}]`;\n    }\n\n    equals(preset) {\n        return this.toString() === preset.toString();\n    }\n\n    property(propertyName, defaultValue, mutationFunction, uiConfig) {\n        this.ease.props.add(propertyName, defaultValue, mutationFunction, uiConfig);\n        return this;\n    }\n\n    static of(svgPath, curve = EasePreset.CURVE.UNDEFINED, orientation = EasePreset.ORIENTATION.NONE) {\n        return new EasePreset(svgPath, curve, orientation);\n    }\n\n    static checkSignature(object) {\n        return typeof object.ease === \"string\" && typeof object.curve === \"string\" && typeof object.orientation === \"string\" && typeof object.clone === \"function\";\n    }\n}\n\nexport {\n    Curve,\n    Orientation\n}\n\nexport default EasePreset;","class EasePresetProvider {\n    constructor(samplePreset) {\n        this._sample = samplePreset;\n        this._curveAlias = null;\n        this._orientationAlias = null;\n        this._props = {};\n    }\n\n    withAlias(curveAlias) {\n        this._curveAlias = curveAlias;\n        return this;\n    }\n\n    withOrientation(orientation) {\n        this._orientationAlias = orientation;\n        return this;\n    }\n\n    property(propertyName, defaultValue, mutationFunction, uiConfig) {\n        this._props[propertyName] = {\n            uiConfig,\n            value: defaultValue,\n            mutate: mutationFunction\n        };\n        return this;\n    }\n\n    next() {\n        const preset = this._sample.clone();\n        \n        if (this._curveAlias) {\n            preset.curve = this._curveAlias;\n        }\n\n        if (this._orientationAlias) {\n            preset.orientation = this._orientationAlias;\n        }\n\n        for (let [propertyName, propertyEntry] of Object.entries(this._props)) {\n            preset.property(propertyName, propertyEntry.value, propertyEntry.mutate, propertyEntry.uiConfig);\n        }\n\n        return preset;\n    }\n\n    static ofSample(preset) {\n        return new EasePresetProvider(preset);\n    }\n\n    static checkSignature(object) {\n        return typeof object.next === \"function\";\n    }\n}\n\nexport default EasePresetProvider;","export default Object.freeze({\n    LINEAR: \"Linear\",\n    SINE: \"Sine\",\n    QUAD: \"Quad\",\n    CUBIC: \"Cubic\",\n    QUART: \"Quart\",\n    QUINT: \"Quint\",\n    EXPO: \"Expo\",\n    CIRC: \"Circ\",\n    BACK: \"Back\",\n    ELASTIC: \"Elastic\",\n    BOUNCE: \"Bounce\",\n    CUSTOM: \"Custom\",\n    UNDEFINED: \"Undefined\"\n});\n","export default Object.freeze({\n    IN: \"in\",\n    OUT: \"out\",\n    IN_OUT: \"inOut\",\n    NONE: \"none\"\n});","import EasePreset, { Curve, Orientation } from \"./EasePreset\";\nimport EasePresetProvider from \"./EasePresetProvider\";\n\n// Predefined list of easings commonly used across various animation engines\n// https://easings.net/\n\nexport const Linear = EasePresetProvider.ofSample(EasePreset.of(\"M 0,0 C 0,0 1,1 1,1\", Curve.LINEAR, Orientation.NONE));\n\nexport const SineIn = EasePresetProvider.ofSample(EasePreset.of(\"M 0,0 C 0.12,0 0.39,0 1,1\", Curve.SINE, Orientation.IN));\nexport const SineOut = EasePresetProvider.ofSample(EasePreset.of(\"M 0,0 C 0.61,1 0.88,1 1,1\", Curve.SINE, Orientation.OUT));\nexport const SineInOut = EasePresetProvider.ofSample(EasePreset.of(\"M 0,0 C 0.37,0 0.63,1 1,1\", Curve.SINE, Orientation.IN_OUT));\n\nexport const QuadIn = EasePresetProvider.ofSample(EasePreset.of(\"M 0,0 C 0.11,0 0.5,0 1,1\", Curve.QUAD, Orientation.IN));\nexport const QuadOut = EasePresetProvider.ofSample(EasePreset.of(\"M 0,0 C 0.5,1 0.89,1 1,1\", Curve.QUAD, Orientation.OUT));\nexport const QuadInOut = EasePresetProvider.ofSample(EasePreset.of(\"M 0,0 C 0.45,0 0.55,1 1,1\", Curve.QUAD, Orientation.IN_OUT));\n\nexport const CubicIn = EasePresetProvider.ofSample(EasePreset.of(\"M 0,0 C 0.32,0 0.67,0 1,1\", Curve.CUBIC, Orientation.IN));\nexport const CubicOut = EasePresetProvider.ofSample(EasePreset.of(\"M 0,0 C 0.33,1 0.68,1 1,1\", Curve.CUBIC, Orientation.OUT));\nexport const CubicInOut = EasePresetProvider.ofSample(EasePreset.of(\"M 0,0 C 0.65,0 0.35,1 1,1\", Curve.CUBIC, Orientation.IN_OUT));\n\nexport const QuartIn = EasePresetProvider.ofSample(EasePreset.of(\"M 0,0 C 0.5,0 0.75,0 1,1\", Curve.QUART, Orientation.IN));\nexport const QuartOut = EasePresetProvider.ofSample(EasePreset.of(\"M 0,0 C 0.25,1 0.5,1 1,1\", Curve.QUART, Orientation.OUT));\nexport const QuartInOut = EasePresetProvider.ofSample(EasePreset.of(\"M 0,0 C 0.76,0 0.24,1 1,1\", Curve.QUART, Orientation.IN_OUT));\n\nexport const ExpoIn = EasePresetProvider.ofSample(EasePreset.of(\"M 0,0 C 0.7,0 0.84,0 1,1\", Curve.EXPO, Orientation.IN));\nexport const ExpoOut = EasePresetProvider.ofSample(EasePreset.of(\"M 0,0 C 0.16,1 0.3,1 1,1\", Curve.EXPO, Orientation.OUT));\nexport const ExpoInOut = EasePresetProvider.ofSample(EasePreset.of(\"M 0,0 C 0.87,0 0.13,1 1,1\", Curve.EXPO, Orientation.IN_OUT));\n\nexport const CircIn = EasePresetProvider.ofSample(EasePreset.of(\"M 0,0 C 0.55,0 1,0.45 1,1\", Curve.CIRC, Orientation.IN));\nexport const CircOut = EasePresetProvider.ofSample(EasePreset.of(\"M 0,0 C 0,0.55 0.45,1 1,1\", Curve.CIRC, Orientation.OUT));\nexport const CircInOut = EasePresetProvider.ofSample(EasePreset.of(\"M 0,0 C 0.85,0 0.15,1 1,1\", Curve.CIRC, Orientation.IN_OUT));\n\nexport const BackIn = EasePresetProvider.ofSample(EasePreset.of(\"M 0,0 C 0.36,0 0.66,-0.56 1,1\", Curve.BACK, Orientation.IN));\nexport const BackOut = EasePresetProvider.ofSample(EasePreset.of(\"M 0,0 C 0.34,1.56 0.64,1 1,1\", Curve.BACK, Orientation.OUT));\nexport const BackInOut = EasePresetProvider.ofSample(EasePreset.of(\"M 0,0 C 0.68,-0.6 0.32,1.6 1,1\", Curve.BACK, Orientation.IN_OUT));","import domTemplate from \"./dom/gui.html\";\nimport GUIViewEvent from \"./GUIViewEvent\";\nimport EasePanelDirector from \"./dom/directors/EasePanelDirector\";\nimport HTMLElementDirector from \"./HTMLElementDirector\";\nimport EaseEditorDirector from \"./dom/directors/EaseEditorDirector\";\nimport EasePropertiesDirector from \"./dom/directors/EasePropertiesDirector\";\n\nclass GUIView extends HTMLElementDirector {\n    constructor(guiName, curves) {\n        super(_renderTemplate(domTemplate));\n\n        this._element.querySelector(\".header .property-name\").innerHTML = guiName;\n\n        this._easePanelDirector = new EasePanelDirector(this._element, curves);\n        this._easePropertiesDirector = new EasePropertiesDirector(this._element);\n        this._easeEditorDirector = null;\n\n        this._easePanelDirector.on(GUIViewEvent.CURVE_PRESET_SELECTED, (...args) => this.emit(GUIViewEvent.CURVE_PRESET_SELECTED, ...args));\n        this._easePanelDirector.on(GUIViewEvent.ORIENTATION_PRESET_SELECTED, (...args) => this.emit(GUIViewEvent.ORIENTATION_PRESET_SELECTED, ...args));\n        this._easePanelDirector.on(GUIViewEvent.EDIT_EASE_CLICKED, (...args) => this.emit(GUIViewEvent.EDIT_EASE_CLICKED, ...args));\n        this._easePropertiesDirector.on(GUIViewEvent.PROPERTY_MODIFIED, (...args) => this.emit(GUIViewEvent.PROPERTY_MODIFIED, ...args));\n    }\n\n    setOrientations(orientations) {\n        this._easePanelDirector.setOrientations(orientations);\n    }\n\n    setPreset(preset) {\n        this._easePanelDirector.setPreset(preset);\n        this._easePropertiesDirector.values = preset.ease.props;\n\n        if (this._isEditorOpen()) {\n            this._easeEditorDirector.ease = preset.ease;\n        }\n    }\n\n    openEditor(initialEase) {\n        if (this._isEditorOpen()) return;\n\n        this._element.classList.remove(\"mode-select\");\n        this._element.classList.add(\"mode-edit\");\n\n        this._easeEditorDirector = new EaseEditorDirector(this._element);\n        this._easeEditorDirector.on(GUIViewEvent.ACCEPT_EASE_EDIT_CLICKED, (...args) => this.emit(GUIViewEvent.ACCEPT_EASE_EDIT_CLICKED, ...args));\n        this._easeEditorDirector.on(GUIViewEvent.DISCARD_EASE_EDIT_CLICKED, (...args) => this.emit(GUIViewEvent.DISCARD_EASE_EDIT_CLICKED, ...args));\n        this._easeEditorDirector.on(GUIViewEvent.EASE_MODIFIED, (...args) => this.emit(GUIViewEvent.EASE_MODIFIED, ...args));\n        this._easeEditorDirector.ease = initialEase;\n    }\n\n    closeEditor() {\n        if (!this._isEditorOpen()) return;\n\n        this._element.classList.remove(\"mode-edit\");\n        this._element.classList.add(\"mode-select\");\n\n        this._easeEditorDirector.cleanUp();\n        this._easeEditorDirector = null;\n    }\n\n    showEditButton() {\n        this._easePanelDirector.showEditButton();\n    }\n\n    get domElement() {\n        return this._element;\n    }\n\n    _isEditorOpen() {\n        return !!this._easeEditorDirector;\n    }\n}\n\nfunction _renderTemplate(template) {\n    return (new DOMParser()).parseFromString(template, \"text/html\").body.firstChild;\n}\n\nexport {\n    GUIViewEvent\n};\n\nexport default GUIView;","export default Object.freeze({\n    CURVE_PRESET_SELECTED: \"CurvePresetSelectedGUIViewEvent\",\n    ORIENTATION_PRESET_SELECTED: \"OrientationPresetSelectedGUIViewEvent\",\n    PROPERTY_MODIFIED: \"PropertyModifiedGUIViewEvent\",\n    EDIT_EASE_CLICKED: \"EditEaseClickedGUIViewEvent\",\n    EASE_MODIFIED: \"EaseModifiedGUIViewEvent\",\n    ACCEPT_EASE_EDIT_CLICKED: \"AcceptEaseEditClickedGUIViewEvent\",\n    DISCARD_EASE_EDIT_CLICKED: \"DiscardEaseEditClickedGUIViewEvent\"\n});","export default class HTMLElementDirector {\n    constructor(htmlElement) {\n        this._element = htmlElement;\n    }\n\n    on(eventKey, callback) {\n        this._element.addEventListener(eventKey, event => callback(...event.detail));\n    }\n\n    emit(eventKey, ...args) {\n        this._element.dispatchEvent(new CustomEvent(eventKey, { detail: args }));\n    }\n}","import HTMLElementDirector from \"../../HTMLElementDirector\";\nimport { curveSelector } from \"../selectors\";\nimport { Curve } from \"../../../model/preset/EasePreset\";\nimport GUIViewEvent from  \"../../GUIViewEvent\";\n\nexport default class CurveSelectorDirector extends HTMLElementDirector {\n    constructor(rootDomElement, curves) {\n        super(curveSelector(rootDomElement));\n\n        for (let option of this._composeOptions(curves)) {\n            this._element.options.add(option);\n        }\n\n        this._element.onchange = () => this.emit(GUIViewEvent.CURVE_PRESET_SELECTED, this._element.value);\n    }\n\n    set value(curve) {\n        this._element.value = curve;\n    }\n\n    _composeOptions(curves) {\n        const options = curves.map(curve => new Option(curve, curve));\n\n        return [...options, this._createCustomCurveOption()];\n    }\n    \n    _createCustomCurveOption() {\n        const customCurveOption = new Option(Curve.CUSTOM, Curve.CUSTOM);\n        customCurveOption.setAttribute(\"hidden\", true);\n        return customCurveOption;\n    }\n}","import Ease from \"../../../model/ease/Ease\";\nimport EaseEditor, { EditorCurveChangeEvent } from \"../../editor/EaseEditor\";\nimport { GUIViewEvent } from \"../../GUIView\";\nimport HTMLElementDirector from \"../../HTMLElementDirector\";\nimport { editorAcceptButton, editorCanvas, editorDeclineButton, editorSvgPathCopyButton, editorSvgPathInspector } from \"../selectors\";\n\nexport default class EaseEditorDirector extends HTMLElementDirector {\n    constructor(rootDomElement) {\n        super(editorCanvas(rootDomElement));\n        \n        this._editor = new EaseEditor(this._element);\n        this._element.addEventListener(EditorCurveChangeEvent.KEY, () => this.emit(GUIViewEvent.EASE_MODIFIED, this._editor.ease));\n\n        this._svgPathInspector = this._initSvgPathInspector(rootDomElement);\n        this._copyButton = this._initCopyButton(rootDomElement, this._svgPathInspector);\n        this._acceptButton = this._initAcceptButton(rootDomElement);\n        this._discardButton = this._initDiscardButton(rootDomElement);\n    }\n\n    set ease(ease) {\n        this._editor.ease = ease;\n        this._svgPathInspector.value = ease.toString();\n    }\n    \n    cleanUp() {\n        // Hack to reset event listeners assigned to original canvas by CurveJS & external listeners\n        const canvas = this._element\n        const canvasClone = canvas.cloneNode(true);\n\n        canvas.parentNode.replaceChild(canvasClone, canvas);\n    }\n\n    _initSvgPathInspector(rootDomElement) {\n        const inspectorElement = editorSvgPathInspector(rootDomElement);\n\n        inspectorElement.oninput = event => {\n            try {\n                const ease = Ease.fromSVGPath(inspectorElement.value);\n\n                this._editor.ease = ease;\n                this.emit(GUIViewEvent.EASE_MODIFIED, ease);\n            }\n            catch(e) {\n                console.warn(`Couldn't parse SVG path ${inspectorElement.value}`);\n            }\n        }\n\n        return inspectorElement;\n    }\n\n    _initCopyButton(rootDomElement, svgPathInspectorElement) {\n        const buttonElement = editorSvgPathCopyButton(rootDomElement);\n\n        buttonElement.onclick = () => {\n            svgPathInspectorElement.select();\n            document.execCommand(\"copy\");\n            console.info(`Copied ${svgPathInspectorElement.value}`);\n        };\n\n        return buttonElement;\n    }\n\n    _initAcceptButton(rootDomElement) {\n        const buttonElement = editorAcceptButton(rootDomElement);\n\n        buttonElement.onclick = () => this.emit(GUIViewEvent.ACCEPT_EASE_EDIT_CLICKED, this._editor.ease);\n\n        return buttonElement;\n    }\n\n    _initDiscardButton(rootDomElement) {\n        const buttonElement = editorDeclineButton(rootDomElement);\n\n        buttonElement.onclick = () => this.emit(GUIViewEvent.DISCARD_EASE_EDIT_CLICKED);\n\n        return buttonElement;\n    }\n}","import HTMLElementDirector from \"../../HTMLElementDirector\";\nimport { cornerCurveCanvas } from \"../selectors\";\n\nexport default class EasePanelBackgroundDirector extends HTMLElementDirector {\n    constructor(rootDomElement) {\n        super();\n\n        this._cornerCurveCanvas = cornerCurveCanvas(rootDomElement);\n        this._cornerCurveCanvas.width = this._cornerCurveCanvas.height = 60;\n\n        this._cornerCurveCanvasContext = this._cornerCurveCanvas.getContext(\"2d\");\n    }\n\n    refresh(ease) {\n        const ctx = this._cornerCurveCanvasContext;\n        const { width, height } = this._cornerCurveCanvas;\n\n        ctx.strokeStyle = ctx.fillStyle = \"#88CE02\";\n\t\tctx.lineWidth = 1;\n        ctx.clearRect(0, 0, width, height);\n        ctx.beginPath();\n\t\tctx.moveTo(ease.firstAnchor.x * width, (1 - ease.firstAnchor.y) * height);\n        \n        for (let i = 0; i < ease.anchors.length; i += 2) {\n            const startAnchor = ease.anchors[i];\n            const endAnchor = ease.anchors[i + 1];\n\n            ctx.bezierCurveTo(\n                startAnchor.handle.x * width, (1 - startAnchor.handle.y) * height, \n                endAnchor.handle.x * width, (1 - endAnchor.handle.y) * height, \n                endAnchor.x * width, (1 - endAnchor.y) * height);\n        }\n\n        ctx.lineTo(width, height);\n        ctx.lineTo(0, height);\n        ctx.stroke();\n        ctx.fill();\n    }\n}","import HTMLElementDirector from \"../../HTMLElementDirector\";\nimport { easePanel, editButton } from \"../selectors\";\nimport CurveSelectorDirector from \"./CurveSelectorDirector\";\nimport OrientationSelectorDirector from \"./OrientationSelectorDirector\";\nimport GUIViewEvent from \"../../GUIViewEvent\";\nimport EasePanelBackgroundDirector from \"./EasePanelBackgroundDirector\";\n\nexport default class EasePanelDirector extends HTMLElementDirector {\n    constructor(rootDomElement, curves) {\n        super(easePanel(rootDomElement));\n\n        this._curveSelector = new CurveSelectorDirector(rootDomElement, curves);\n        this._curveSelector.on(GUIViewEvent.CURVE_PRESET_SELECTED, (...args) => this.emit(GUIViewEvent.CURVE_PRESET_SELECTED, ...args));\n\n        this._orientationSelector = new OrientationSelectorDirector(rootDomElement);\n        this._orientationSelector.on(GUIViewEvent.ORIENTATION_PRESET_SELECTED, (...args) => this.emit(GUIViewEvent.ORIENTATION_PRESET_SELECTED, ...args));\n\n        this._background = new EasePanelBackgroundDirector(rootDomElement);\n\n        this._editButtonElement = editButton(rootDomElement);\n        this._editButtonElement.style.display = \"none\"\n        this._editButtonElement.addEventListener(\"click\", () => this.emit(GUIViewEvent.EDIT_EASE_CLICKED));\n    }\n\n    setOrientations(orientations) {\n        this._orientationSelector.values = orientations;\n    }\n\n    setPreset(preset) {\n        this._curveSelector.value = preset.curve;\n        this._orientationSelector.value = preset.orientation;\n        this._background.refresh(preset.ease);\n    }\n\n    showEditButton() {\n        this._editButtonElement.style.display = null;\n    }\n}","import propertyDomTemplate from \"../property.html\";\nimport HTMLElementDirector from \"../../HTMLElementDirector\";\nimport { propertiesContainer } from \"../selectors\";\nimport { controllers } from \"dat.gui\";\nimport GUIViewEvent from \"../../GUIViewEvent\";\nconst { StringController, NumberControllerBox, NumberControllerSlider, BooleanController } = controllers;\n\nclass EasePropertiesDirector extends HTMLElementDirector {\n    constructor(rootDomElement) {\n        super(propertiesContainer(rootDomElement));\n\n        this._values = {};\n    }\n\n    set values(props) {\n        if (this._values === props) return;\n        this._element.innerHTML = \"\";\n\n        for (let [propertyName, property] of props.entries()) {\n            const controller = createDatGuiController(property);\n            controller.onChange(value => this.emit(GUIViewEvent.PROPERTY_MODIFIED, propertyName, value));\n\n            this._element.append(controller.domElement);\n        }\n\n        this._values = props;\n    }\n}\n\nfunction createDatGuiController(property) {\n    const config = { [property.name]: property.value };\n\n    switch(typeof property.value) {\n        case \"string\":\n            return createStringController(config, property);\n        case \"number\":\n            return createNumberController(config, property);\n        case \"boolean\":\n            return createBooleanController(config, property);\n    }\n}\n\nfunction createStringController(config, property) {\n    return extendControllerDOM(new StringController(config, property.name));\n}\n\nfunction createNumberController(config, property) {\n    if (property.uiConfig) {\n        return createNumberSliderController(config, property);\n    }\n    else {\n        return createNumberBoxController(config, property);\n    }\n}\n\n// https://github.com/dataarts/dat.gui/blob/f720c729deca5d5c79da8464f8a05500d38b140c/src/dat/gui/GUI.js#L992\nfunction createNumberSliderController(config, property) {\n    const sliderController = new NumberControllerSlider(config, property.name, property.uiConfig.min, property.uiConfig.max, property.uiConfig.step);\n    const boxController = new NumberControllerBox(config, property.name, property.uiConfig.min, property.uiConfig.max, property.uiConfig.step);\n    const wrapperElement = _renderTemplate(propertyDomTemplate);\n    \n    ['updateDisplay', 'onChange', 'onFinishChange', 'step', 'min', 'max'].forEach(method => {\n        const pc = sliderController[method];\n        const pb = boxController[method];\n\n        sliderController[method] = boxController[method] = function() {\n            const args = Array.prototype.slice.call(arguments);\n            pb.apply(boxController, args);\n            return pc.apply(sliderController, args);\n        };\n    });\n\n    wrapperElement.classList.add(\"number\", \"has-slider\");\n    wrapperElement.querySelector(\"span.property-name\").innerHTML = property.name.toUpperCase();\n    wrapperElement.querySelector(\"div.c\").append(sliderController.domElement, boxController.domElement);\n\n    sliderController.domElement = wrapperElement;\n    return sliderController;\n}\n\nfunction createNumberBoxController(config, property) {\n    return extendControllerDOM(new NumberControllerBox(config, property.name));\n}\n\nfunction createBooleanController(config, property) {\n    return extendControllerDOM(new BooleanController(config, property.name));\n}\n\nfunction extendControllerDOM(controller) {\n    const controllerElement = controller.domElement;\n    const wrapperElement = _renderTemplate(propertyDomTemplate);\n\n    wrapperElement.classList.add(typeof controller.object[controller.property]);\n    wrapperElement.querySelector(\"span.property-name\").innerHTML = controller.property;\n    wrapperElement.querySelector(\"div.c\").append(controllerElement.firstElementChild);\n\n    controller.domElement = wrapperElement;\n    return controller;\n}\n\nfunction _renderTemplate(template) {\n    return (new DOMParser()).parseFromString(template, \"text/html\").body.firstChild;\n}\n\nexport default EasePropertiesDirector;","import HTMLElementDirector from \"../../HTMLElementDirector\";\nimport { orientationSelector } from \"../selectors\";\nimport GUIViewEvent from  \"../../GUIViewEvent\";\n\nexport default class OrientationSelectorDirector extends HTMLElementDirector {\n    constructor(rootDomElement) {\n        super(orientationSelector(rootDomElement));\n\n        this._element.onchange = () => this.emit(GUIViewEvent.ORIENTATION_PRESET_SELECTED, this._element.value);\n    }\n    \n    set values(orientations) {\n        this._element.options.length = 0;\n        \n        if (orientations.length > 0) {\n            for (let orientation of orientations) {\n                this._element.options.add(new Option(orientation, orientation));\n            }\n            this._element.removeAttribute(\"disabled\");\n        }\n        else {\n            this._element.setAttribute(\"disabled\", true);\n        }\n    }\n\n    set value(orientation) {\n        this._element.value = orientation;\n    }\n}","export function easePanel(rootDomElement) {\n    return rootDomElement.querySelector(\".ease-selector\");\n}\n\nexport function curveSelector(rootDomElement) {\n    return rootDomElement.querySelector(\".curve-selector\");\n}\n\nexport function orientationSelector(rootDomElement) {\n    return rootDomElement.querySelector(\".orientation-selector\");\n}\n\nexport function cornerCurveCanvas(rootDomElement) {\n    return rootDomElement.querySelector(\"canvas.corner-curve\");\n}\n\nexport function editButton(rootDomElement) {\n    return rootDomElement.querySelector(\".edit-button\");\n}\n\nexport function propertiesContainer(rootDomElement) {\n    return rootDomElement.querySelector(\".properties-container\");\n}\n\nexport function editorCanvas(rootDomElement) {\n    return rootDomElement.querySelector(\"canvas.editor\");\n}\n\nexport function editorSvgPathInspector(rootDomElement) {\n    return rootDomElement.querySelector(\".path-selector\");\n}\n\nexport function editorSvgPathCopyButton(rootDomElement) {\n    return rootDomElement.querySelector(\".copy-button\");\n}\n\nexport function editorAcceptButton(rootDomElement) {\n    return rootDomElement.querySelector(\".accept-button\");\n}\n\nexport function editorDeclineButton(rootDomElement) {\n    return rootDomElement.querySelector(\".decline-button\");\n}","import CurveJS from \"./lib/curvesjs/Curve\";\nimport BezierPoint from \"./lib/curvesjs/BezierPoint\";\nimport { EditorCurveChangeEvent } from \"./events\";\nimport Ease from \"../../model/ease/Ease\";\n\nexport default class EaseEditor {\n  constructor(canvas) {\n    this._canvas = canvas;\n    this._ctx = this._prepareContext(canvas);\n    this._curve = this._createCurveJSInstance(this._ctx);\n    this._propagateEvents(this._curve, canvas);\n  }\n\n  set ease(ease) {\n    const { points, pointColor, pointSize, cpDist } = this._curve;\n    const { anchors, firstAnchor, lastAnchor } = ease;\n    points.length = 0;\n\n    const firstPoint = new BezierPoint(this._toCanvasX(firstAnchor.x), this._toCanvasY(firstAnchor.y), this._ctx, pointColor, pointSize, cpDist);\n    firstPoint.cp2.x = this._toCanvasX(firstAnchor.handle.x);\n    firstPoint.cp2.y = this._toCanvasY(firstAnchor.handle.y);\n    firstPoint.cp1.x = -firstPoint.cp2.x;\n    firstPoint.cp1.y = -firstPoint.cp2.y;\n    points.push(firstPoint);\n\n    for (let i = 1; i < anchors.length - 1; i += 2) {\n      const precedingCurveEndAnchor = anchors[i];\n      const followingCurveStartAnchor = anchors[i + 1];\n      const point = new BezierPoint(this._toCanvasX(precedingCurveEndAnchor.x), this._toCanvasY(precedingCurveEndAnchor.y), this._ctx, pointColor, pointSize, cpDist);\n\n      point.cp1.x = this._toCanvasX(precedingCurveEndAnchor.handle.x);\n      point.cp1.y = this._toCanvasY(precedingCurveEndAnchor.handle.y);\n      point.cp2.x = this._toCanvasX(followingCurveStartAnchor.handle.x);\n      point.cp2.y = this._toCanvasY(followingCurveStartAnchor.handle.y);\n\n      points.push(point);\n    }\n\n    const lastPoint = new BezierPoint(this._toCanvasX(lastAnchor.x), this._toCanvasY(lastAnchor.y), this._ctx, pointColor, pointSize, cpDist);\n    lastPoint.cp1.x = this._toCanvasX(lastAnchor.handle.x);\n    lastPoint.cp1.y = this._toCanvasY(lastAnchor.handle.y);\n    lastPoint.cp2.x = -lastPoint.cp1.x;\n    lastPoint.cp2.y = -lastPoint.cp1.y;\n    points.push(lastPoint);\n\n    this._curve.draw();\n  }\n\n  get ease() {\n    const ease = new Ease();\n    const { cw, ch, points } = this._curve;\n\n    for (let i = 0; i < points.length - 1; i++) {\n      const startPoint = points[i];\n      const startAnchor = ease.addAnchor(this._fromCanvasX(startPoint.position.x), this._fromCanvasY(startPoint.position.y));\n      startAnchor.handle.x = this._fromCanvasX(startPoint.cp2.x);\n      startAnchor.handle.y = this._fromCanvasY(startPoint.cp2.y);\n\n      const endPoint = points[i + 1];\n      const endAnchor = ease.addAnchor(this._fromCanvasX(endPoint.position.x), this._fromCanvasY(endPoint.position.y));\n      endAnchor.handle.x = this._fromCanvasX(endPoint.cp1.x);\n      endAnchor.handle.y = this._fromCanvasY(endPoint.cp1.y);\n    }\n\n    return ease;\n  }\n\n  _prepareContext(canvas) {\n    const ctx = canvas.getContext(\"2d\");\n    ctx.canvas.width = canvas.clientWidth;\n    ctx.canvas.height = canvas.clientHeight;\n    return ctx;\n  }\n\n  _createCurveJSInstance(ctx) {\n    const curve = new CurveJS(ctx);\n\n    curve.setPointStyle('#ffffff', 8);\n    curve.setLineStyle('#ace247', 2);\n\n    return curve;\n  }\n\n  _propagateEvents(curve, canvas) {\n    curve.on('drag', () => canvas.dispatchEvent(new EditorCurveChangeEvent()));\n    curve.on('newpoint', () => canvas.dispatchEvent(new EditorCurveChangeEvent()));\n    curve.on('removepoint', () => canvas.dispatchEvent(new EditorCurveChangeEvent()));\n  }\n\n  _toCanvasX(x) {\n    return x * this._curve.cw;\n  }\n\n  _toCanvasY(y) {\n    return (1 - y) * this._curve.ch;\n  }\n\n  _fromCanvasX(x) {\n    return this._round(x / this._curve.cw);\n  }\n\n  _fromCanvasY(y) {\n    return this._round(1 - y / this._curve.ch);\n  }\n\n  _round(coord, numberOfFloatDigits = 3) {\n    const power = Math.pow(10, numberOfFloatDigits);\n    return Math.round(coord * power) / power;\n  }\n}\n\nexport {\n  EditorCurveChangeEvent\n}","export default class EditorCurveChangeEvent extends CustomEvent {\n    constructor() {\n        super(EditorCurveChangeEvent.KEY);\n    }\n\n    static KEY = \"editorCurveChangeEvent\";\n}","import Point from \"./Point\"\n\nexport default class BezierPoint {\n\n\tconstructor(x, y, context, color, size, cpDist) {\n\n\t\tthis.cpDist = cpDist;\n\n\t\tthis.color = color;\n\t\tthis.size = size;\n\n\t\tthis.position = new Point(x, y, this.color, this.size, context);\n\t\tthis.cp1 = new Point(x-this.cpDist, y, this.color, this.size, context);\n\t\tthis.cp2 = new Point(x+this.cpDist, y, this.color, this.size, context);\n\n\t\tthis.ctx = context;\n\t\tthis.r = 2;\n\n\t\tthis.collapsed = false;\n\n\t}\n\n\tcollapse() {\n\t\n\t\tif (!this.collapsed) {\n\t\t\tthis.collapsed = true;\n\t\t\tthis.cp1.x = this.cp2.x = this.position.x;\n\t\t\tthis.cp1.y = this.cp2.y = this.position.y;\n\t\t} else {\n\t\t\tthis.collapsed = false;\n\t\t\tthis.cp1.x = this.position.x - this.cpDist;\n\t\t\tthis.cp2.x = this.position.x + this.cpDist;\n\t\t}\n\n\t}\n\n\tmove() {\n\n\t\tif (!this.collapsed) {\n\t\t\tthis.v1x = this.cp1.x - this.position.x;\n\t\t\tthis.v1y = this.cp1.y - this.position.y;\n\t\t\tthis.v2x = this.cp2.x - this.position.x;\n\t\t\tthis.v2y = this.cp2.y - this.position.y;\n\t\t} else {\n\t\t\tthis.v1x = this.v1y = this.v2x = this.v2y = 0;\n\t\t}\n\n\t}\n\n\tsetPointStyle(color, size) {\n\n\t\tthis.position.color = color;\n\t\tthis.cp1.color = color;\n\t\tthis.cp2.color = color;\n\t\tthis.position.r = size/2;\n\t\tthis.cp1.r = size/2;\n\t\tthis.cp2.r = size/2;\n\t}\n\n\tdraw() {\n\n\t\tthis.ctx.lineWidth = 0.2;\n\n\t\tthis.ctx.beginPath();\n\t\tthis.ctx.moveTo(this.position.x, this.position.y);\n\t\tthis.ctx.lineTo(this.cp1.x, this.cp1.y);\n\t\tthis.ctx.stroke();\n\n\t\tthis.ctx.beginPath();\n\t\tthis.ctx.moveTo(this.position.x, this.position.y);\n\t\tthis.ctx.lineTo(this.cp2.x, this.cp2.y);\n\t\tthis.ctx.stroke();\n\n\t\tthis.position.draw();\n\t\tthis.cp1.draw();\n\t\tthis.cp2.draw();\n\n\t}\n}","/*\nThe MIT License (MIT)\n\nCopyright (c) 2015 Sidney Douw\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all\ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n*/\n\nimport BezierPoint from \"./BezierPoint\";\n\nexport default class Curve {\n\n\tconstructor(context, interval, cpDist) {\n\n\t\tthis.BezierPoint = BezierPoint;\n\n\t\tthis.cpDist = cpDist ? cpDist : context.canvas.width * 0.2;\n\n\t\tthis.pointColor = '#f00';\n\t\tthis.pointSize = 4;\n\n\t\tthis.lineColor = '#fff';\n\t\tthis.lineWidth = 1;\n\n\t\tthis.points = [\n\t\t\tnew BezierPoint(0, context.canvas.height, context, this.pointColor, this.pointSize, this.cpDist),\n\t\t\tnew BezierPoint(context.canvas.width, 0, context, this.pointColor, this.pointSize, this.cpDist)\n\t\t];\n\n\t\tthis.ctx = context;\n\t\tthis.cw = context.canvas.width;\n\t\tthis.ch = context.canvas.height;\n\n\t\tthis.mouseX = 0;\n\t\tthis.mouseY = 0;\n\n\t\tthis.events = {};\n\n\t\tthis.interval = interval;\n\n\t\tthis.canvasEvents();\n\t\tthis.createLUT();\n\t\tthis.draw();\n\n\t}\n\n\txGetY(frame) {\n\n\t\tlet tolerance = 0.0001;\n\t\t\n\t\tlet iMin = 0;\n\t\tlet iMax = 5000;\n\t\tlet key = (iMin+iMax)/2;\n\n\t\tlet xTarget = frame/this.interval;\n\t\tlet xCurrent = this.lookupX[key];\n\n\t\tlet i = 0;\n\n\t\twhile (Math.abs(xTarget-xCurrent) > tolerance){\n\t\t\ti++;\n\t\t\t\n\t\t\tif (xCurrent > xTarget) {\n\t\t\t\tiMax = key;\n\t\t\t} else if (xCurrent < xTarget) {\n\t\t\t\tiMin = key;\n\t\t\t}\n\t\t\tkey = Math.round((iMin+iMax)/2);\n\t\t\txCurrent = this.lookupX[key];\n\n\t\t\tif (i > 20) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn this.lookupY[key];\n\n\t}\n\n\tcreateLUT() {\n\t\t\n\t\tthis.lookupX = [];\n\t\tthis.lookupY = [];\n\n\t\t//Percent Based Tesselation\n\t\tfor (let i = 1; i < this.points.length; i++) {\n\t\t\tlet p1 = this.points[i-1];\n\t\t\tlet p2 = this.points[i];\n\t\t\tlet pct = (p2.position.x/this.cw) - (p1.position.x/this.cw);\n\t\t\tfor (let t = 0; t < 1; t+=1/(5000*pct)) {\n\t\t\t\tlet x = (Math.pow((1-t),3)*p1.position.x) + (3*Math.pow((1-t),2)*t*p1.cp2.x) + (3*(1-t)*Math.pow(t,2)*p2.cp1.x) + (Math.pow(t,3)*p2.position.x);\n\t\t\t\tlet y = (Math.pow((1-t),3)*p1.position.y) + (3*Math.pow((1-t),2)*t*p1.cp2.y) + (3*(1-t)*Math.pow(t,2)*p2.cp1.y) + (Math.pow(t,3)*p2.position.y);\n\t\t\t\tthis.lookupX.push(x/this.cw);\n\t\t\t\tthis.lookupY.push(-y/this.ch+1);\n\t\t\t}\n\t\t}\n\n\t}\n\n\ton(event, func) {\n\t\tthis.events['on'+event] = func.bind(this);\n\t}\n\n\tcanvasEvents() {\n\n\t\tlet x,\n\t\t\ty,\n\t\t\tdist,\n\t\t\tdragReady,\n\t\t\tdragCP,\n\t\t\tdraging;\n\n\t\tlet _this = this;\n\t\t\n\t\tthis.ctx.canvas.addEventListener('mousemove', function(evt){\n\n\t\t\tlet bbox = this.getBoundingClientRect();\n\n\t\t\tx = evt.clientX - bbox.left;\n\t\t\ty = evt.clientY - bbox.top;\n\n\t\t\t_this.mouseX = x;\n\t\t\t_this.mouseY = y;\n\n\t\t\tfor (let i = 0; i < _this.points.length; i++) {\n\t\t\t\tlet p = _this.points[i];\n\n\t\t\t\tif (!draging) {\n\n\t\t\t\t\tdist = Math.sqrt((x-p.position.x)*(x-p.position.x) + (y-p.position.y)*(y-p.position.y));\n\t\t\t\t\tif (dist <= _this.pointSize/2+2) {\n\t\t\t\t\t\tthis.style.cursor = 'pointer';\n\t\t\t\t\t\tdragReady = i;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdist = Math.sqrt((x-p.cp1.x)*(x-p.cp1.x) + (y-p.cp1.y)*(y-p.cp1.y));\n\t\t\t\t\t\tif (dist <= _this.pointSize/2+2) {\n\t\t\t\t\t\t\tthis.style.cursor = 'pointer';\n\t\t\t\t\t\t\tdragReady = i;\n\t\t\t\t\t\t\tdragCP = 'cp1';\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tdist = Math.sqrt((x-p.cp2.x)*(x-p.cp2.x) + (y-p.cp2.y)*(y-p.cp2.y));\n\t\t\t\t\t\t\tif (dist <= _this.pointSize/2+2) {\n\t\t\t\t\t\t\t\tthis.style.cursor = 'pointer';\n\t\t\t\t\t\t\t\tdragReady = i;\n\t\t\t\t\t\t\t\tdragCP = 'cp2';\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthis.style.cursor = 'initial';\n\t\t\t\t\t\t\t\tdragReady = false;\n\t\t\t\t\t\t\t\tdragCP = false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif (keys[18]) {\n\t\t\t\tlet deltaW = _this.cw / 20;\n\t\t\t\tlet deltaH = _this.ch/ 10;\n\n\t\t\t\tlet posX = Math.floor((x+deltaW/2) / deltaW);\n\t\t\t\tlet posY = Math.floor((y+deltaH/2) / deltaH);\n\n\t\t\t\tx = deltaW * posX;\n\t\t\t\ty = deltaH * posY;\n\t\t\t}\n\n\t\t\tif (draging) {\n\t\t\t\tif (dragCP == 'cp1') {\n\t\t\t\t\t_this.points[dragReady].cp1.x = x;\n\t\t\t\t\t_this.points[dragReady].cp1.y = y;\n\n\t\t\t\t\t_this.points[dragReady].move();\n\n\t\t\t\t\tif (!keys[16]) {\n\t\t\t\t\t\t_this.points[dragReady].cp2.x = x - _this.points[dragReady].v1x*2;\n\t\t\t\t\t\t_this.points[dragReady].cp2.y = y - _this.points[dragReady].v1y*2;\n\t\t\t\t\t}\n\t\t\t\t} else if (dragCP == 'cp2') {\n\n\t\t\t\t\t_this.points[dragReady].cp2.x = x;\n\t\t\t\t\t_this.points[dragReady].cp2.y = y;\n\n\t\t\t\t\t_this.points[dragReady].move();\n\n\t\t\t\t\tif (!keys[16]) {\n\t\t\t\t\t\t_this.points[dragReady].cp1.x = x - _this.points[dragReady].v2x*2;\n\t\t\t\t\t\t_this.points[dragReady].cp1.y = y - _this.points[dragReady].v2y*2;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t_this.points[dragReady].move();\n\n\t\t\t\t\t_this.points[dragReady].position.x = x;\n\t\t\t\t\t_this.points[dragReady].position.y = y;\n\n\t\t\t\t\tif (dragReady === 0) {\n\t\t\t\t\t\t_this.points[dragReady].position.x = 0;\n\t\t\t\t\t}\n\t\t\t\t\tif (dragReady == _this.points.length-1) {\n\t\t\t\t\t\t_this.points[dragReady].position.x = _this.cw;\n\t\t\t\t\t}\n\n\t\t\t\t\t_this.points[dragReady].cp1.x = _this.points[dragReady].position.x + _this.points[dragReady].v1x;\n\t\t\t\t\t_this.points[dragReady].cp1.y = _this.points[dragReady].position.y + _this.points[dragReady].v1y;\n\t\t\t\t\t_this.points[dragReady].cp2.x = _this.points[dragReady].position.x + _this.points[dragReady].v2x;\n\t\t\t\t\t_this.points[dragReady].cp2.y = _this.points[dragReady].position.y + _this.points[dragReady].v2y;\n\n\t\t\t\t\tlet temp;\n\n\t\t\t\t\tif (_this.points[dragReady-1] && _this.points[dragReady+1]) {\n\t\t\t\t\t\tif (_this.points[dragReady].position.x > _this.points[dragReady+1].position.x) {\n\t\t\t\t\t\t\ttemp = _this.points[dragReady];\n\t\t\t\t\t\t\t_this.points[dragReady] = _this.points[dragReady+1];\n\t\t\t\t\t\t\t_this.points[dragReady+1] = temp;\n\t\t\t\t\t\t\tdragReady++;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (_this.points[dragReady-1].position.x > _this.points[dragReady].position.x) {\n\t\t\t\t\t\t\ttemp = _this.points[dragReady];\n\t\t\t\t\t\t\t_this.points[dragReady] = _this.points[dragReady-1];\n\t\t\t\t\t\t\t_this.points[dragReady-1] = temp;\n\t\t\t\t\t\t\tdragReady--;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t\t_this.events.ondrag ? _this.events.ondrag() : null;\n\t\t\t\t_this.draw();\n\t\t\t}\n\n\t\t\t_this.events.onmousemove ? _this.events.onmousemove() : null;\n\n\t\t});\n\t\tthis.ctx.canvas.addEventListener('mousedown', function(evt){\n\t\t\tevt.preventDefault();\n\n\t\t\tif (dragReady || dragReady === 0) {\n\t\t\t\tdraging = true;\n\t\t\t} else {\n\t\t\t\tif (dist > 5) {\n\t\t\t\t\tdragReady = _this.addPoint(x, y);\n\t\t\t\t\tdraging = true;\n\t\t\t\t\tthis.style.cursor = 'pointer';\n\t\t\t\t\t_this.draw();\n\t\t\t\t\t_this.events.onnewpoint ? _this.events.onnewpoint() : null;\n\t\t\t\t}\n\t\t\t}\n\n\t\t});\n\t\tthis.ctx.canvas.addEventListener('mouseup', function(evt){\n\n\t\t\tdraging = false;\n\t\t\tif (dist > 5) {\n\t\t\t\tdragReady = dragCP = false;\n\t\t\t}\n\n\t\t\tfor (let i = 0; i < _this.points.length; i++) {\n\t\t\t\tlet p = _this.points[i];\n\t\t\t\tdist = Math.sqrt((x-p.position.x)*(x-p.position.x) + (y-p.position.y)*(y-p.position.y));\n\t\t\t\tif (dist <= _this.pointSize/2+2) {\n\t\t\t\t\tthis.style.cursor = 'pointer';\n\t\t\t\t\tdragReady = i;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t_this.createLUT();\n\n\t\t});\n\t\tthis.ctx.canvas.addEventListener('mouseleave', function(evt){\n\n\t\t\tif (draging) {\n\t\t\t\tif (evt.offsetX < 0 || evt.offsetX > _this.cw) {\n\t\t\t\t\tif (evt.offsetX < 0) {\n\t\t\t\t\t\tif (dragCP == 'cp1') {\n\t\t\t\t\t\t\t_this.points[dragReady].cp1.x = 0;\n\n\t\t\t\t\t\t\t_this.points[dragReady].move();\n\n\t\t\t\t\t\t\tif (!keys[16]) {\n\t\t\t\t\t\t\t\t_this.points[dragReady].cp2.x = 0 - _this.points[dragReady].v1x*2;\n\t\t\t\t\t\t\t\t_this.points[dragReady].cp2.y = y - _this.points[dragReady].v1y*2;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else if (dragCP == 'cp2') {\n\t\t\t\t\t\t\t_this.points[dragReady].cp2.x = 0;\n\n\t\t\t\t\t\t\t_this.points[dragReady].move();\n\n\t\t\t\t\t\t\tif (!keys[16]) {\n\t\t\t\t\t\t\t\t_this.points[dragReady].cp1.x = 0 - _this.points[dragReady].v2x*2;\n\t\t\t\t\t\t\t\t_this.points[dragReady].cp1.y = y - _this.points[dragReady].v2y*2;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t_this.points[dragReady].position.x = 0;\n\t\t\t\t\t\t\t_this.points[dragReady].cp1.x = 0 + _this.points[dragReady].v1x;\n\t\t\t\t\t\t\t_this.points[dragReady].cp2.x = 0 + _this.points[dragReady].v2x;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (dragCP == 'cp1') {\n\t\t\t\t\t\t\t_this.points[dragReady].cp1.x = _this.cw;\n\n\t\t\t\t\t\t\t_this.points[dragReady].move();\n\n\t\t\t\t\t\t\tif (!keys[16]) {\n\t\t\t\t\t\t\t\t_this.points[dragReady].cp2.x = _this.cw - _this.points[dragReady].v1x*2;\n\t\t\t\t\t\t\t\t_this.points[dragReady].cp2.y = y - _this.points[dragReady].v1y*2;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else if (dragCP == 'cp2') {\n\t\t\t\t\t\t\t_this.points[dragReady].cp2.x = _this.cw;\n\n\t\t\t\t\t\t\t_this.points[dragReady].move();\n\n\t\t\t\t\t\t\tif (!keys[16]) {\n\t\t\t\t\t\t\t\t_this.points[dragReady].cp1.x = _this.cw - _this.points[dragReady].v2x*2;\n\t\t\t\t\t\t\t\t_this.points[dragReady].cp1.y = y - _this.points[dragReady].v2y*2;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t_this.points[dragReady].position.x = _this.cw;\n\t\t\t\t\t\t\t_this.points[dragReady].cp1.x = _this.cw + _this.points[dragReady].v1x;\n\t\t\t\t\t\t\t_this.points[dragReady].cp2.x = _this.cw + _this.points[dragReady].v2x;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else if (evt.offsetY < 0 || evt.offsetY > _this.ch) {\n\t\t\t\t\tif (evt.offsetY < 0) {\n\t\t\t\t\t\tif (dragCP == 'cp1') {\n\t\t\t\t\t\t\t_this.points[dragReady].cp1.y = 0;\n\n\t\t\t\t\t\t\t_this.points[dragReady].move();\n\n\t\t\t\t\t\t\tif (!keys[16]) {\n\t\t\t\t\t\t\t\t_this.points[dragReady].cp2.x = x - _this.points[dragReady].v1x*2;\n\t\t\t\t\t\t\t\t_this.points[dragReady].cp2.y = 0 - _this.points[dragReady].v1y*2;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else if (dragCP == 'cp2') {\n\t\t\t\t\t\t\t_this.points[dragReady].cp2.y = 0;\n\n\t\t\t\t\t\t\t_this.points[dragReady].move();\n\n\t\t\t\t\t\t\tif (!keys[16]) {\n\t\t\t\t\t\t\t\t_this.points[dragReady].cp1.x = x - _this.points[dragReady].v2x*2;\n\t\t\t\t\t\t\t\t_this.points[dragReady].cp1.y = 0 - _this.points[dragReady].v2y*2;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t_this.points[dragReady].position.y = 0;\n\t\t\t\t\t\t\t_this.points[dragReady].cp1.y = 0 + _this.points[dragReady].v1y;\n\t\t\t\t\t\t\t_this.points[dragReady].cp2.y = 0 + _this.points[dragReady].v2y;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (dragCP == 'cp1') {\n\t\t\t\t\t\t\t_this.points[dragReady].cp1.y = _this.ch;\n\n\t\t\t\t\t\t\t_this.points[dragReady].move();\n\t\t\t\t\t\t\tif (!keys[16]) {\n\t\t\t\t\t\t\t\t_this.points[dragReady].cp2.x = x - _this.points[dragReady].v1x*2;\n\t\t\t\t\t\t\t\t_this.points[dragReady].cp2.y = _this.ch - _this.points[dragReady].v1y*2;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else if (dragCP == 'cp2') {\n\t\t\t\t\t\t\t_this.points[dragReady].cp2.y = _this.ch;\n\n\t\t\t\t\t\t\t_this.points[dragReady].move();\n\n\t\t\t\t\t\t\tif (!keys[16]) {\n\t\t\t\t\t\t\t\t_this.points[dragReady].cp1.x = x - _this.points[dragReady].v2x*2;\n\t\t\t\t\t\t\t\t_this.points[dragReady].cp1.y = _this.ch - _this.points[dragReady].v2y*2;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t_this.points[dragReady].position.y = _this.ch;\n\t\t\t\t\t\t\t_this.points[dragReady].cp1.y = _this.ch + _this.points[dragReady].v1y;\n\t\t\t\t\t\t\t_this.points[dragReady].cp2.y = _this.ch + _this.points[dragReady].v2y;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t_this.draw();\n\t\t\t_this.createLUT();\n\n\t\t\tdraging = dragReady = dragCP = false;\n\n\t\t});\n\t\tthis.ctx.canvas.addEventListener('click', function(evt){\n\t\t\tif (keys[16] && !dragCP) {\n\t\t\t\t_this.points[dragReady].collapse();\n\t\t\t\t_this.draw();\n\t\t\t\t_this.createLUT();\n\t\t\t\t_this.events.ontogglecontrol ? _this.events.ontogglecontrol() : null;\n\t\t\t}\n\t\t});\n\t\tthis.ctx.canvas.addEventListener('dblclick', function(evt){\n\t\t\t_this.points.splice(dragReady, 1);\n\t\t\tdraging = dragReady = dragCP = false;\n\t\t\tdist = 1000;\n\t\t\tthis.style.cursor = 'initial';\n\t\t\t_this.draw();\n\t\t\t_this.createLUT();\n\t\t\t_this.events.onremovepoint ? _this.events.onremovepoint() : null;\n\t\t});\n\n\t}\n\n\taddPoint(x, y) {\n\t\t\n\t\tthis.points.push(new BezierPoint(x, y, this.ctx, this.pointColor, this.pointSize, this.cpDist));\n\n\t\tthis.points.sort(function(a, b){\n\t\t\treturn a.position.x - b.position.x;\n\t\t});\n\n\t\tfor (let i = 0; i < this.points.length; i++) {\n\t\t\tlet p = this.points[i];\n\t\t\tif (x == p.position.x && y == p.position.y) {\n\t\t\t\treturn i;\n\t\t\t}\n\t\t}\n\n\t}\n\n\tsetPointStyle(color, size) {\n\t\t\n\t\tfor (let i = 0; i < this.points.length; i++) {\n\t\t\tthis.points[i].setPointStyle(color, size);\n\t\t\tthis.pointColor = color;\n\t\t\tthis.pointSize = size;\n\t\t}\n\t\tthis.draw();\n\n\t}\n\n\tsetLineStyle(color, width) {\n\t\t\n\t\tthis.lineColor = color;\n\t\tthis.lineWidth = width;\n\t\tthis.draw();\n\n\t}\n\n\tdraw() {\n\t\t\n\t\tthis.ctx.clearRect(0, 0, this.cw, this.ch);\n\t\t\n\t\tthis.ctx.strokeStyle = '#444';\n\t\tthis.ctx.lineWidth = 1;\n\n\t\tfor (let i = 1; i < 10; i++) {\n\t\t\tthis.ctx.beginPath();\n\t\t\tthis.ctx.moveTo((this.cw/10)*i-0.5, 0);\n\t\t\tthis.ctx.lineTo((this.cw/10)*i-0.5, this.ch);\n\t\t\tthis.ctx.stroke();\n\t\t}\n\t\tfor (let i = 1; i < 5; i++) {\n\t\t\tthis.ctx.beginPath();\n\t\t\tthis.ctx.moveTo(0, (this.ch/5)*i-0.5);\n\t\t\tthis.ctx.lineTo(this.cw, (this.ch/5)*i-0.5);\n\t\t\tthis.ctx.stroke();\n\t\t}\n\n\t\tthis.ctx.lineWidth = 0.5;\n\t\tfor (let i = 1; i < 20; i++) {\n\t\t\tthis.ctx.beginPath();\n\t\t\tthis.ctx.moveTo((this.cw/20)*i-0.5, 0);\n\t\t\tthis.ctx.lineTo((this.cw/20)*i-0.5, this.ch);\n\t\t\tthis.ctx.stroke();\n\t\t}\n\t\tfor (let i = 1; i < 10; i++) {\n\t\t\tthis.ctx.beginPath();\n\t\t\tthis.ctx.moveTo(0, (this.ch/10)*i-0.5);\n\t\t\tthis.ctx.lineTo(this.cw, (this.ch/10)*i-0.5);\n\t\t\tthis.ctx.stroke();\n\t\t}\n\n\t\tthis.ctx.strokeStyle = this.lineColor;\n\t\tthis.ctx.lineWidth = this.lineWidth;\n\n\t\tthis.ctx.beginPath();\n\t\tthis.ctx.moveTo(this.points[0].position.x, this.points[0].position.y);\n\t\tfor (let i = 1; i < this.points.length; i++) {\n\t\t\tlet p = this.points[i];\n\t\t\tlet pP = this.points[i-1];\n\t\t\tthis.ctx.bezierCurveTo(pP.cp2.x, pP.cp2.y, p.cp1.x, p.cp1.y, p.position.x, p.position.y);\n\t\t}\n\t\tthis.ctx.stroke();\n\n\t\tfor (let i = 0; i < this.points.length; i++) {\n\t\t\tthis.points[i].draw();\n\t\t}\n\n\t}\n}\n\n\nconst keys = [];\nwindow.addEventListener('keydown', function(e){\n\tkeys[e.keyCode] = true;\n});\nwindow.addEventListener('keyup', function(e){\n\tdelete keys[e.keyCode];\n});","export default class Point {\n\n\tconstructor(x, y, color, size, context) {\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.r = size/2;\n\t\tthis.color = color;\n\t\tthis.ctx = context;\n\n\t}\n\n\tdraw() {\n\n\t\tthis.ctx.fillStyle = this.color;\n\t\tthis.ctx.beginPath();\n\t\tthis.ctx.arc(this.x, this.y, this.r, 0, Math.PI*2, false);\n\t\tthis.ctx.closePath();\n\t\tthis.ctx.fill();\n\n\t}\n}\n","import \"./index.scss\";\nimport EaseManager from \"./EaseManager\";\nimport addEaseGUI from \"./gui/addEaseGUI\";\nimport Middleware, { middleware } from \"./middleware/Middleware\";\nimport Ease, { Handle, Anchor, Point } from \"./gui/model/ease/Ease\";\nimport EasePreset from \"./gui/model/preset/EasePreset\";\nimport * as presets from \"./gui/model/preset/presets\";\n\nconst easeManager = new EaseManager();\n\nfunction addEase(object, property) {\n    const ease = object[property];\n        \n    if (easeManager.hasCompatibleMiddleware(ease)) {\n        return addEaseGUI.call(this, object, property, easeManager.getCompatibleMiddleware(ease));\n    }\n    else {\n        console.warn(\"No compatible middleware found.\");\n    }\n}\n\nexport function extend(dat) {\n    dat.gui.ease = easeManager;\n\n    const add = dat.GUI.prototype.add;\n    function addOverride(object, property) {\n        const value = object[property] || object;\n\n        if (easeManager.hasCompatibleMiddleware(value)) {\n            return addEase.call(this, ...arguments);\n        }\n        else {\n            return add.call(this, ...arguments);\n        }\n    }\n\n    dat.GUI.prototype.add = addOverride;\n    dat.gui.GUI.prototype.add = addOverride;\n\n    dat.GUI.prototype.addEase = addEase;\n    dat.gui.GUI.prototype.addEase = addEase;\n\n    return easeManager;\n}\n\nexport {\n    Middleware,\n    EasePreset,\n    Ease,\n    Handle,\n    Anchor,\n    Point,\n    middleware,\n    presets,\n    easeManager as manager\n}\n\nexport default {\n    extend\n};","import PredicateCastEntry from \"./cast/PredicateCastEntry\";\nimport InstanceCastEntry from \"./cast/InstanceCastEntry\";\nimport TransformCastEntry from \"./cast/TransformCastEntry\";\n\nclass Middleware {\n    constructor(name, castEntries = []) {\n        this._name = name;\n        this._castEntries = castEntries;\n    }\n\n    get castEntries() {\n        return this._castEntries;\n    }\n\n    get presets() {\n        return this._castEntries.filter(castEntry => !(castEntry instanceof TransformCastEntry)).map(entry => entry.preset);\n    }\n\n    preset(thirdPartyEaseOrPredicateFunction, ...followupArguments) {\n        switch (typeof thirdPartyEaseOrPredicateFunction) {\n            case \"function\":\n                this._predicatePreset(thirdPartyEaseOrPredicateFunction, ...followupArguments);\n                return this;\n            case \"string\":\n            case \"object\":\n                this._instancePreset(thirdPartyEaseOrPredicateFunction, ...followupArguments);\n                return this;\n            default:\n                console.warn(`Unsupported ease format: `, thirdPartyEaseOrPredicate);\n                return this;\n        }\n    }\n\n    transform(predicateFunction, thirdPartyToNativeCast, nativeToThirdPartyCast) {\n        this.castEntries.push(TransformCastEntry.of(predicateFunction, thirdPartyToNativeCast, nativeToThirdPartyCast));\n        return this;\n    }\n\n    pick(predicateFunction) {\n        const middleware = this;\n\n        return {\n            transform(thirdPartyToNativeCast, nativeToThirdPartyCast) {\n                middleware.castEntries.push(TransformCastEntry.of(predicateFunction, thirdPartyToNativeCast, nativeToThirdPartyCast));\n                return middleware;\n            }\n        };\n    }\n\n    isEditingSupported() {\n        return this.castEntries.some(castEntry => castEntry instanceof TransformCastEntry);\n    }\n\n    isFormatSupported(thirdPartyEase) {\n        return this.castEntries.some(castEntry => castEntry.supportsCastInward(thirdPartyEase));\n    }\n\n    import(thirdPartyEase) {\n        const castEntry = this._castEntries.find(castEntry => castEntry.supportsCastInward(thirdPartyEase));\n        \n        if (castEntry) {\n            return castEntry.castInward(thirdPartyEase);\n        }\n        else {\n            console.warn(`Unsupported inward cast requested for ease ${thirdPartyEase.toString()}`);\n        }\n    }\n\n    export(nativeEase) {\n        const castEntry = this._castEntries.find(castEntry => castEntry.supportsCastOutward(nativeEase));\n        \n        if (castEntry) {\n            return castEntry.castOutward(nativeEase);\n        }\n        else {\n            console.warn(`Unsupported outward cast requested for ease ${nativeEase.toString()}`);\n        }\n    }\n\n    toString() {\n        return `[object DatGuiEase${this._name}Middleware]`;\n    }\n\n    static checkSignature(instanceLike) {\n        return /^\\[object DatGuiEase(?:.*)Middleware\\]$/.test(instanceLike.toString());\n    }\n\n    _predicatePreset(predicateFunction, thirdPartyToNativeCast, nativeToThirdPartyCast, nativeEasePreset) {\n        this.castEntries.push(PredicateCastEntry.of(...arguments));\n    }\n\n    _instancePreset(thirdPartyEase, nativeEasePreset) {\n        this.castEntries.push(InstanceCastEntry.of(...arguments));\n    }\n}\n\nexport function middleware(name) {\n    return new Middleware(name);\n}\n\nexport default Middleware;","export default class CastEntry {\n    supportsCastInward(thirdPartyEase) {\n        try {\n            return !!this.castInward(thirdPartyEase);\n        }\n        catch (e) {\n            return false;\n        }\n    }\n\n    supportsCastOutward(nativeEasePreset) {\n        try {\n            return !!this.castOutward(nativeEasePreset);\n        }\n        catch (e) {\n            return false;\n        }\n    }\n\n    castInward(thirdPartyEase) {\n        throw new Error(\"Method override missing\");\n    }\n\n    castOutward(nativeEasePreset) {\n        throw new Error(\"Method override missing\");\n    }\n}","import EasePreset from \"../../gui/model/preset/EasePreset\";\nimport EasePresetProvider from \"../../gui/model/preset/EasePresetProvider\";\nimport CastEntry from \"./CastEntry\";\n\nclass InstanceCastEntry extends CastEntry {\n    constructor(thirdPartyEase, nativeEasePresetOrPresetProvider) {\n        super();\n        \n        this._thirdPartyEase = thirdPartyEase;\n        this._preset = this._parseNativePreset(nativeEasePresetOrPresetProvider);\n    }\n\n    get preset() {\n        return this._preset;\n    }\n\n    supportsCastInward(thirdPartyEase) {\n        return this._thirdPartyEase === thirdPartyEase && !!this._preset;\n    }\n\n    supportsCastOutward(nativeEasePreset) {\n        return this._preset.equals(nativeEasePreset) && !!this._thirdPartyEase;\n    }\n\n    castInward(thirdPartyEase) {\n        return this._preset.clone();\n    }\n\n    castOutward(nativeEasePreset) {\n        return this._thirdPartyEase;\n    }\n\n    static of(thirdPartyEase, nativeEasePresetOrPresetProvider) {\n        return new InstanceCastEntry(...arguments);\n    }\n\n    _parseNativePreset(rawNativePreset) {\n        // instanceof seems broken after transpilation, added temporary signature checks\n        if (rawNativePreset instanceof EasePresetProvider || EasePresetProvider.checkSignature(rawNativePreset)) {\n            return rawNativePreset.next();\n        }\n        else if (rawNativePreset instanceof EasePreset || EasePreset.checkSignature(rawNativePreset)) {\n            return rawNativePreset.clone();\n        }\n        else {\n            console.warn(`Native preset or preset provider expected. Instead got `, rawNativePreset);\n        }\n    }\n}\n\nexport default InstanceCastEntry;","import EasePreset from \"../../gui/model/preset/EasePreset\";\nimport EasePresetProvider from \"../../gui/model/preset/EasePresetProvider\";\nimport CastEntry from \"./CastEntry\";\n\nclass PredicateCastEntry extends CastEntry {\n    constructor(predicateFunction, thirdPartyToNativeCast, nativeToThirdPartyCast, nativeEasePresetOrPresetProvider) {\n        super();\n\n        this._predicate = predicateFunction;\n        this._transformThirdPartyToNativeEase = thirdPartyToNativeCast;\n        this._transformNativeToThirdPartyEase = nativeToThirdPartyCast;\n        this._preset = this._parseNativePreset(nativeEasePresetOrPresetProvider);\n    }\n\n    get preset() {\n        return this._preset;\n    }\n\n    supportsCastInward(thirdPartyEase) {\n        return this._predicate(thirdPartyEase) && this._transformThirdPartyToNativeEase;\n    }\n\n    castInward(thirdPartyEase) {\n        const preset = this._preset.clone();\n        preset.ease = this._transformThirdPartyToNativeEase(thirdPartyEase);\n        return preset;\n    }\n\n    castOutward(nativeEasePreset) {\n        return this._transformNativeToThirdPartyEase(nativeEasePreset.ease);\n    }\n\n    static of(predicateFunction, thirdPartyToNativeCast, nativeToThirdPartyCast, nativeEasePresetOrPresetProvider) {\n        return new PredicateCastEntry(...arguments);\n    }\n\n    _parseNativePreset(rawNativePreset) {\n        // instanceof seems broken after transpilation, added temporary signature checks\n        if (rawNativePreset instanceof EasePresetProvider || EasePresetProvider.checkSignature(rawNativePreset)) {\n            return rawNativePreset.next();\n        }\n        else if (rawNativePreset instanceof EasePreset || EasePreset.checkSignature(rawNativePreset)) {\n            return rawNativePreset.clone();\n        }\n        else {\n            console.warn(`Native preset or preset provider expected. Instead got `, rawNativePreset);\n        }\n    }\n}\n\nexport default PredicateCastEntry;","import EasePreset, { Curve } from \"../../gui/model/preset/EasePreset\";\nimport CastEntry from \"./CastEntry\";\n\nclass TransformCastEntry extends CastEntry {\n    constructor(predicateFunction, thirdPartyToNativeCast, nativeToThirdPartyCast) {\n        super();\n\n        this._predicate = predicateFunction;\n        this._transformThirdPartyToNativeEase = thirdPartyToNativeCast;\n        this._transformNativeToThirdPartyEase = nativeToThirdPartyCast;\n    }\n\n    supportsCastInward(thirdPartyEase) {\n        return this._predicate(thirdPartyEase) && this._transformThirdPartyToNativeEase;\n    }\n\n    castInward(thirdPartyEase) {\n        return new EasePreset(this._transformThirdPartyToNativeEase(thirdPartyEase), Curve.CUSTOM);\n    }\n\n    castOutward(nativeEasePreset) {\n        return this._transformNativeToThirdPartyEase(nativeEasePreset.ease);\n    }\n\n    static of(predicateFunction, thirdPartyToNativeCast, nativeToThirdPartyCast) {\n        return new TransformCastEntry(...arguments);\n    }\n}\n\nexport default TransformCastEntry;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Bezier = void 0;\n// math-inlining.\nconst {\n  abs,\n  cos,\n  sin,\n  acos,\n  atan2,\n  sqrt,\n  pow\n} = Math; // cube root function yielding real roots\n\nfunction crt(v) {\n  return v < 0 ? -pow(-v, 1 / 3) : pow(v, 1 / 3);\n} // trig constants\n\n\nconst pi = Math.PI,\n      tau = 2 * pi,\n      quart = pi / 2,\n      // float precision significant decimal\nepsilon = 0.000001,\n      // extremas used in bbox calculation and similar algorithms\nnMax = Number.MAX_SAFE_INTEGER || 9007199254740991,\n      nMin = Number.MIN_SAFE_INTEGER || -9007199254740991,\n      // a zero coordinate, which is surprisingly useful\nZERO = {\n  x: 0,\n  y: 0,\n  z: 0\n}; // Bezier utility functions\n\nconst utils = {\n  // Legendre-Gauss abscissae with n=24 (x_i values, defined at i=n as the roots of the nth order Legendre polynomial Pn(x))\n  Tvalues: [-0.0640568928626056260850430826247450385909, 0.0640568928626056260850430826247450385909, -0.1911188674736163091586398207570696318404, 0.1911188674736163091586398207570696318404, -0.3150426796961633743867932913198102407864, 0.3150426796961633743867932913198102407864, -0.4337935076260451384870842319133497124524, 0.4337935076260451384870842319133497124524, -0.5454214713888395356583756172183723700107, 0.5454214713888395356583756172183723700107, -0.6480936519369755692524957869107476266696, 0.6480936519369755692524957869107476266696, -0.7401241915785543642438281030999784255232, 0.7401241915785543642438281030999784255232, -0.8200019859739029219539498726697452080761, 0.8200019859739029219539498726697452080761, -0.8864155270044010342131543419821967550873, 0.8864155270044010342131543419821967550873, -0.9382745520027327585236490017087214496548, 0.9382745520027327585236490017087214496548, -0.9747285559713094981983919930081690617411, 0.9747285559713094981983919930081690617411, -0.9951872199970213601799974097007368118745, 0.9951872199970213601799974097007368118745],\n  // Legendre-Gauss weights with n=24 (w_i values, defined by a function linked to in the Bezier primer article)\n  Cvalues: [0.1279381953467521569740561652246953718517, 0.1279381953467521569740561652246953718517, 0.1258374563468282961213753825111836887264, 0.1258374563468282961213753825111836887264, 0.121670472927803391204463153476262425607, 0.121670472927803391204463153476262425607, 0.1155056680537256013533444839067835598622, 0.1155056680537256013533444839067835598622, 0.1074442701159656347825773424466062227946, 0.1074442701159656347825773424466062227946, 0.0976186521041138882698806644642471544279, 0.0976186521041138882698806644642471544279, 0.086190161531953275917185202983742667185, 0.086190161531953275917185202983742667185, 0.0733464814110803057340336152531165181193, 0.0733464814110803057340336152531165181193, 0.0592985849154367807463677585001085845412, 0.0592985849154367807463677585001085845412, 0.0442774388174198061686027482113382288593, 0.0442774388174198061686027482113382288593, 0.0285313886289336631813078159518782864491, 0.0285313886289336631813078159518782864491, 0.0123412297999871995468056670700372915759, 0.0123412297999871995468056670700372915759],\n  arcfn: function (t, derivativeFn) {\n    const d = derivativeFn(t);\n    let l = d.x * d.x + d.y * d.y;\n\n    if (typeof d.z !== \"undefined\") {\n      l += d.z * d.z;\n    }\n\n    return sqrt(l);\n  },\n  compute: function (t, points, _3d) {\n    // shortcuts\n    if (t === 0) {\n      points[0].t = 0;\n      return points[0];\n    }\n\n    const order = points.length - 1;\n\n    if (t === 1) {\n      points[order].t = 1;\n      return points[order];\n    }\n\n    const mt = 1 - t;\n    let p = points; // constant?\n\n    if (order === 0) {\n      points[0].t = t;\n      return points[0];\n    } // linear?\n\n\n    if (order === 1) {\n      const ret = {\n        x: mt * p[0].x + t * p[1].x,\n        y: mt * p[0].y + t * p[1].y,\n        t: t\n      };\n\n      if (_3d) {\n        ret.z = mt * p[0].z + t * p[1].z;\n      }\n\n      return ret;\n    } // quadratic/cubic curve?\n\n\n    if (order < 4) {\n      let mt2 = mt * mt,\n          t2 = t * t,\n          a,\n          b,\n          c,\n          d = 0;\n\n      if (order === 2) {\n        p = [p[0], p[1], p[2], ZERO];\n        a = mt2;\n        b = mt * t * 2;\n        c = t2;\n      } else if (order === 3) {\n        a = mt2 * mt;\n        b = mt2 * t * 3;\n        c = mt * t2 * 3;\n        d = t * t2;\n      }\n\n      const ret = {\n        x: a * p[0].x + b * p[1].x + c * p[2].x + d * p[3].x,\n        y: a * p[0].y + b * p[1].y + c * p[2].y + d * p[3].y,\n        t: t\n      };\n\n      if (_3d) {\n        ret.z = a * p[0].z + b * p[1].z + c * p[2].z + d * p[3].z;\n      }\n\n      return ret;\n    } // higher order curves: use de Casteljau's computation\n\n\n    const dCpts = JSON.parse(JSON.stringify(points));\n\n    while (dCpts.length > 1) {\n      for (let i = 0; i < dCpts.length - 1; i++) {\n        dCpts[i] = {\n          x: dCpts[i].x + (dCpts[i + 1].x - dCpts[i].x) * t,\n          y: dCpts[i].y + (dCpts[i + 1].y - dCpts[i].y) * t\n        };\n\n        if (typeof dCpts[i].z !== \"undefined\") {\n          dCpts[i] = dCpts[i].z + (dCpts[i + 1].z - dCpts[i].z) * t;\n        }\n      }\n\n      dCpts.splice(dCpts.length - 1, 1);\n    }\n\n    dCpts[0].t = t;\n    return dCpts[0];\n  },\n  computeWithRatios: function (t, points, ratios, _3d) {\n    const mt = 1 - t,\n          r = ratios,\n          p = points;\n    let f1 = r[0],\n        f2 = r[1],\n        f3 = r[2],\n        f4 = r[3],\n        d; // spec for linear\n\n    f1 *= mt;\n    f2 *= t;\n\n    if (p.length === 2) {\n      d = f1 + f2;\n      return {\n        x: (f1 * p[0].x + f2 * p[1].x) / d,\n        y: (f1 * p[0].y + f2 * p[1].y) / d,\n        z: !_3d ? false : (f1 * p[0].z + f2 * p[1].z) / d,\n        t: t\n      };\n    } // upgrade to quadratic\n\n\n    f1 *= mt;\n    f2 *= 2 * mt;\n    f3 *= t * t;\n\n    if (p.length === 3) {\n      d = f1 + f2 + f3;\n      return {\n        x: (f1 * p[0].x + f2 * p[1].x + f3 * p[2].x) / d,\n        y: (f1 * p[0].y + f2 * p[1].y + f3 * p[2].y) / d,\n        z: !_3d ? false : (f1 * p[0].z + f2 * p[1].z + f3 * p[2].z) / d,\n        t: t\n      };\n    } // upgrade to cubic\n\n\n    f1 *= mt;\n    f2 *= 1.5 * mt;\n    f3 *= 3 * mt;\n    f4 *= t * t * t;\n\n    if (p.length === 4) {\n      d = f1 + f2 + f3 + f4;\n      return {\n        x: (f1 * p[0].x + f2 * p[1].x + f3 * p[2].x + f4 * p[3].x) / d,\n        y: (f1 * p[0].y + f2 * p[1].y + f3 * p[2].y + f4 * p[3].y) / d,\n        z: !_3d ? false : (f1 * p[0].z + f2 * p[1].z + f3 * p[2].z + f4 * p[3].z) / d,\n        t: t\n      };\n    }\n  },\n  derive: function (points, _3d) {\n    const dpoints = [];\n\n    for (let p = points, d = p.length, c = d - 1; d > 1; d--, c--) {\n      const list = [];\n\n      for (let j = 0, dpt; j < c; j++) {\n        dpt = {\n          x: c * (p[j + 1].x - p[j].x),\n          y: c * (p[j + 1].y - p[j].y)\n        };\n\n        if (_3d) {\n          dpt.z = c * (p[j + 1].z - p[j].z);\n        }\n\n        list.push(dpt);\n      }\n\n      dpoints.push(list);\n      p = list;\n    }\n\n    return dpoints;\n  },\n  between: function (v, m, M) {\n    return m <= v && v <= M || utils.approximately(v, m) || utils.approximately(v, M);\n  },\n  approximately: function (a, b, precision) {\n    return abs(a - b) <= (precision || epsilon);\n  },\n  length: function (derivativeFn) {\n    const z = 0.5,\n          len = utils.Tvalues.length;\n    let sum = 0;\n\n    for (let i = 0, t; i < len; i++) {\n      t = z * utils.Tvalues[i] + z;\n      sum += utils.Cvalues[i] * utils.arcfn(t, derivativeFn);\n    }\n\n    return z * sum;\n  },\n  map: function (v, ds, de, ts, te) {\n    const d1 = de - ds,\n          d2 = te - ts,\n          v2 = v - ds,\n          r = v2 / d1;\n    return ts + d2 * r;\n  },\n  lerp: function (r, v1, v2) {\n    const ret = {\n      x: v1.x + r * (v2.x - v1.x),\n      y: v1.y + r * (v2.y - v1.y)\n    };\n\n    if (v1.z !== undefined && v2.z !== undefined) {\n      ret.z = v1.z + r * (v2.z - v1.z);\n    }\n\n    return ret;\n  },\n  pointToString: function (p) {\n    let s = p.x + \"/\" + p.y;\n\n    if (typeof p.z !== \"undefined\") {\n      s += \"/\" + p.z;\n    }\n\n    return s;\n  },\n  pointsToString: function (points) {\n    return \"[\" + points.map(utils.pointToString).join(\", \") + \"]\";\n  },\n  copy: function (obj) {\n    return JSON.parse(JSON.stringify(obj));\n  },\n  angle: function (o, v1, v2) {\n    const dx1 = v1.x - o.x,\n          dy1 = v1.y - o.y,\n          dx2 = v2.x - o.x,\n          dy2 = v2.y - o.y,\n          cross = dx1 * dy2 - dy1 * dx2,\n          dot = dx1 * dx2 + dy1 * dy2;\n    return atan2(cross, dot);\n  },\n  // round as string, to avoid rounding errors\n  round: function (v, d) {\n    const s = \"\" + v;\n    const pos = s.indexOf(\".\");\n    return parseFloat(s.substring(0, pos + 1 + d));\n  },\n  dist: function (p1, p2) {\n    const dx = p1.x - p2.x,\n          dy = p1.y - p2.y;\n    return sqrt(dx * dx + dy * dy);\n  },\n  closest: function (LUT, point) {\n    let mdist = pow(2, 63),\n        mpos,\n        d;\n    LUT.forEach(function (p, idx) {\n      d = utils.dist(point, p);\n\n      if (d < mdist) {\n        mdist = d;\n        mpos = idx;\n      }\n    });\n    return {\n      mdist: mdist,\n      mpos: mpos\n    };\n  },\n  abcratio: function (t, n) {\n    // see ratio(t) note on http://pomax.github.io/bezierinfo/#abc\n    if (n !== 2 && n !== 3) {\n      return false;\n    }\n\n    if (typeof t === \"undefined\") {\n      t = 0.5;\n    } else if (t === 0 || t === 1) {\n      return t;\n    }\n\n    const bottom = pow(t, n) + pow(1 - t, n),\n          top = bottom - 1;\n    return abs(top / bottom);\n  },\n  projectionratio: function (t, n) {\n    // see u(t) note on http://pomax.github.io/bezierinfo/#abc\n    if (n !== 2 && n !== 3) {\n      return false;\n    }\n\n    if (typeof t === \"undefined\") {\n      t = 0.5;\n    } else if (t === 0 || t === 1) {\n      return t;\n    }\n\n    const top = pow(1 - t, n),\n          bottom = pow(t, n) + top;\n    return top / bottom;\n  },\n  lli8: function (x1, y1, x2, y2, x3, y3, x4, y4) {\n    const nx = (x1 * y2 - y1 * x2) * (x3 - x4) - (x1 - x2) * (x3 * y4 - y3 * x4),\n          ny = (x1 * y2 - y1 * x2) * (y3 - y4) - (y1 - y2) * (x3 * y4 - y3 * x4),\n          d = (x1 - x2) * (y3 - y4) - (y1 - y2) * (x3 - x4);\n\n    if (d == 0) {\n      return false;\n    }\n\n    return {\n      x: nx / d,\n      y: ny / d\n    };\n  },\n  lli4: function (p1, p2, p3, p4) {\n    const x1 = p1.x,\n          y1 = p1.y,\n          x2 = p2.x,\n          y2 = p2.y,\n          x3 = p3.x,\n          y3 = p3.y,\n          x4 = p4.x,\n          y4 = p4.y;\n    return utils.lli8(x1, y1, x2, y2, x3, y3, x4, y4);\n  },\n  lli: function (v1, v2) {\n    return utils.lli4(v1, v1.c, v2, v2.c);\n  },\n  makeline: function (p1, p2) {\n    return new Bezier(p1.x, p1.y, (p1.x + p2.x) / 2, (p1.y + p2.y) / 2, p2.x, p2.y);\n  },\n  findbbox: function (sections) {\n    let mx = nMax,\n        my = nMax,\n        MX = nMin,\n        MY = nMin;\n    sections.forEach(function (s) {\n      const bbox = s.bbox();\n      if (mx > bbox.x.min) mx = bbox.x.min;\n      if (my > bbox.y.min) my = bbox.y.min;\n      if (MX < bbox.x.max) MX = bbox.x.max;\n      if (MY < bbox.y.max) MY = bbox.y.max;\n    });\n    return {\n      x: {\n        min: mx,\n        mid: (mx + MX) / 2,\n        max: MX,\n        size: MX - mx\n      },\n      y: {\n        min: my,\n        mid: (my + MY) / 2,\n        max: MY,\n        size: MY - my\n      }\n    };\n  },\n  shapeintersections: function (s1, bbox1, s2, bbox2, curveIntersectionThreshold) {\n    if (!utils.bboxoverlap(bbox1, bbox2)) return [];\n    const intersections = [];\n    const a1 = [s1.startcap, s1.forward, s1.back, s1.endcap];\n    const a2 = [s2.startcap, s2.forward, s2.back, s2.endcap];\n    a1.forEach(function (l1) {\n      if (l1.virtual) return;\n      a2.forEach(function (l2) {\n        if (l2.virtual) return;\n        const iss = l1.intersects(l2, curveIntersectionThreshold);\n\n        if (iss.length > 0) {\n          iss.c1 = l1;\n          iss.c2 = l2;\n          iss.s1 = s1;\n          iss.s2 = s2;\n          intersections.push(iss);\n        }\n      });\n    });\n    return intersections;\n  },\n  makeshape: function (forward, back, curveIntersectionThreshold) {\n    const bpl = back.points.length;\n    const fpl = forward.points.length;\n    const start = utils.makeline(back.points[bpl - 1], forward.points[0]);\n    const end = utils.makeline(forward.points[fpl - 1], back.points[0]);\n    const shape = {\n      startcap: start,\n      forward: forward,\n      back: back,\n      endcap: end,\n      bbox: utils.findbbox([start, forward, back, end])\n    };\n\n    shape.intersections = function (s2) {\n      return utils.shapeintersections(shape, shape.bbox, s2, s2.bbox, curveIntersectionThreshold);\n    };\n\n    return shape;\n  },\n  getminmax: function (curve, d, list) {\n    if (!list) return {\n      min: 0,\n      max: 0\n    };\n    let min = nMax,\n        max = nMin,\n        t,\n        c;\n\n    if (list.indexOf(0) === -1) {\n      list = [0].concat(list);\n    }\n\n    if (list.indexOf(1) === -1) {\n      list.push(1);\n    }\n\n    for (let i = 0, len = list.length; i < len; i++) {\n      t = list[i];\n      c = curve.get(t);\n\n      if (c[d] < min) {\n        min = c[d];\n      }\n\n      if (c[d] > max) {\n        max = c[d];\n      }\n    }\n\n    return {\n      min: min,\n      mid: (min + max) / 2,\n      max: max,\n      size: max - min\n    };\n  },\n  align: function (points, line) {\n    const tx = line.p1.x,\n          ty = line.p1.y,\n          a = -atan2(line.p2.y - ty, line.p2.x - tx),\n          d = function (v) {\n      return {\n        x: (v.x - tx) * cos(a) - (v.y - ty) * sin(a),\n        y: (v.x - tx) * sin(a) + (v.y - ty) * cos(a)\n      };\n    };\n\n    return points.map(d);\n  },\n  roots: function (points, line) {\n    line = line || {\n      p1: {\n        x: 0,\n        y: 0\n      },\n      p2: {\n        x: 1,\n        y: 0\n      }\n    };\n    const order = points.length - 1;\n    const aligned = utils.align(points, line);\n\n    const reduce = function (t) {\n      return 0 <= t && t <= 1;\n    };\n\n    if (order === 2) {\n      const a = aligned[0].y,\n            b = aligned[1].y,\n            c = aligned[2].y,\n            d = a - 2 * b + c;\n\n      if (d !== 0) {\n        const m1 = -sqrt(b * b - a * c),\n              m2 = -a + b,\n              v1 = -(m1 + m2) / d,\n              v2 = -(-m1 + m2) / d;\n        return [v1, v2].filter(reduce);\n      } else if (b !== c && d === 0) {\n        return [(2 * b - c) / (2 * b - 2 * c)].filter(reduce);\n      }\n\n      return [];\n    } // see http://www.trans4mind.com/personal_development/mathematics/polynomials/cubicAlgebra.htm\n\n\n    const pa = aligned[0].y,\n          pb = aligned[1].y,\n          pc = aligned[2].y,\n          pd = aligned[3].y;\n    let d = -pa + 3 * pb - 3 * pc + pd,\n        a = 3 * pa - 6 * pb + 3 * pc,\n        b = -3 * pa + 3 * pb,\n        c = pa;\n\n    if (utils.approximately(d, 0)) {\n      // this is not a cubic curve.\n      if (utils.approximately(a, 0)) {\n        // in fact, this is not a quadratic curve either.\n        if (utils.approximately(b, 0)) {\n          // in fact in fact, there are no solutions.\n          return [];\n        } // linear solution:\n\n\n        return [-c / b].filter(reduce);\n      } // quadratic solution:\n\n\n      const q = sqrt(b * b - 4 * a * c),\n            a2 = 2 * a;\n      return [(q - b) / a2, (-b - q) / a2].filter(reduce);\n    } // at this point, we know we need a cubic solution:\n\n\n    a /= d;\n    b /= d;\n    c /= d;\n    const p = (3 * b - a * a) / 3,\n          p3 = p / 3,\n          q = (2 * a * a * a - 9 * a * b + 27 * c) / 27,\n          q2 = q / 2,\n          discriminant = q2 * q2 + p3 * p3 * p3;\n    let u1, v1, x1, x2, x3;\n\n    if (discriminant < 0) {\n      const mp3 = -p / 3,\n            mp33 = mp3 * mp3 * mp3,\n            r = sqrt(mp33),\n            t = -q / (2 * r),\n            cosphi = t < -1 ? -1 : t > 1 ? 1 : t,\n            phi = acos(cosphi),\n            crtr = crt(r),\n            t1 = 2 * crtr;\n      x1 = t1 * cos(phi / 3) - a / 3;\n      x2 = t1 * cos((phi + tau) / 3) - a / 3;\n      x3 = t1 * cos((phi + 2 * tau) / 3) - a / 3;\n      return [x1, x2, x3].filter(reduce);\n    } else if (discriminant === 0) {\n      u1 = q2 < 0 ? crt(-q2) : -crt(q2);\n      x1 = 2 * u1 - a / 3;\n      x2 = -u1 - a / 3;\n      return [x1, x2].filter(reduce);\n    } else {\n      const sd = sqrt(discriminant);\n      u1 = crt(-q2 + sd);\n      v1 = crt(q2 + sd);\n      return [u1 - v1 - a / 3].filter(reduce);\n    }\n  },\n  droots: function (p) {\n    // quadratic roots are easy\n    if (p.length === 3) {\n      const a = p[0],\n            b = p[1],\n            c = p[2],\n            d = a - 2 * b + c;\n\n      if (d !== 0) {\n        const m1 = -sqrt(b * b - a * c),\n              m2 = -a + b,\n              v1 = -(m1 + m2) / d,\n              v2 = -(-m1 + m2) / d;\n        return [v1, v2];\n      } else if (b !== c && d === 0) {\n        return [(2 * b - c) / (2 * (b - c))];\n      }\n\n      return [];\n    } // linear roots are even easier\n\n\n    if (p.length === 2) {\n      const a = p[0],\n            b = p[1];\n\n      if (a !== b) {\n        return [a / (a - b)];\n      }\n\n      return [];\n    }\n\n    return [];\n  },\n  curvature: function (t, d1, d2, _3d, kOnly) {\n    let num,\n        dnm,\n        adk,\n        dk,\n        k = 0,\n        r = 0; //\n    // We're using the following formula for curvature:\n    //\n    //              x'y\" - y'x\"\n    //   k(t) = ------------------\n    //           (x'² + y'²)^(3/2)\n    //\n    // from https://en.wikipedia.org/wiki/Radius_of_curvature#Definition\n    //\n    // With it corresponding 3D counterpart:\n    //\n    //          sqrt( (y'z\" - y\"z')² + (z'x\" - z\"x')² + (x'y\" - x\"y')²)\n    //   k(t) = -------------------------------------------------------\n    //                     (x'² + y'² + z'²)^(3/2)\n    //\n\n    const d = utils.compute(t, d1);\n    const dd = utils.compute(t, d2);\n    const qdsum = d.x * d.x + d.y * d.y;\n\n    if (_3d) {\n      num = sqrt(pow(d.y * dd.z - dd.y * d.z, 2) + pow(d.z * dd.x - dd.z * d.x, 2) + pow(d.x * dd.y - dd.x * d.y, 2));\n      dnm = pow(qdsum + d.z * d.z, 3 / 2);\n    } else {\n      num = d.x * dd.y - d.y * dd.x;\n      dnm = pow(qdsum, 3 / 2);\n    }\n\n    if (num === 0 || dnm === 0) {\n      return {\n        k: 0,\n        r: 0\n      };\n    }\n\n    k = num / dnm;\n    r = dnm / num; // We're also computing the derivative of kappa, because\n    // there is value in knowing the rate of change for the\n    // curvature along the curve. And we're just going to\n    // ballpark it based on an epsilon.\n\n    if (!kOnly) {\n      // compute k'(t) based on the interval before, and after it,\n      // to at least try to not introduce forward/backward pass bias.\n      const pk = utils.curvature(t - 0.001, d1, d2, _3d, true).k;\n      const nk = utils.curvature(t + 0.001, d1, d2, _3d, true).k;\n      dk = (nk - k + (k - pk)) / 2;\n      adk = (abs(nk - k) + abs(k - pk)) / 2;\n    }\n\n    return {\n      k: k,\n      r: r,\n      dk: dk,\n      adk: adk\n    };\n  },\n  inflections: function (points) {\n    if (points.length < 4) return []; // FIXME: TODO: add in inflection abstraction for quartic+ curves?\n\n    const p = utils.align(points, {\n      p1: points[0],\n      p2: points.slice(-1)[0]\n    }),\n          a = p[2].x * p[1].y,\n          b = p[3].x * p[1].y,\n          c = p[1].x * p[2].y,\n          d = p[3].x * p[2].y,\n          v1 = 18 * (-3 * a + 2 * b + 3 * c - d),\n          v2 = 18 * (3 * a - b - 3 * c),\n          v3 = 18 * (c - a);\n\n    if (utils.approximately(v1, 0)) {\n      if (!utils.approximately(v2, 0)) {\n        let t = -v3 / v2;\n        if (0 <= t && t <= 1) return [t];\n      }\n\n      return [];\n    }\n\n    const trm = v2 * v2 - 4 * v1 * v3,\n          sq = Math.sqrt(trm),\n          d2 = 2 * v1;\n    if (utils.approximately(d2, 0)) return [];\n    return [(sq - v2) / d2, -(v2 + sq) / d2].filter(function (r) {\n      return 0 <= r && r <= 1;\n    });\n  },\n  bboxoverlap: function (b1, b2) {\n    const dims = [\"x\", \"y\"],\n          len = dims.length;\n\n    for (let i = 0, dim, l, t, d; i < len; i++) {\n      dim = dims[i];\n      l = b1[dim].mid;\n      t = b2[dim].mid;\n      d = (b1[dim].size + b2[dim].size) / 2;\n      if (abs(l - t) >= d) return false;\n    }\n\n    return true;\n  },\n  expandbox: function (bbox, _bbox) {\n    if (_bbox.x.min < bbox.x.min) {\n      bbox.x.min = _bbox.x.min;\n    }\n\n    if (_bbox.y.min < bbox.y.min) {\n      bbox.y.min = _bbox.y.min;\n    }\n\n    if (_bbox.z && _bbox.z.min < bbox.z.min) {\n      bbox.z.min = _bbox.z.min;\n    }\n\n    if (_bbox.x.max > bbox.x.max) {\n      bbox.x.max = _bbox.x.max;\n    }\n\n    if (_bbox.y.max > bbox.y.max) {\n      bbox.y.max = _bbox.y.max;\n    }\n\n    if (_bbox.z && _bbox.z.max > bbox.z.max) {\n      bbox.z.max = _bbox.z.max;\n    }\n\n    bbox.x.mid = (bbox.x.min + bbox.x.max) / 2;\n    bbox.y.mid = (bbox.y.min + bbox.y.max) / 2;\n\n    if (bbox.z) {\n      bbox.z.mid = (bbox.z.min + bbox.z.max) / 2;\n    }\n\n    bbox.x.size = bbox.x.max - bbox.x.min;\n    bbox.y.size = bbox.y.max - bbox.y.min;\n\n    if (bbox.z) {\n      bbox.z.size = bbox.z.max - bbox.z.min;\n    }\n  },\n  pairiteration: function (c1, c2, curveIntersectionThreshold) {\n    const c1b = c1.bbox(),\n          c2b = c2.bbox(),\n          r = 100000,\n          threshold = curveIntersectionThreshold || 0.5;\n\n    if (c1b.x.size + c1b.y.size < threshold && c2b.x.size + c2b.y.size < threshold) {\n      return [(r * (c1._t1 + c1._t2) / 2 | 0) / r + \"/\" + (r * (c2._t1 + c2._t2) / 2 | 0) / r];\n    }\n\n    let cc1 = c1.split(0.5),\n        cc2 = c2.split(0.5),\n        pairs = [{\n      left: cc1.left,\n      right: cc2.left\n    }, {\n      left: cc1.left,\n      right: cc2.right\n    }, {\n      left: cc1.right,\n      right: cc2.right\n    }, {\n      left: cc1.right,\n      right: cc2.left\n    }];\n    pairs = pairs.filter(function (pair) {\n      return utils.bboxoverlap(pair.left.bbox(), pair.right.bbox());\n    });\n    let results = [];\n    if (pairs.length === 0) return results;\n    pairs.forEach(function (pair) {\n      results = results.concat(utils.pairiteration(pair.left, pair.right, threshold));\n    });\n    results = results.filter(function (v, i) {\n      return results.indexOf(v) === i;\n    });\n    return results;\n  },\n  getccenter: function (p1, p2, p3) {\n    const dx1 = p2.x - p1.x,\n          dy1 = p2.y - p1.y,\n          dx2 = p3.x - p2.x,\n          dy2 = p3.y - p2.y,\n          dx1p = dx1 * cos(quart) - dy1 * sin(quart),\n          dy1p = dx1 * sin(quart) + dy1 * cos(quart),\n          dx2p = dx2 * cos(quart) - dy2 * sin(quart),\n          dy2p = dx2 * sin(quart) + dy2 * cos(quart),\n          // chord midpoints\n    mx1 = (p1.x + p2.x) / 2,\n          my1 = (p1.y + p2.y) / 2,\n          mx2 = (p2.x + p3.x) / 2,\n          my2 = (p2.y + p3.y) / 2,\n          // midpoint offsets\n    mx1n = mx1 + dx1p,\n          my1n = my1 + dy1p,\n          mx2n = mx2 + dx2p,\n          my2n = my2 + dy2p,\n          // intersection of these lines:\n    arc = utils.lli8(mx1, my1, mx1n, my1n, mx2, my2, mx2n, my2n),\n          r = utils.dist(arc, p1); // arc start/end values, over mid point:\n\n    let s = atan2(p1.y - arc.y, p1.x - arc.x),\n        m = atan2(p2.y - arc.y, p2.x - arc.x),\n        e = atan2(p3.y - arc.y, p3.x - arc.x),\n        _; // determine arc direction (cw/ccw correction)\n\n\n    if (s < e) {\n      // if s<m<e, arc(s, e)\n      // if m<s<e, arc(e, s + tau)\n      // if s<e<m, arc(e, s + tau)\n      if (s > m || m > e) {\n        s += tau;\n      }\n\n      if (s > e) {\n        _ = e;\n        e = s;\n        s = _;\n      }\n    } else {\n      // if e<m<s, arc(e, s)\n      // if m<e<s, arc(s, e + tau)\n      // if e<s<m, arc(s, e + tau)\n      if (e < m && m < s) {\n        _ = e;\n        e = s;\n        s = _;\n      } else {\n        e += tau;\n      }\n    } // assign and done.\n\n\n    arc.s = s;\n    arc.e = e;\n    arc.r = r;\n    return arc;\n  },\n  numberSort: function (a, b) {\n    return a - b;\n  }\n};\n/**\n * Poly Bezier\n * @param {[type]} curves [description]\n */\n\nclass PolyBezier {\n  constructor(curves) {\n    this.curves = [];\n    this._3d = false;\n\n    if (!!curves) {\n      this.curves = curves;\n      this._3d = this.curves[0]._3d;\n    }\n  }\n\n  valueOf() {\n    return this.toString();\n  }\n\n  toString() {\n    return \"[\" + this.curves.map(function (curve) {\n      return utils.pointsToString(curve.points);\n    }).join(\", \") + \"]\";\n  }\n\n  addCurve(curve) {\n    this.curves.push(curve);\n    this._3d = this._3d || curve._3d;\n  }\n\n  length() {\n    return this.curves.map(function (v) {\n      return v.length();\n    }).reduce(function (a, b) {\n      return a + b;\n    });\n  }\n\n  curve(idx) {\n    return this.curves[idx];\n  }\n\n  bbox() {\n    const c = this.curves;\n    var bbox = c[0].bbox();\n\n    for (var i = 1; i < c.length; i++) {\n      utils.expandbox(bbox, c[i].bbox());\n    }\n\n    return bbox;\n  }\n\n  offset(d) {\n    const offset = [];\n    this.curves.forEach(function (v) {\n      offset.push(...v.offset(d));\n    });\n    return new PolyBezier(offset);\n  }\n\n}\n/**\n  A javascript Bezier curve library by Pomax.\n\n  Based on http://pomax.github.io/bezierinfo\n\n  This code is MIT licensed.\n**/\n// math-inlining.\n\n\nconst {\n  abs: abs$1,\n  min,\n  max,\n  cos: cos$1,\n  sin: sin$1,\n  acos: acos$1,\n  sqrt: sqrt$1\n} = Math;\nconst pi$1 = Math.PI;\n/**\n * Bezier curve constructor.\n *\n * ...docs pending...\n */\n\nclass Bezier {\n  constructor(coords) {\n    let args = coords && coords.forEach ? coords : Array.from(arguments).slice();\n    let coordlen = false;\n\n    if (typeof args[0] === \"object\") {\n      coordlen = args.length;\n      const newargs = [];\n      args.forEach(function (point) {\n        [\"x\", \"y\", \"z\"].forEach(function (d) {\n          if (typeof point[d] !== \"undefined\") {\n            newargs.push(point[d]);\n          }\n        });\n      });\n      args = newargs;\n    }\n\n    let higher = false;\n    const len = args.length;\n\n    if (coordlen) {\n      if (coordlen > 4) {\n        if (arguments.length !== 1) {\n          throw new Error(\"Only new Bezier(point[]) is accepted for 4th and higher order curves\");\n        }\n\n        higher = true;\n      }\n    } else {\n      if (len !== 6 && len !== 8 && len !== 9 && len !== 12) {\n        if (arguments.length !== 1) {\n          throw new Error(\"Only new Bezier(point[]) is accepted for 4th and higher order curves\");\n        }\n      }\n    }\n\n    const _3d = this._3d = !higher && (len === 9 || len === 12) || coords && coords[0] && typeof coords[0].z !== \"undefined\";\n\n    const points = this.points = [];\n\n    for (let idx = 0, step = _3d ? 3 : 2; idx < len; idx += step) {\n      var point = {\n        x: args[idx],\n        y: args[idx + 1]\n      };\n\n      if (_3d) {\n        point.z = args[idx + 2];\n      }\n\n      points.push(point);\n    }\n\n    const order = this.order = points.length - 1;\n    const dims = this.dims = [\"x\", \"y\"];\n    if (_3d) dims.push(\"z\");\n    this.dimlen = dims.length; // is this curve, practically speaking, a straight line?\n\n    const aligned = utils.align(points, {\n      p1: points[0],\n      p2: points[order]\n    });\n    const baselength = utils.dist(points[0], points[order]);\n    this._linear = aligned.reduce((t, p) => t + abs$1(p.y), 0) < baselength / 50;\n    this._lut = [];\n    this._t1 = 0;\n    this._t2 = 1;\n    this.update();\n  }\n\n  static quadraticFromPoints(p1, p2, p3, t) {\n    if (typeof t === \"undefined\") {\n      t = 0.5;\n    } // shortcuts, although they're really dumb\n\n\n    if (t === 0) {\n      return new Bezier(p2, p2, p3);\n    }\n\n    if (t === 1) {\n      return new Bezier(p1, p2, p2);\n    } // real fitting.\n\n\n    const abc = Bezier.getABC(2, p1, p2, p3, t);\n    return new Bezier(p1, abc.A, p3);\n  }\n\n  static cubicFromPoints(S, B, E, t, d1) {\n    if (typeof t === \"undefined\") {\n      t = 0.5;\n    }\n\n    const abc = Bezier.getABC(3, S, B, E, t);\n\n    if (typeof d1 === \"undefined\") {\n      d1 = utils.dist(B, abc.C);\n    }\n\n    const d2 = d1 * (1 - t) / t;\n    const selen = utils.dist(S, E),\n          lx = (E.x - S.x) / selen,\n          ly = (E.y - S.y) / selen,\n          bx1 = d1 * lx,\n          by1 = d1 * ly,\n          bx2 = d2 * lx,\n          by2 = d2 * ly; // derivation of new hull coordinates\n\n    const e1 = {\n      x: B.x - bx1,\n      y: B.y - by1\n    },\n          e2 = {\n      x: B.x + bx2,\n      y: B.y + by2\n    },\n          A = abc.A,\n          v1 = {\n      x: A.x + (e1.x - A.x) / (1 - t),\n      y: A.y + (e1.y - A.y) / (1 - t)\n    },\n          v2 = {\n      x: A.x + (e2.x - A.x) / t,\n      y: A.y + (e2.y - A.y) / t\n    },\n          nc1 = {\n      x: S.x + (v1.x - S.x) / t,\n      y: S.y + (v1.y - S.y) / t\n    },\n          nc2 = {\n      x: E.x + (v2.x - E.x) / (1 - t),\n      y: E.y + (v2.y - E.y) / (1 - t)\n    }; // ...done\n\n    return new Bezier(S, nc1, nc2, E);\n  }\n\n  static getUtils() {\n    return utils;\n  }\n\n  getUtils() {\n    return Bezier.getUtils();\n  }\n\n  static get PolyBezier() {\n    return PolyBezier;\n  }\n\n  valueOf() {\n    return this.toString();\n  }\n\n  toString() {\n    return utils.pointsToString(this.points);\n  }\n\n  toSVG() {\n    if (this._3d) return false;\n    const p = this.points,\n          x = p[0].x,\n          y = p[0].y,\n          s = [\"M\", x, y, this.order === 2 ? \"Q\" : \"C\"];\n\n    for (let i = 1, last = p.length; i < last; i++) {\n      s.push(p[i].x);\n      s.push(p[i].y);\n    }\n\n    return s.join(\" \");\n  }\n\n  setRatios(ratios) {\n    if (ratios.length !== this.points.length) {\n      throw new Error(\"incorrect number of ratio values\");\n    }\n\n    this.ratios = ratios;\n    this._lut = []; //  invalidate any precomputed LUT\n  }\n\n  verify() {\n    const print = this.coordDigest();\n\n    if (print !== this._print) {\n      this._print = print;\n      this.update();\n    }\n  }\n\n  coordDigest() {\n    return this.points.map(function (c, pos) {\n      return \"\" + pos + c.x + c.y + (c.z ? c.z : 0);\n    }).join(\"\");\n  }\n\n  update() {\n    // invalidate any precomputed LUT\n    this._lut = [];\n    this.dpoints = utils.derive(this.points, this._3d);\n    this.computedirection();\n  }\n\n  computedirection() {\n    const points = this.points;\n    const angle = utils.angle(points[0], points[this.order], points[1]);\n    this.clockwise = angle > 0;\n  }\n\n  length() {\n    return utils.length(this.derivative.bind(this));\n  }\n\n  static getABC(order = 2, S, B, E, t = 0.5) {\n    const u = utils.projectionratio(t, order),\n          um = 1 - u,\n          C = {\n      x: u * S.x + um * E.x,\n      y: u * S.y + um * E.y\n    },\n          s = utils.abcratio(t, order),\n          A = {\n      x: B.x + (B.x - C.x) / s,\n      y: B.y + (B.y - C.y) / s\n    };\n    return {\n      A,\n      B,\n      C,\n      S,\n      E\n    };\n  }\n\n  getABC(t, B) {\n    B = B || this.get(t);\n    let S = this.points[0];\n    let E = this.points[this.order];\n    return Bezier.getABC(this.order, S, B, E, t);\n  }\n\n  getLUT(steps) {\n    this.verify();\n    steps = steps || 100;\n\n    if (this._lut.length === steps) {\n      return this._lut;\n    }\n\n    this._lut = []; // n steps means n+1 points\n\n    steps++;\n    this._lut = [];\n\n    for (let i = 0, p, t; i < steps; i++) {\n      t = i / (steps - 1);\n      p = this.compute(t);\n      p.t = t;\n\n      this._lut.push(p);\n    }\n\n    return this._lut;\n  }\n\n  on(point, error) {\n    error = error || 5;\n    const lut = this.getLUT(),\n          hits = [];\n\n    for (let i = 0, c, t = 0; i < lut.length; i++) {\n      c = lut[i];\n\n      if (utils.dist(c, point) < error) {\n        hits.push(c);\n        t += i / lut.length;\n      }\n    }\n\n    if (!hits.length) return false;\n    return t /= hits.length;\n  }\n\n  project(point) {\n    // step 1: coarse check\n    const LUT = this.getLUT(),\n          l = LUT.length - 1,\n          closest = utils.closest(LUT, point),\n          mpos = closest.mpos,\n          t1 = (mpos - 1) / l,\n          t2 = (mpos + 1) / l,\n          step = 0.1 / l; // step 2: fine check\n\n    let mdist = closest.mdist,\n        t = t1,\n        ft = t,\n        p;\n    mdist += 1;\n\n    for (let d; t < t2 + step; t += step) {\n      p = this.compute(t);\n      d = utils.dist(point, p);\n\n      if (d < mdist) {\n        mdist = d;\n        ft = t;\n      }\n    }\n\n    ft = ft < 0 ? 0 : ft > 1 ? 1 : ft;\n    p = this.compute(ft);\n    p.t = ft;\n    p.d = mdist;\n    return p;\n  }\n\n  get(t) {\n    return this.compute(t);\n  }\n\n  point(idx) {\n    return this.points[idx];\n  }\n\n  compute(t) {\n    if (this.ratios) {\n      return utils.computeWithRatios(t, this.points, this.ratios, this._3d);\n    }\n\n    return utils.compute(t, this.points, this._3d, this.ratios);\n  }\n\n  raise() {\n    const p = this.points,\n          np = [p[0]],\n          k = p.length;\n\n    for (let i = 1, pi, pim; i < k; i++) {\n      pi = p[i];\n      pim = p[i - 1];\n      np[i] = {\n        x: (k - i) / k * pi.x + i / k * pim.x,\n        y: (k - i) / k * pi.y + i / k * pim.y\n      };\n    }\n\n    np[k] = p[k - 1];\n    return new Bezier(np);\n  }\n\n  derivative(t) {\n    return utils.compute(t, this.dpoints[0], this._3d);\n  }\n\n  dderivative(t) {\n    return utils.compute(t, this.dpoints[1], this._3d);\n  }\n\n  align() {\n    let p = this.points;\n    return new Bezier(utils.align(p, {\n      p1: p[0],\n      p2: p[p.length - 1]\n    }));\n  }\n\n  curvature(t) {\n    return utils.curvature(t, this.dpoints[0], this.dpoints[1], this._3d);\n  }\n\n  inflections() {\n    return utils.inflections(this.points);\n  }\n\n  normal(t) {\n    return this._3d ? this.__normal3(t) : this.__normal2(t);\n  }\n\n  __normal2(t) {\n    const d = this.derivative(t);\n    const q = sqrt$1(d.x * d.x + d.y * d.y);\n    return {\n      x: -d.y / q,\n      y: d.x / q\n    };\n  }\n\n  __normal3(t) {\n    // see http://stackoverflow.com/questions/25453159\n    const r1 = this.derivative(t),\n          r2 = this.derivative(t + 0.01),\n          q1 = sqrt$1(r1.x * r1.x + r1.y * r1.y + r1.z * r1.z),\n          q2 = sqrt$1(r2.x * r2.x + r2.y * r2.y + r2.z * r2.z);\n    r1.x /= q1;\n    r1.y /= q1;\n    r1.z /= q1;\n    r2.x /= q2;\n    r2.y /= q2;\n    r2.z /= q2; // cross product\n\n    const c = {\n      x: r2.y * r1.z - r2.z * r1.y,\n      y: r2.z * r1.x - r2.x * r1.z,\n      z: r2.x * r1.y - r2.y * r1.x\n    };\n    const m = sqrt$1(c.x * c.x + c.y * c.y + c.z * c.z);\n    c.x /= m;\n    c.y /= m;\n    c.z /= m; // rotation matrix\n\n    const R = [c.x * c.x, c.x * c.y - c.z, c.x * c.z + c.y, c.x * c.y + c.z, c.y * c.y, c.y * c.z - c.x, c.x * c.z - c.y, c.y * c.z + c.x, c.z * c.z]; // normal vector:\n\n    const n = {\n      x: R[0] * r1.x + R[1] * r1.y + R[2] * r1.z,\n      y: R[3] * r1.x + R[4] * r1.y + R[5] * r1.z,\n      z: R[6] * r1.x + R[7] * r1.y + R[8] * r1.z\n    };\n    return n;\n  }\n\n  hull(t) {\n    let p = this.points,\n        _p = [],\n        q = [],\n        idx = 0;\n    q[idx++] = p[0];\n    q[idx++] = p[1];\n    q[idx++] = p[2];\n\n    if (this.order === 3) {\n      q[idx++] = p[3];\n    } // we lerp between all points at each iteration, until we have 1 point left.\n\n\n    while (p.length > 1) {\n      _p = [];\n\n      for (let i = 0, pt, l = p.length - 1; i < l; i++) {\n        pt = utils.lerp(t, p[i], p[i + 1]);\n        q[idx++] = pt;\n\n        _p.push(pt);\n      }\n\n      p = _p;\n    }\n\n    return q;\n  }\n\n  split(t1, t2) {\n    // shortcuts\n    if (t1 === 0 && !!t2) {\n      return this.split(t2).left;\n    }\n\n    if (t2 === 1) {\n      return this.split(t1).right;\n    } // no shortcut: use \"de Casteljau\" iteration.\n\n\n    const q = this.hull(t1);\n    const result = {\n      left: this.order === 2 ? new Bezier([q[0], q[3], q[5]]) : new Bezier([q[0], q[4], q[7], q[9]]),\n      right: this.order === 2 ? new Bezier([q[5], q[4], q[2]]) : new Bezier([q[9], q[8], q[6], q[3]]),\n      span: q\n    }; // make sure we bind _t1/_t2 information!\n\n    result.left._t1 = utils.map(0, 0, 1, this._t1, this._t2);\n    result.left._t2 = utils.map(t1, 0, 1, this._t1, this._t2);\n    result.right._t1 = utils.map(t1, 0, 1, this._t1, this._t2);\n    result.right._t2 = utils.map(1, 0, 1, this._t1, this._t2); // if we have no t2, we're done\n\n    if (!t2) {\n      return result;\n    } // if we have a t2, split again:\n\n\n    t2 = utils.map(t2, t1, 1, 0, 1);\n    return result.right.split(t2).left;\n  }\n\n  extrema() {\n    const result = {};\n    let roots = [];\n    this.dims.forEach(function (dim) {\n      let mfn = function (v) {\n        return v[dim];\n      };\n\n      let p = this.dpoints[0].map(mfn);\n      result[dim] = utils.droots(p);\n\n      if (this.order === 3) {\n        p = this.dpoints[1].map(mfn);\n        result[dim] = result[dim].concat(utils.droots(p));\n      }\n\n      result[dim] = result[dim].filter(function (t) {\n        return t >= 0 && t <= 1;\n      });\n      roots = roots.concat(result[dim].sort(utils.numberSort));\n    }.bind(this));\n    result.values = roots.sort(utils.numberSort).filter(function (v, idx) {\n      return roots.indexOf(v) === idx;\n    });\n    return result;\n  }\n\n  bbox() {\n    const extrema = this.extrema(),\n          result = {};\n    this.dims.forEach(function (d) {\n      result[d] = utils.getminmax(this, d, extrema[d]);\n    }.bind(this));\n    return result;\n  }\n\n  overlaps(curve) {\n    const lbbox = this.bbox(),\n          tbbox = curve.bbox();\n    return utils.bboxoverlap(lbbox, tbbox);\n  }\n\n  offset(t, d) {\n    if (typeof d !== \"undefined\") {\n      const c = this.get(t),\n            n = this.normal(t);\n      const ret = {\n        c: c,\n        n: n,\n        x: c.x + n.x * d,\n        y: c.y + n.y * d\n      };\n\n      if (this._3d) {\n        ret.z = c.z + n.z * d;\n      }\n\n      return ret;\n    }\n\n    if (this._linear) {\n      const nv = this.normal(0),\n            coords = this.points.map(function (p) {\n        const ret = {\n          x: p.x + t * nv.x,\n          y: p.y + t * nv.y\n        };\n\n        if (p.z && nv.z) {\n          ret.z = p.z + t * nv.z;\n        }\n\n        return ret;\n      });\n      return [new Bezier(coords)];\n    }\n\n    return this.reduce().map(function (s) {\n      if (s._linear) {\n        return s.offset(t)[0];\n      }\n\n      return s.scale(t);\n    });\n  }\n\n  simple() {\n    if (this.order === 3) {\n      const a1 = utils.angle(this.points[0], this.points[3], this.points[1]);\n      const a2 = utils.angle(this.points[0], this.points[3], this.points[2]);\n      if (a1 > 0 && a2 < 0 || a1 < 0 && a2 > 0) return false;\n    }\n\n    const n1 = this.normal(0);\n    const n2 = this.normal(1);\n    let s = n1.x * n2.x + n1.y * n2.y;\n\n    if (this._3d) {\n      s += n1.z * n2.z;\n    }\n\n    return abs$1(acos$1(s)) < pi$1 / 3;\n  }\n\n  reduce() {\n    // TODO: examine these var types in more detail...\n    let i,\n        t1 = 0,\n        t2 = 0,\n        step = 0.01,\n        segment,\n        pass1 = [],\n        pass2 = []; // first pass: split on extrema\n\n    let extrema = this.extrema().values;\n\n    if (extrema.indexOf(0) === -1) {\n      extrema = [0].concat(extrema);\n    }\n\n    if (extrema.indexOf(1) === -1) {\n      extrema.push(1);\n    }\n\n    for (t1 = extrema[0], i = 1; i < extrema.length; i++) {\n      t2 = extrema[i];\n      segment = this.split(t1, t2);\n      segment._t1 = t1;\n      segment._t2 = t2;\n      pass1.push(segment);\n      t1 = t2;\n    } // second pass: further reduce these segments to simple segments\n\n\n    pass1.forEach(function (p1) {\n      t1 = 0;\n      t2 = 0;\n\n      while (t2 <= 1) {\n        for (t2 = t1 + step; t2 <= 1 + step; t2 += step) {\n          segment = p1.split(t1, t2);\n\n          if (!segment.simple()) {\n            t2 -= step;\n\n            if (abs$1(t1 - t2) < step) {\n              // we can never form a reduction\n              return [];\n            }\n\n            segment = p1.split(t1, t2);\n            segment._t1 = utils.map(t1, 0, 1, p1._t1, p1._t2);\n            segment._t2 = utils.map(t2, 0, 1, p1._t1, p1._t2);\n            pass2.push(segment);\n            t1 = t2;\n            break;\n          }\n        }\n      }\n\n      if (t1 < 1) {\n        segment = p1.split(t1, 1);\n        segment._t1 = utils.map(t1, 0, 1, p1._t1, p1._t2);\n        segment._t2 = p1._t2;\n        pass2.push(segment);\n      }\n    });\n    return pass2;\n  }\n\n  translate(v, d1, d2) {\n    d2 = typeof d2 === \"number\" ? d2 : d1; // TODO: make this take curves with control points outside\n    //       of the start-end interval into account\n\n    const o = this.order;\n    let d = this.points.map((_, i) => (1 - i / o) * d1 + i / o * d2);\n    return new Bezier(this.points.map((p, i) => ({\n      x: p.x + v.x * d[i],\n      y: p.y + v.y * d[i]\n    })));\n  }\n\n  scale(d) {\n    const order = this.order;\n    let distanceFn = false;\n\n    if (typeof d === \"function\") {\n      distanceFn = d;\n    }\n\n    if (distanceFn && order === 2) {\n      return this.raise().scale(distanceFn);\n    } // TODO: add special handling for non-linear degenerate curves.\n\n\n    const clockwise = this.clockwise;\n    const points = this.points;\n\n    if (this._linear) {\n      return this.translate(this.normal(0), distanceFn ? distanceFn(0) : d, distanceFn ? distanceFn(1) : d);\n    }\n\n    const r1 = distanceFn ? distanceFn(0) : d;\n    const r2 = distanceFn ? distanceFn(1) : d;\n    const v = [this.offset(0, 10), this.offset(1, 10)];\n    const np = [];\n    const o = utils.lli4(v[0], v[0].c, v[1], v[1].c);\n\n    if (!o) {\n      throw new Error(\"cannot scale this curve. Try reducing it first.\");\n    } // move all points by distance 'd' wrt the origin 'o',\n    // and move end points by fixed distance along normal.\n\n\n    [0, 1].forEach(function (t) {\n      const p = np[t * order] = utils.copy(points[t * order]);\n      p.x += (t ? r2 : r1) * v[t].n.x;\n      p.y += (t ? r2 : r1) * v[t].n.y;\n    });\n\n    if (!distanceFn) {\n      // move control points to lie on the intersection of the offset\n      // derivative vector, and the origin-through-control vector\n      [0, 1].forEach(t => {\n        if (order === 2 && !!t) return;\n        const p = np[t * order];\n        const d = this.derivative(t);\n        const p2 = {\n          x: p.x + d.x,\n          y: p.y + d.y\n        };\n        np[t + 1] = utils.lli4(p, p2, o, points[t + 1]);\n      });\n      return new Bezier(np);\n    } // move control points by \"however much necessary to\n    // ensure the correct tangent to endpoint\".\n\n\n    [0, 1].forEach(function (t) {\n      if (order === 2 && !!t) return;\n      var p = points[t + 1];\n      var ov = {\n        x: p.x - o.x,\n        y: p.y - o.y\n      };\n      var rc = distanceFn ? distanceFn((t + 1) / order) : d;\n      if (distanceFn && !clockwise) rc = -rc;\n      var m = sqrt$1(ov.x * ov.x + ov.y * ov.y);\n      ov.x /= m;\n      ov.y /= m;\n      np[t + 1] = {\n        x: p.x + rc * ov.x,\n        y: p.y + rc * ov.y\n      };\n    });\n    return new Bezier(np);\n  }\n\n  outline(d1, d2, d3, d4) {\n    d2 = d2 === undefined ? d1 : d2;\n\n    if (this._linear) {\n      // TODO: find the actual extrema, because they might\n      //       be before the start, or past the end.\n      const n = this.normal(0);\n      const start = this.points[0];\n      const end = this.points[this.points.length - 1];\n      let s, mid, e;\n\n      if (d3 === undefined) {\n        d3 = d1;\n        d4 = d2;\n      }\n\n      s = {\n        x: start.x + n.x * d1,\n        y: start.y + n.y * d1\n      };\n      e = {\n        x: end.x + n.x * d3,\n        y: end.y + n.y * d3\n      };\n      mid = {\n        x: (s.x + e.x) / 2,\n        y: (s.y + e.y) / 2\n      };\n      const fline = [s, mid, e];\n      s = {\n        x: start.x - n.x * d2,\n        y: start.y - n.y * d2\n      };\n      e = {\n        x: end.x - n.x * d4,\n        y: end.y - n.y * d4\n      };\n      mid = {\n        x: (s.x + e.x) / 2,\n        y: (s.y + e.y) / 2\n      };\n      const bline = [e, mid, s];\n      const ls = utils.makeline(bline[2], fline[0]);\n      const le = utils.makeline(fline[2], bline[0]);\n      const segments = [ls, new Bezier(fline), le, new Bezier(bline)];\n      return new PolyBezier(segments);\n    }\n\n    const reduced = this.reduce(),\n          len = reduced.length,\n          fcurves = [];\n    let bcurves = [],\n        p,\n        alen = 0,\n        tlen = this.length();\n    const graduated = typeof d3 !== \"undefined\" && typeof d4 !== \"undefined\";\n\n    function linearDistanceFunction(s, e, tlen, alen, slen) {\n      return function (v) {\n        const f1 = alen / tlen,\n              f2 = (alen + slen) / tlen,\n              d = e - s;\n        return utils.map(v, 0, 1, s + f1 * d, s + f2 * d);\n      };\n    } // form curve oulines\n\n\n    reduced.forEach(function (segment) {\n      const slen = segment.length();\n\n      if (graduated) {\n        fcurves.push(segment.scale(linearDistanceFunction(d1, d3, tlen, alen, slen)));\n        bcurves.push(segment.scale(linearDistanceFunction(-d2, -d4, tlen, alen, slen)));\n      } else {\n        fcurves.push(segment.scale(d1));\n        bcurves.push(segment.scale(-d2));\n      }\n\n      alen += slen;\n    }); // reverse the \"return\" outline\n\n    bcurves = bcurves.map(function (s) {\n      p = s.points;\n\n      if (p[3]) {\n        s.points = [p[3], p[2], p[1], p[0]];\n      } else {\n        s.points = [p[2], p[1], p[0]];\n      }\n\n      return s;\n    }).reverse(); // form the endcaps as lines\n\n    const fs = fcurves[0].points[0],\n          fe = fcurves[len - 1].points[fcurves[len - 1].points.length - 1],\n          bs = bcurves[len - 1].points[bcurves[len - 1].points.length - 1],\n          be = bcurves[0].points[0],\n          ls = utils.makeline(bs, fs),\n          le = utils.makeline(fe, be),\n          segments = [ls].concat(fcurves).concat([le]).concat(bcurves);\n    return new PolyBezier(segments);\n  }\n\n  outlineshapes(d1, d2, curveIntersectionThreshold) {\n    d2 = d2 || d1;\n    const outline = this.outline(d1, d2).curves;\n    const shapes = [];\n\n    for (let i = 1, len = outline.length; i < len / 2; i++) {\n      const shape = utils.makeshape(outline[i], outline[len - i], curveIntersectionThreshold);\n      shape.startcap.virtual = i > 1;\n      shape.endcap.virtual = i < len / 2 - 1;\n      shapes.push(shape);\n    }\n\n    return shapes;\n  }\n\n  intersects(curve, curveIntersectionThreshold) {\n    if (!curve) return this.selfintersects(curveIntersectionThreshold);\n\n    if (curve.p1 && curve.p2) {\n      return this.lineIntersects(curve);\n    }\n\n    if (curve instanceof Bezier) {\n      curve = curve.reduce();\n    }\n\n    return this.curveintersects(this.reduce(), curve, curveIntersectionThreshold);\n  }\n\n  lineIntersects(line) {\n    const mx = min(line.p1.x, line.p2.x),\n          my = min(line.p1.y, line.p2.y),\n          MX = max(line.p1.x, line.p2.x),\n          MY = max(line.p1.y, line.p2.y);\n    return utils.roots(this.points, line).filter(t => {\n      var p = this.get(t);\n      return utils.between(p.x, mx, MX) && utils.between(p.y, my, MY);\n    });\n  }\n\n  selfintersects(curveIntersectionThreshold) {\n    // \"simple\" curves cannot intersect with their direct\n    // neighbour, so for each segment X we check whether\n    // it intersects [0:x-2][x+2:last].\n    const reduced = this.reduce(),\n          len = reduced.length - 2,\n          results = [];\n\n    for (let i = 0, result, left, right; i < len; i++) {\n      left = reduced.slice(i, i + 1);\n      right = reduced.slice(i + 2);\n      result = this.curveintersects(left, right, curveIntersectionThreshold);\n      results.push(...result);\n    }\n\n    return results;\n  }\n\n  curveintersects(c1, c2, curveIntersectionThreshold) {\n    const pairs = []; // step 1: pair off any overlapping segments\n\n    c1.forEach(function (l) {\n      c2.forEach(function (r) {\n        if (l.overlaps(r)) {\n          pairs.push({\n            left: l,\n            right: r\n          });\n        }\n      });\n    }); // step 2: for each pairing, run through the convergence algorithm.\n\n    let intersections = [];\n    pairs.forEach(function (pair) {\n      const result = utils.pairiteration(pair.left, pair.right, curveIntersectionThreshold);\n\n      if (result.length > 0) {\n        intersections = intersections.concat(result);\n      }\n    });\n    return intersections;\n  }\n\n  arcs(errorThreshold) {\n    errorThreshold = errorThreshold || 0.5;\n    return this._iterate(errorThreshold, []);\n  }\n\n  _error(pc, np1, s, e) {\n    const q = (e - s) / 4,\n          c1 = this.get(s + q),\n          c2 = this.get(e - q),\n          ref = utils.dist(pc, np1),\n          d1 = utils.dist(pc, c1),\n          d2 = utils.dist(pc, c2);\n    return abs$1(d1 - ref) + abs$1(d2 - ref);\n  }\n\n  _iterate(errorThreshold, circles) {\n    let t_s = 0,\n        t_e = 1,\n        safety; // we do a binary search to find the \"good `t` closest to no-longer-good\"\n\n    do {\n      safety = 0; // step 1: start with the maximum possible arc\n\n      t_e = 1; // points:\n\n      let np1 = this.get(t_s),\n          np2,\n          np3,\n          arc,\n          prev_arc; // booleans:\n\n      let curr_good = false,\n          prev_good = false,\n          done; // numbers:\n\n      let t_m = t_e,\n          prev_e = 1; // step 2: find the best possible arc\n\n      do {\n        prev_good = curr_good;\n        prev_arc = arc;\n        t_m = (t_s + t_e) / 2;\n        np2 = this.get(t_m);\n        np3 = this.get(t_e);\n        arc = utils.getccenter(np1, np2, np3); //also save the t values\n\n        arc.interval = {\n          start: t_s,\n          end: t_e\n        };\n\n        let error = this._error(arc, np1, t_s, t_e);\n\n        curr_good = error <= errorThreshold;\n        done = prev_good && !curr_good;\n        if (!done) prev_e = t_e; // this arc is fine: we can move 'e' up to see if we can find a wider arc\n\n        if (curr_good) {\n          // if e is already at max, then we're done for this arc.\n          if (t_e >= 1) {\n            // make sure we cap at t=1\n            arc.interval.end = prev_e = 1;\n            prev_arc = arc; // if we capped the arc segment to t=1 we also need to make sure that\n            // the arc's end angle is correct with respect to the bezier end point.\n\n            if (t_e > 1) {\n              let d = {\n                x: arc.x + arc.r * cos$1(arc.e),\n                y: arc.y + arc.r * sin$1(arc.e)\n              };\n              arc.e += utils.angle({\n                x: arc.x,\n                y: arc.y\n              }, d, this.get(1));\n            }\n\n            break;\n          } // if not, move it up by half the iteration distance\n\n\n          t_e = t_e + (t_e - t_s) / 2;\n        } else {\n          // this is a bad arc: we need to move 'e' down to find a good arc\n          t_e = t_m;\n        }\n      } while (!done && safety++ < 100);\n\n      if (safety >= 100) {\n        break;\n      } // console.log(\"L835: [F] arc found\", t_s, prev_e, prev_arc.x, prev_arc.y, prev_arc.s, prev_arc.e);\n\n\n      prev_arc = prev_arc ? prev_arc : arc;\n      circles.push(prev_arc);\n      t_s = prev_e;\n    } while (t_e < 1);\n\n    return circles;\n  }\n\n}\n\nexports.Bezier = Bezier;\n","// Module\nvar code = \"<div class=\\\"ease-gui mode-select\\\">\\n    <div class=\\\"header\\\">\\n        <div class=\\\"property-name\\\"></div>\\n        <div class=\\\"c\\\">\\n            <div class=\\\"ease-selector\\\">\\n                <div class=\\\"corner-curve-container\\\">\\n                    <div class=\\\"ratio-box\\\">\\n                        <div class=\\\"ratio-box-inner\\\">\\n                            <canvas class=\\\"corner-curve\\\"></canvas>\\n                        </div>\\n                    </div>\\n                </div>\\n\\n                <div class=\\\"template-selector\\\">\\n                    <div class=\\\"curve-selector-container\\\">\\n                        <select class=\\\"curve-selector\\\" dir=\\\"rtl\\\"></select>\\n                    </div>\\n                    <div class=\\\"orientation-selector-container\\\">\\n                        <select class=\\\"orientation-selector\\\"></select>\\n                    </div>\\n                    <div class=\\\"edit-button-container\\\">\\n                        <svg class=\\\"edit-button\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" height=\\\"18px\\\" viewBox=\\\"0 0 24 24\\\" width=\\\"18px\\\" fill=\\\"#606060\\\"><path d=\\\"M0 0h24v24H0z\\\" fill=\\\"none\\\"/><path d=\\\"M19.5 9.5c-1.03 0-1.9.62-2.29 1.5h-2.92c-.39-.88-1.26-1.5-2.29-1.5s-1.9.62-2.29 1.5H6.79c-.39-.88-1.26-1.5-2.29-1.5C3.12 9.5 2 10.62 2 12s1.12 2.5 2.5 2.5c1.03 0 1.9-.62 2.29-1.5h2.92c.39.88 1.26 1.5 2.29 1.5s1.9-.62 2.29-1.5h2.92c.39.88 1.26 1.5 2.29 1.5 1.38 0 2.5-1.12 2.5-2.5s-1.12-2.5-2.5-2.5z\\\"/></svg>\\n                    </div>\\n                </div>\\n            </div>\\n        </div>\\n    </div>\\n    <div class=\\\"properties-container\\\">\\n        <!-- procedurally injected elements -->\\n    </div>\\n    <div class=\\\"editor-container\\\">\\n        <div class=\\\"ratio-box\\\">\\n            <div class=\\\"ratio-box-inner\\\">\\n                <canvas class=\\\"editor\\\"></canvas>\\n            </div>\\n        </div>\\n        <div class=\\\"path-selector-container\\\">\\n            <input type=\\\"text\\\" class=\\\"path-selector\\\" onclick=\\\"this.select();\\\" value=\\\"M0,0 C20, 23,123\\\" />\\n            <div class=\\\"copy-button-container\\\">\\n                <svg class=\\\"copy-button\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" height=\\\"18px\\\" viewBox=\\\"0 0 24 24\\\" width=\\\"18px\\\" fill=\\\"#606060\\\"><path d=\\\"M0 0h24v24H0V0z\\\" fill=\\\"none\\\"/><path d=\\\"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z\\\"/></svg>\\n            </div>\\n        </div>\\n        <div class=\\\"editor-buttons\\\">\\n            <div class=\\\"decline-button\\\">\\n                <div class=\\\"icon-container\\\">\\n                    <svg class=\\\"icon\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" height=\\\"24px\\\" viewBox=\\\"0 0 24 24\\\" width=\\\"24px\\\" fill=\\\"#c93333\\\"><path d=\\\"M0 0h24v24H0V0z\\\" fill=\\\"none\\\"/><path d=\\\"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z\\\"/></svg>\\n                </div>\\n                <div class=\\\"label-container\\\">\\n                    <div class=\\\"label\\\">DISCARD</div>\\n                </div>\\n            </div>\\n            <div class=\\\"accept-button\\\">\\n                <div class=\\\"label-container\\\">\\n                    <div class=\\\"label\\\">ACCEPT</div>\\n                </div>\\n                <div class=\\\"icon-container\\\">\\n                    <svg class=\\\"icon\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" height=\\\"24px\\\" viewBox=\\\"0 0 24 24\\\" width=\\\"24px\\\" fill=\\\"#84be18\\\"><path d=\\\"M0 0h24v24H0V0z\\\" fill=\\\"none\\\"/><path d=\\\"M9 16.2l-3.5-3.5c-.39-.39-1.01-.39-1.4 0-.39.39-.39 1.01 0 1.4l4.19 4.19c.39.39 1.02.39 1.41 0L20.3 7.7c.39-.39.39-1.01 0-1.4-.39-.39-1.01-.39-1.4 0L9 16.2z\\\"/></svg>\\n                </div>\\n            </div>\\n        </div>\\n    </div>\\n    <div>\\n        \\n    </div>\\n</div>\";\n// Exports\nexport default code;","// Module\nvar code = \"<li class=\\\"cr\\\">\\n    <div>\\n        <span class=\\\"property-name\\\"><!-- procedurally injected name --></span>\\n        <div class=\\\"c\\\"><!-- procedurally injected control --></div>\\n    </div>\\n</li>\";\n// Exports\nexport default code;","// extracted by mini-css-extract-plugin\nexport {};","module.exports = __WEBPACK_EXTERNAL_MODULE_dat_gui__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(\"./src/index.js\");\n"],"sourceRoot":""}