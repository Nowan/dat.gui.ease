{"version":3,"sources":["webpack://datGuiEase/webpack/universalModuleDefinition","webpack://datGuiEase/./src/EaseManager.js","webpack://datGuiEase/./src/gui/addEaseGUI.js","webpack://datGuiEase/./src/gui/controller/GUIController.js","webpack://datGuiEase/./src/gui/controller/interpret.js","webpack://datGuiEase/./src/gui/model/GUIModel.js","webpack://datGuiEase/./src/gui/model/ease/Ease.js","webpack://datGuiEase/./src/gui/model/ease/composites/Anchor.js","webpack://datGuiEase/./src/gui/model/ease/composites/Handle.js","webpack://datGuiEase/./src/gui/model/ease/composites/Point.js","webpack://datGuiEase/./src/gui/model/preset/EasePreset.js","webpack://datGuiEase/./src/gui/model/preset/enum/Curve.js","webpack://datGuiEase/./src/gui/model/preset/enum/Orientation.js","webpack://datGuiEase/./src/gui/model/preset/presets.js","webpack://datGuiEase/./src/gui/view/GUIView.js","webpack://datGuiEase/./src/gui/view/GUIViewEvent.js","webpack://datGuiEase/./src/gui/view/HTMLElementDirector.js","webpack://datGuiEase/./src/gui/view/dom/directors/CurveSelectorDirector.js","webpack://datGuiEase/./src/gui/view/dom/directors/EaseEditorDirector.js","webpack://datGuiEase/./src/gui/view/dom/directors/EasePanelBackgroundDirector.js","webpack://datGuiEase/./src/gui/view/dom/directors/EasePanelDirector.js","webpack://datGuiEase/./src/gui/view/dom/directors/OrientationSelectorDirector.js","webpack://datGuiEase/./src/gui/view/dom/selectors.js","webpack://datGuiEase/./src/gui/view/editor/EaseEditor.js","webpack://datGuiEase/./src/gui/view/editor/events/EditorCurveChangeEvent.js","webpack://datGuiEase/./src/gui/view/editor/events/index.js","webpack://datGuiEase/./src/gui/view/editor/lib/curvesjs/BezierPoint.js","webpack://datGuiEase/./src/gui/view/editor/lib/curvesjs/Curve.js","webpack://datGuiEase/./src/gui/view/editor/lib/curvesjs/Point.js","webpack://datGuiEase/./src/middleware/CastEntry.js","webpack://datGuiEase/./src/middleware/CastMap.js","webpack://datGuiEase/./src/middleware/Middleware.js","webpack://datGuiEase/./src/gui/view/dom/gui.html","webpack://datGuiEase/./src/index.scss","webpack://datGuiEase/external {\"commonjs\":\"dat.gui\",\"commonjs2\":\"dat.gui\",\"amd\":\"dat.gui\",\"root\":\"dat\"}","webpack://datGuiEase/webpack/bootstrap","webpack://datGuiEase/webpack/runtime/compat get default export","webpack://datGuiEase/webpack/runtime/define property getters","webpack://datGuiEase/webpack/runtime/hasOwnProperty shorthand","webpack://datGuiEase/webpack/runtime/make namespace object","webpack://datGuiEase/./src/index.js"],"names":["EaseManager","_middlewares","ease","some","middleware","isFormatSupported","find","toString","Middleware","push","console","warn","dom","dat","addEaseGUI","object","property","controller","GUIController","_recallSavedValue","li","_addRow","addClass","appendChild","domElement","_augmentController","__controllers","DEFAULT_PRESET_NAME","gui","root","getRoot","matchedIndex","__rememberedObjects","indexOf","controllerMap","__rememberedObjectIndecesToControllers","undefined","load","remembered","presetMap","preset","value","initialValue","setValue","document","createElement","__ul","onResize","__li","__gui","name","querySelector","innerHTML","listen","remove","setValueOverride","call","arguments","__preset_select","isModified","_markPresetModified","modified","opt","selectedIndex","rawEase","_middleware","_model","GUIModel","_view","GUIView","curves","activePreset","setOrientations","getCurveOrientations","curve","setPreset","isEditingSupported","showEditButton","on","GUIViewEvent","_onCurvePresetSelected","bind","_onOrientationPresetSelected","_onEditEaseClicked","_onEaseModified","_onAcceptEaseEditClicked","_onDiscardEaseEditClicked","_ease","easeString","interpret","_applyValue","nextCurve","currentOrientation","orientation","nextOrientations","nextOrientation","includes","nextPreset","getMatchingPreset","preEditPreset","clone","openEditor","modifiedEase","matchingPreset","getPresetMatchingEase","EasePreset","closeEditor","__onChange","__onFinishChange","_updateElements","updateDisplay","presetsMap","_createPresetsMap","presets","Ease","Object","values","_presets","_extractPresets","_curves","_extractCurves","_orientationsMap","_extractOrientationsPerCurveMap","_activePreset","_preEditPreset","get","equals","castEntries","map","entry","internal","reduce","orientationsMap","Map","curveMatchingPresets","filter","orientations","set","anchors","_anchors","length","x","y","anchor","Anchor","toSVGPath","svgPath","match","splice","Number","parseFloat","startX","startY","cCoords","replace","split","handle","i","a","lastAnchor","slice","path","firstAnchor","startAnchor","endAnchor","Handle","Point","easeOrSvgPath","CURVE","UNDEFINED","ORIENTATION","NONE","of","Curve","Orientation","freeze","LINEAR","SINE","QUAD","CUBIC","QUART","QUINT","EXPO","CIRC","BACK","ELASTIC","BOUNCE","CUSTOM","IN","OUT","IN_OUT","_renderTemplate","domTemplate","_easePanelDirector","EasePanelDirector","_element","_easeEditorDirector","args","emit","_isEditorOpen","initialEase","classList","add","EaseEditorDirector","cleanUp","HTMLElementDirector","template","DOMParser","parseFromString","body","firstChild","CURVE_PRESET_SELECTED","ORIENTATION_PRESET_SELECTED","EDIT_EASE_CLICKED","EASE_MODIFIED","ACCEPT_EASE_EDIT_CLICKED","DISCARD_EASE_EDIT_CLICKED","htmlElement","eventKey","callback","addEventListener","event","detail","dispatchEvent","CustomEvent","CurveSelectorDirector","rootDomElement","curveSelector","_composeOptions","option","options","onchange","Option","_createCustomCurveOption","customCurveOption","setAttribute","editorCanvas","_editor","EaseEditor","EditorCurveChangeEvent","_svgPathInspector","_initSvgPathInspector","_copyButton","_initCopyButton","_acceptButton","_initAcceptButton","_discardButton","_initDiscardButton","canvas","canvasClone","cloneNode","parentNode","replaceChild","inspectorElement","editorSvgPathInspector","oninput","e","svgPathInspectorElement","buttonElement","editorSvgPathCopyButton","onclick","select","execCommand","info","editorAcceptButton","editorDeclineButton","EasePanelBackgroundDirector","_cornerCurveCanvas","cornerCurveCanvas","width","height","_cornerCurveCanvasContext","getContext","ctx","strokeStyle","fillStyle","lineWidth","clearRect","beginPath","moveTo","bezierCurveTo","lineTo","stroke","fill","easePanel","_curveSelector","_orientationSelector","OrientationSelectorDirector","_background","_editButtonElement","editButton","style","display","refresh","orientationSelector","removeAttribute","_canvas","_ctx","_prepareContext","_curve","_createCurveJSInstance","_propagateEvents","cw","ch","points","startPoint","addAnchor","_fromCanvasX","position","_fromCanvasY","cp2","endPoint","cp1","pointColor","pointSize","cpDist","firstPoint","BezierPoint","_toCanvasX","_toCanvasY","precedingCurveEndAnchor","followingCurveStartAnchor","point","lastPoint","draw","clientWidth","clientHeight","CurveJS","setPointStyle","setLineStyle","_round","coord","numberOfFloatDigits","power","Math","pow","round","KEY","context","color","size","r","collapsed","v1x","v1y","v2x","v2y","interval","lineColor","mouseX","mouseY","events","canvasEvents","createLUT","frame","tolerance","iMin","iMax","key","xTarget","xCurrent","lookupX","abs","lookupY","p1","p2","pct","t","func","dist","dragReady","dragCP","draging","_this","evt","bbox","getBoundingClientRect","clientX","left","clientY","top","p","sqrt","cursor","keys","deltaW","deltaH","posX","floor","posY","move","temp","ondrag","onmousemove","preventDefault","addPoint","onnewpoint","offsetX","offsetY","collapse","ontogglecontrol","onremovepoint","sort","b","pP","window","keyCode","arc","PI","closePath","CastEntry","thirdPartyEasePreset","nativeEasePreset","external","cast","to","CastMap","entries","_entries","externalEase","internalEase","_castMap","externalPreset","hasExternal","externalToInternal","internalToExternal","CLASS_NAME","easeManager","addEase","supports","getCompatibleMiddleware","extend","GUI","prototype","addOverride"],"mappings":"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AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC7LA;AACA;AACA;AACA;AACA;;IAEMtG,O;;;;;AACF,mBAAYC,MAAZ,EAAoB;AAAA;;AAAA;;AAChB,8BAAMyH,eAAe,CAACC,kDAAD,CAArB;AAEA,UAAKC,kBAAL,GAA0B,IAAIC,qEAAJ,CAAsB,MAAKC,QAA3B,EAAqC7H,MAArC,CAA1B;AACA,UAAK8H,mBAAL,GAA2B,IAA3B;;AAEA,UAAKH,kBAAL,CAAwBnH,EAAxB,CAA2BC,wEAA3B,EAA+D;AAAA;;AAAA,wCAAIsH,IAAJ;AAAIA,YAAJ;AAAA;;AAAA,aAAa,iBAAKC,IAAL,gBAAUvH,wEAAV,SAAiDsH,IAAjD,EAAb;AAAA,KAA/D;;AACA,UAAKJ,kBAAL,CAAwBnH,EAAxB,CAA2BC,8EAA3B,EAAqE;AAAA;;AAAA,yCAAIsH,IAAJ;AAAIA,YAAJ;A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","file":"dat.gui.ease.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"dat.gui\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"dat.gui\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"datGuiEase\"] = factory(require(\"dat.gui\"));\n\telse\n\t\troot[\"datGuiEase\"] = factory(root[\"dat\"]);\n})(self, function(__WEBPACK_EXTERNAL_MODULE_dat_gui__) {\nreturn ","import Middleware from \"./middleware/Middleware\";\n\nexport default class EaseManager {\n    constructor() {\n        this._middlewares = [];\n    }\n\n    /**\n     * Checks whether a compatible middleware for ease was provided\n     * @param {Ease} ease - Ease instance of animation library of your choice\n     * @return {boolean}\n     */\n    supports(ease) {\n        return this._middlewares.some(middleware => middleware.isFormatSupported(ease));\n    }\n\n    /**\n     * Returns a compatible middleware for ease\n     * @param {Ease} ease - Ease instance of animation library of your choice\n     * @return {Middleware | null}\n     */\n    getCompatibleMiddleware(ease) {\n        return this._middlewares.find(middleware => middleware.isFormatSupported(ease)) || null;\n    }\n\n     /**\n     * Register middleware to handle Ease objects of animation library of your choice\n     * @param {Middleware} middleware - Middleware instance\n     * @return {this} self reference for chaining.\n     */\n    use(middleware) {\n        // TODO: fix transpilation problem to use \"instanceof\" here\n        if (middleware.toString() === `[object ${Middleware.CLASS_NAME}]`) {\n            this._middlewares.push(middleware);\n        }\n        else {\n            console.warn(\"Middleware instance expected\");\n        }\n    }\n}","import * as dat from \"dat.gui\";\nimport GUIController from \"./controller/GUIController\";\nconst dom = dat.dom.dom;\n\nexport default function addEaseGUI(object, property, middleware) {\n    const controller = new GUIController(object, property, middleware);\n\n    // Partial copy of add() method\n    // https://github.com/dataarts/dat.gui/blob/40f4fc193e25ee51e7e57dfbbfc3118b3927169f/src/dat/gui/GUI.js#L1152\n    _recallSavedValue(this, controller);\n\n    const li = _addRow(this);\n    dom.addClass(li, \"cr\");\n    dom.addClass(li, 'ease');\n    li.appendChild(controller.domElement);\n\n    _augmentController(this, li, controller);\n\n    this.__controllers.push(controller);\n\n    return controller;\n}\n\n\nconst DEFAULT_PRESET_NAME = 'Default';\n// Copy of recallSavedValue() method\n// https://github.com/dataarts/dat.gui/blob/40f4fc193e25ee51e7e57dfbbfc3118b3927169f/src/dat/gui/GUI.js#L1080\nfunction _recallSavedValue(gui, controller) {\n    const root = gui.getRoot();\n    const matchedIndex = root.__rememberedObjects.indexOf(controller.object);\n\n    if (matchedIndex !== -1) {\n        let controllerMap = root.__rememberedObjectIndecesToControllers[matchedIndex];\n\n        if (controllerMap === undefined) {\n            controllerMap = {};\n            root.__rememberedObjectIndecesToControllers[matchedIndex] = controllerMap;\n        }\n\n        controllerMap[controller.property] = controller;\n\n        if (root.load && root.load.remembered) {\n            const presetMap = root.load.remembered;\n\n            let preset;\n\n            if (presetMap[gui.preset]) {\n                preset = presetMap[gui.preset];\n            } else if (presetMap[DEFAULT_PRESET_NAME]) {\n                preset = presetMap[DEFAULT_PRESET_NAME];\n            } else {\n                return;\n            }\n\n            if (preset[matchedIndex] && preset[matchedIndex][controller.property] !== undefined) {\n                const value = preset[matchedIndex][controller.property];\n\n                controller.initialValue = value;\n                controller.setValue(value);\n            }\n        }\n    }\n}\n\n// Partial copy of addRow() method\n// https://github.com/dataarts/dat.gui/blob/40f4fc193e25ee51e7e57dfbbfc3118b3927169f/src/dat/gui/GUI.js#L889\nfunction _addRow(gui) {\n    const li = document.createElement('li');\n    gui.__ul.appendChild(li);\n    gui.onResize();\n    return li;\n}\n\n// Partial copy of augmentController() method\n// https://github.com/dataarts/dat.gui/blob/40f4fc193e25ee51e7e57dfbbfc3118b3927169f/src/dat/gui/GUI.js#L922\nfunction _augmentController(gui, li, controller) {\n    controller.__li = li;\n    controller.__gui = this;\n\n    controller.name = function (name) {\n        this.__li.querySelector(\".property-name\").innerHTML = name;\n        return this;\n    };\n\n    controller.listen = function () {\n        this.__gui.listen(this);\n        return this;\n    };\n\n    controller.remove = function () {\n        this.__gui.remove(this);\n        return this;\n    };\n\n    const setValue = controller.setValue;\n    controller.setValue = function setValueOverride(value) {\n        setValue.call(controller, ...arguments);\n        if (gui.getRoot().__preset_select && controller.isModified()) {\n            _markPresetModified(gui.getRoot(), true);\n        }\n        return value;\n    }\n}\n\n// Copy of markPresetModified() method\n// https://github.com/dataarts/dat.gui/blob/40f4fc193e25ee51e7e57dfbbfc3118b3927169f/src/dat/gui/GUI.js#L912\nfunction _markPresetModified(gui, modified) {\n    const opt = gui.__preset_select[gui.__preset_select.selectedIndex];\n  \n    if (modified) {\n      opt.innerHTML = opt.value + '*';\n    } else {\n      opt.innerHTML = opt.value;\n    }\n}","import * as dat from \"dat.gui\";\nimport Ease from '../model/ease/Ease';\nimport EasePreset from \"../model/preset/EasePreset\";\nimport interpret from \"./interpret\";\nimport GUIView, { GUIViewEvent } from \"../view/GUIView\";\nimport GUIModel from \"../model/GUIModel\";\n\nexport default class GUIController extends dat.controllers.Controller {\n    constructor(object, property, middleware) {\n        super(...arguments);\n        \n        const rawEase = object[property];\n        const preset = middleware.import(rawEase);\n\n        this._middleware = middleware;\n        this._model = new GUIModel(middleware);\n        this._view = new GUIView(this._model.curves);\n\n        this._model.activePreset = preset;\n\n        this._view.setOrientations(this._model.getCurveOrientations(preset.curve));\n        this._view.setPreset(preset);\n        \n        if (this._middleware.isEditingSupported()) {\n            this._view.showEditButton();\n        }\n\n        this._view.on(GUIViewEvent.CURVE_PRESET_SELECTED, this._onCurvePresetSelected.bind(this));\n        this._view.on(GUIViewEvent.ORIENTATION_PRESET_SELECTED, this._onOrientationPresetSelected.bind(this));\n        this._view.on(GUIViewEvent.EDIT_EASE_CLICKED, this._onEditEaseClicked.bind(this));\n        this._view.on(GUIViewEvent.EASE_MODIFIED, this._onEaseModified.bind(this));\n        this._view.on(GUIViewEvent.ACCEPT_EASE_EDIT_CLICKED, this._onAcceptEaseEditClicked.bind(this));\n        this._view.on(GUIViewEvent.DISCARD_EASE_EDIT_CLICKED, this._onDiscardEaseEditClicked.bind(this));\n\n        this.domElement = this._view.domElement;\n    }\n\n    getValue() {\n        return this._ease.toString();\n    }\n\n    // Use primitive type here to support serialization for `dat.GUI.prototype.getSaveObject()`\n    setValue(easeString) {\n        this._ease = interpret(easeString);\n        this._applyValue(this._ease);\n    }\n\n    isModified() {\n        return this.initialValue.toString() !== this._ease.toString();\n    }\n\n    _onCurvePresetSelected(nextCurve) {\n        const { orientation: currentOrientation } = this._model.activePreset;\n        const nextOrientations = this._model.getCurveOrientations(nextCurve);\n        const nextOrientation = nextOrientations.includes(currentOrientation) ? currentOrientation : nextOrientations[0];\n        const nextPreset = this._model.getMatchingPreset(nextCurve, nextOrientation);\n\n        this._model.activePreset = nextPreset;\n\n        this._view.setOrientations(nextOrientations);\n        this._view.setPreset(nextPreset);\n    }\n\n    _onOrientationPresetSelected(nextOrientation) {\n        const nextPreset = this._model.getMatchingPreset(this._model.activePreset.curve, nextOrientation);\n\n        this._model.activePreset = nextPreset;\n        this._view.setPreset(nextPreset);\n    }\n\n    _onEditEaseClicked() {\n        this._model.preEditPreset = this._model.activePreset.clone();\n\n        this._view.openEditor(this._model.activePreset.ease);\n    }\n\n    _onEaseModified(modifiedEase) {\n        const matchingPreset = this._model.getPresetMatchingEase(modifiedEase);\n\n        if (matchingPreset) {\n            this._model.activePreset = matchingPreset;\n        }\n        else {\n            this._model.activePreset = new EasePreset(modifiedEase, EasePreset.CURVE.CUSTOM, EasePreset.ORIENTATION.NONE);\n        }\n\n        this._view.setPreset(this._model.activePreset);\n    }\n\n    _onAcceptEaseEditClicked() {\n        this._view.closeEditor();\n        this._view.setPreset(this._model.activePreset);\n    }\n\n    _onDiscardEaseEditClicked() {\n        this._model.activePreset = this._model.preEditPreset;\n        this._view.closeEditor();\n        this._view.setPreset(this._model.activePreset);\n    }\n\n    _applyValue(ease) {\n        this.object[this.property] = this._middleware.export(ease);\n        if (this.__onChange) {\n            this.__onChange.call(this, ease);\n        }\n        if (this.__onFinishChange) {\n            this.__onFinishChange.call(this, ease);\n        }\n        this._updateElements(ease);\n        this.updateDisplay();\n    }\n};","import * as presets from \"../model/preset/presets\";\nimport Ease from \"../model/ease/Ease\";\n\nconst presetsMap = _createPresetsMap(presets);\n\nexport default function interpret(easeString) {\n    return presetsMap[easeString] || Ease.fromSVGPath(easeString);\n}\n\nfunction _createPresetsMap(presets) {\n    const presetsMap = {};\n    \n    for (let preset of Object.values(presets)) {\n        presetsMap[preset.toString()] = preset;\n    }\n\n    return presetsMap;\n}","class GUIModel {\n    constructor(middleware) {\n        this._presets = _extractPresets(middleware);\n        this._curves = _extractCurves(this._presets);\n        this._orientationsMap = _extractOrientationsPerCurveMap(this._presets, this._curves);\n        this._activePreset = null;\n        this._preEditPreset = null;\n    }\n\n    get presets() {\n        return this._presets;\n    }\n\n    get curves() {\n        return this._curves;\n    }\n\n    get activePreset() {\n        return this._activePreset;\n    }\n\n    set activePreset(preset) {\n        this._activePreset = preset;\n    }\n\n    get preEditPreset() {\n        return this._preEditPreset;\n    }\n\n    set preEditPreset(preset) {\n        this._preEditPreset = preset;\n    }\n\n    getCurveOrientations(curve) {\n        return this._orientationsMap.get(curve);\n    }\n\n    getMatchingPreset(curve, orientation) {\n        return this._presets.find(preset => preset.curve === curve && preset.orientation === orientation);\n    }\n\n    getPresetMatchingEase(ease) {\n        return this._presets.find(preset => preset.ease.equals(ease));\n    }\n}\n\nfunction _extractPresets(middleware) {\n    return middleware.castEntries.map(entry => entry.internal);\n}\n\nfunction _extractCurves(presets) {\n    return presets.reduce((curves, preset) => curves.includes(preset.curve) ? curves : [...curves, preset.curve], []);\n}\n\nfunction _extractOrientationsPerCurveMap(presets, curves) {\n    const orientationsMap = new Map();\n\n    for (let curve of curves) {\n        const curveMatchingPresets = presets.filter(preset => preset.curve === curve);\n        const orientations = curveMatchingPresets.map(preset => preset.orientation);\n\n        orientationsMap.set(curve, orientations);\n    }\n\n    return orientationsMap;\n}\n\nexport default GUIModel;","import Anchor from \"./composites/Anchor\";\nimport Handle from \"./composites/Handle\";\nimport Point from \"./composites/Point\";\n\nexport default class Ease {\n    constructor(...anchors) {\n        this._anchors = anchors;\n    }\n\n    get anchors() {\n        return this._anchors;\n    }\n\n    get firstAnchor() {\n        return this._anchors[0];\n    }\n\n    get lastAnchor() {\n        return this._anchors[this._anchors.length - 1];\n    }\n\n    equals(ease) {\n        return this.toString() === ease.toString();\n    }\n    \n    addAnchor(x, y) {\n        const anchor = new Anchor(x, y);\n        this.anchors.push(anchor);\n        return anchor;\n    }\n\n    toString() {\n        return Ease.toSVGPath(this);\n    }\n\n    static fromSVGPath(svgPath) {\n        const ease = new Ease();\n        const [startX, startY] = svgPath.match(/M ?(?<x>\\d+),(?<y>\\d+)/).splice(-2).map(Number.parseFloat);\n        const cCoords = svgPath.replace(/^M.*C ?/, \"\").replace(/ *$/, \"\").split(/[ ,]/).map(Number.parseFloat);\n        \n        ease.anchors[0] = new Anchor(startX, startY);\n        ease.anchors[0].handle.x = cCoords[0];\n        ease.anchors[0].handle.y = cCoords[1];\n\n        for (let i = 2; i < cCoords.length - 4; i += 6) {\n            const a = (i - 2) / 3 + 1;\n            \n            ease.anchors[a] = new Anchor(cCoords[i + 2], cCoords[i + 3]);\n            ease.anchors[a].handle.x = cCoords[i];\n            ease.anchors[a].handle.y = cCoords[i + 1];\n            \n            ease.anchors[a + 1] = new Anchor(cCoords[i + 2], cCoords[i + 3]);\n            ease.anchors[a + 1].handle.x = cCoords[i + 4];\n            ease.anchors[a + 1].handle.y = cCoords[i + 5];\n        }\n\n        const lastAnchor = new Anchor(...cCoords.slice(-2));\n        lastAnchor.handle.x = cCoords[cCoords.length - 4];\n        lastAnchor.handle.y = cCoords[cCoords.length - 3];\n        ease.anchors.push(lastAnchor);\n\n        return ease;\n    }\n\n    static toSVGPath(ease) {\n        let path = `M ${ease.firstAnchor.x},${ease.firstAnchor.y} C`;\n\n        for (let i = 0; i < ease.anchors.length; i += 2) {\n            const startAnchor = ease.anchors[i];\n            const endAnchor = ease.anchors[i + 1];\n            \n            path += ` ${startAnchor.handle.x},${startAnchor.handle.y} ${endAnchor.handle.x},${endAnchor.handle.y} ${endAnchor.x},${endAnchor.y}`;\n        }\n\n        return path;\n    }\n}\n\nexport {\n    Anchor,\n    Handle,\n    Point\n}","import Handle from \"./Handle\";\nimport Point from \"./Point\";\n\nexport default class Anchor extends Point {\n    constructor(x, y) {\n        super(x, y);\n        this.handle = new Handle(x, y);\n    }\n}","import Point from \"./Point\";\n\nexport default class Handle extends Point {\n    \n}","export default class Point {\n    constructor(x = 0, y = 0) {\n        this.x = x;\n        this.y = y;\n    }\n}","import Ease from \"../ease/Ease\";\nimport Curve from \"./enum/Curve\";\nimport Orientation from \"./enum/Orientation\";\n\nexport {\n    Curve,\n    Orientation\n}\n\nclass EasePreset {\n    static CURVE = Curve;\n    static ORIENTATION = Orientation;\n\n    constructor(easeOrSvgPath, curve = EasePreset.CURVE.UNDEFINED, orientation = EasePreset.ORIENTATION.NONE) {\n        this.ease = easeOrSvgPath instanceof Ease ? easeOrSvgPath : Ease.fromSVGPath(easeOrSvgPath);\n        this.curve = curve;\n        this.orientation = orientation;\n    }\n\n    clone() {\n        return EasePreset.of(this.ease.toString(), this.curve, this.orientation);\n    }\n\n    alias(curve, orientation) {\n        this.curve = curve || this.curve;\n        this.orientation = orientation || this.orientation;\n        return this;\n    }\n\n    static of(svgPath, curve = EasePreset.CURVE.UNDEFINED, orientation = EasePreset.ORIENTATION.NONE) {\n        return new EasePreset(svgPath, curve, orientation);\n    }\n\n    // Static getters for easings commonly used across many animation engines\n    // https://easings.net/\n\n    static get Linear() {\n        return EasePreset.of(\"M 0,0 C 0,0 1,1 1,1\", Curve.LINEAR, Orientation.NONE);\n    }\n\n    static get Custom() {\n        return EasePreset.of(\"M 0,0 C 0,0 1,1 1,1\", Curve.CUSTOM, Orientation.NONE);\n    }\n\n    static get SineIn() {\n        return EasePreset.of(\"M 0,0 C 0.12,0 0.39,0 1,1\", Curve.SINE, Orientation.IN);\n    }\n\n    static get SineOut() {\n        return EasePreset.of(\"M 0,0 C 0.61,1 0.88,1 1,1\", Curve.SINE, Orientation.OUT);\n    }\n\n    static get SineInOut() {\n        return EasePreset.of(\"M 0,0 C 0.37,0 0.63,1 1,1\", Curve.SINE, Orientation.IN_OUT);\n    }\n\n    static get QuadIn() {\n        return EasePreset.of(\"M 0,0 C 0.11,0 0.5,0 1,1\", Curve.QUAD, Orientation.IN);\n    }\n\n    static get QuadOut() {\n        return EasePreset.of(\"M 0,0 C 0.5,1 0.89,1 1,1\", Curve.QUAD, Orientation.OUT);\n    }\n\n    static get QuadInOut() {\n        return EasePreset.of(\"M 0,0 C 0.45,0 0.55,1 1,1\", Curve.QUAD, Orientation.IN_OUT);\n    }\n\n    static get CubicIn() {\n        return EasePreset.of(\"M 0,0 C 0.32,0 0.67,0 1,1\", Curve.CUBIC, Orientation.IN);\n    }\n\n    static get CubicOut() {\n        return EasePreset.of(\"M 0,0 C 0.33,1 0.68,1 1,1\", Curve.CUBIC, Orientation.OUT);\n    }\n\n    static get CubicInOut() {\n        return EasePreset.of(\"M 0,0 C 0.65,0 0.35,1 1,1\", Curve.CUBIC, Orientation.IN_OUT);\n    }\n\n    static get QuartIn() {\n        return EasePreset.of(\"M 0,0 C 0.5,0 0.75,0 1,1\", Curve.QUART, Orientation.IN);\n    }\n\n    static get QuartOut() {\n        return EasePreset.of(\"M 0,0 C 0.25,1 0.5,1 1,1\", Curve.QUART, Orientation.OUT);\n    }\n\n    static get QuartInOut() {\n        return EasePreset.of(\"M 0,0 C 0.76,0 0.24,1 1,1\", Curve.QUART, Orientation.IN_OUT);\n    }\n\n    static get ExpoIn() {\n        return EasePreset.of(\"M 0,0 C 0.7,0 0.84,0 1,1\", Curve.EXPO, Orientation.IN);\n    }\n\n    static get ExpoOut() {\n        return EasePreset.of(\"M 0,0 C 0.16,1 0.3,1 1,1\", Curve.EXPO, Orientation.OUT);\n    }\n\n    static get ExpoInOut() {\n        return EasePreset.of(\"M 0,0 C 0.87,0 0.13,1 1,1\", Curve.EXPO, Orientation.IN_OUT);\n    }\n\n    static get CircIn() {\n        return EasePreset.of(\"M 0,0 C 0.55,0 1,0.45 1,1\", Curve.CIRC, Orientation.IN);\n    }\n\n    static get CircOut() {\n        return EasePreset.of(\"M 0,0 C 0,0.55 0.45,1 1,1\", Curve.CIRC, Orientation.OUT);\n    }\n\n    static get CircInOut() {\n        return EasePreset.of(\"M 0,0 C 0.85,0 0.15,1 1,1\", Curve.CIRC, Orientation.IN_OUT);\n    }\n\n    static get BackIn() {\n        return EasePreset.of(\"M 0,0 C 0.36,0 0.66,-0.56 1,1\", Curve.BACK, Orientation.IN);\n    }\n\n    static get BackOut() {\n        return EasePreset.of(\"M 0,0 C 0.34,1.56 0.64,1 1,1\", Curve.BACK, Orientation.OUT);\n    }\n\n    static get BackInOut() {\n        return EasePreset.of(\"M 0,0 C 0.68,-0.6 0.32,1.6 1,1\", Curve.BACK, Orientation.IN_OUT);\n    }\n}\n\nexport default EasePreset;","export default Object.freeze({\n    LINEAR: \"Linear\",\n    SINE: \"Sine\",\n    QUAD: \"Quad\",\n    CUBIC: \"Cubic\",\n    QUART: \"Quart\",\n    QUINT: \"Quint\",\n    EXPO: \"Expo\",\n    CIRC: \"Circ\",\n    BACK: \"Back\",\n    ELASTIC: \"Elastic\",\n    BOUNCE: \"Bounce\",\n    CUSTOM: \"Custom\",\n    UNDEFINED: \"Undefined\"\n});\n","export default Object.freeze({\n    IN: \"in\",\n    OUT: \"out\",\n    IN_OUT: \"inOut\",\n    NONE: \"none\"\n});","import EasePreset, { Curve, Orientation } from \"./EasePreset\";\n/*\n// Predefined list of easings commonly used across many animation engines\n// https://easings.net/\nexport default {\n    get Linear() {\n        return new EasePreset(Curve.LINEAR, Orientation.NONE, [0, 0, 1, 1]);\n    },\n\n    get Custom() {\n        return new EasePreset(Curve.CUSTOM, Orientation.NONE, [0, 0, 1, 1]);\n    },\n\n    // Sine\n\n    get SineIn() {\n        return new EasePreset(Curve.SINE, Orientation.IN, [0.12, 0, 0.39, 0]);\n    },\n\n    get SineOut() {\n        return new EasePreset(Curve.SINE, Orientation.OUT, [0.61, 1, 0.88, 1]);\n    },\n\n    get SineInOut() {\n        return new EasePreset(Curve.SINE, Orientation.IN_OUT, [0.37, 0, 0.63, 1]);\n    },\n\n    // Quad\n\n    get QuadIn() {\n        return new EasePreset(Curve.QUAD, Orientation.IN, [0.11, 0, 0.5, 0]);\n    },\n\n    get QuadOut() {\n        return new EasePreset(Curve.QUAD, Orientation.OUT, [0.5, 1, 0.89, 1]);\n    },\n\n    get QuadInOut() {\n        return new EasePreset(Curve.QUAD, Orientation.IN_OUT, [0.45, 0, 0.55, 1]);\n    },\n\n    // Cubic\n\n    get CubicIn() {\n        return new EasePreset(Curve.CUBIC, Orientation.IN, [0.32, 0, 0.67, 0]);\n    },\n\n    get CubicOut() {\n        return new EasePreset(Curve.CUBIC, Orientation.OUT, [0.33, 1, 0.68, 1]);\n    },\n\n    get CubicInOut() {\n        return new EasePreset(Curve.CUBIC, Orientation.IN_OUT, [0.65, 0, 0.35, 1]);\n    },\n\n    // Quart\n\n    get QuartIn() {\n        return new EasePreset(Curve.QUART, Orientation.IN, [0.5, 0, 0.75, 0]);\n    },\n\n    get QuartOut() {\n        return new EasePreset(Curve.QUART, Orientation.OUT, [0.25, 1, 0.5, 1]);\n    },\n\n    get QuartInOut() {\n        return new EasePreset(Curve.QUART, Orientation.IN_OUT, [0.76, 0, 0.24, 1]);\n    },\n\n    // Expo\n\n    get ExpoIn() {\n        return new EasePreset(Curve.EXPO, Orientation.IN, [0.7, 0, 0.84, 0]);\n    },\n\n    get ExpoOut() {\n        return new EasePreset(Curve.EXPO, Orientation.OUT, [0.16, 1, 0.3, 1]);\n    },\n\n    get ExpoInOut() {\n        return new EasePreset(Curve.EXPO, Orientation.IN_OUT, [0.87, 0, 0.13, 1]);\n    },\n\n    // Circ\n\n    get CircIn() {\n        return new EasePreset(Curve.CIRC, Orientation.IN, [0.55, 0, 1, 0.45]);\n    },\n\n    get CircOut() {\n        return new EasePreset(Curve.CIRC, Orientation.OUT, [0, 0.55, 0.45, 1]);\n    },\n\n    get CircInOut() {\n        return new EasePreset(Curve.CIRC, Orientation.IN_OUT, [0.85, 0, 0.15, 1]);\n    },\n\n    // Back\n\n    get BackIn() {\n        return new EasePreset(Curve.BACK, Orientation.IN, [0.36, 0, 0.66, -0.56]);\n    },\n\n    get BackOut() {\n        return new EasePreset(Curve.BACK, Orientation.OUT, [0.34, 1.56, 0.64, 1]);\n    },\n\n    get BackInOut() {\n        return new EasePreset(Curve.BACK, Orientation.IN_OUT, [0.68, -0.6, 0.32, 1.6]);\n    }\n}\n\n\nconst curvesToOrientationsSvgMap = {\n    [Curve.LINEAR]: {\n        [Orientation.NONE]: \"M 0,0 C 0,0 1,1 1,1\"\n    },\n    [Curve.SINE]: {\n        [Orientation.IN]: \"M 0,0 C 0.12,0 0.39,0 1,1\",\n        [Orientation.OUT]: \"M 0,0 C 0.61,1 0.88,1 1,1\",\n        [Orientation.IN_OUT]: \"M 0,0 C 0.37,0 0.63,1 1,1\"\n    },\n    [Curve.QUAD]: {\n        [Orientation.IN]: \"M 0,0 C 0.11,0 0.5,0 1,1\",\n        [Orientation.OUT]: \"M 0,0 C 0.5,1 0.89,1 1,1\",\n        [Orientation.IN_OUT]: \"M 0,0 C 0.45,0 0.55,1 1,1\"\n    },\n    [Curve.CUBIC]: {\n        [Orientation.IN]: \"M 0,0 C 0.32,0 0.67,0 1,1\",\n        [Orientation.OUT]: \"M 0,0 C 0.33,1 0.68,1 1,1\",\n        [Orientation.IN_OUT]: \"M 0,0 C 0.65,0 0.35,1 1,1\"\n    },\n    [Curve.QUART]: {\n        [Orientation.IN]: \"M 0,0 C 0.5,0 0.75,0 1,1\",\n        [Orientation.OUT]: \"M 0,0 C 0.25,1 0.5,1 1,1\",\n        [Orientation.IN_OUT]: \"M 0,0 C 0.76,0 0.24,1 1,1\"\n    },\n    [Curve.EXPO]: {\n        [Orientation.IN]: \"M 0,0 C 0.7,0 0.84,0 1,1\",\n        [Orientation.OUT]: \"M 0,0 C 0.16,1 0.3,1 1,1\",\n        [Orientation.IN_OUT]: \"M 0,0 C 0.87,0 0.13,1 1,1\"\n    },\n    [Curve.CIRC]: {\n        [Orientation.IN]: \"M 0,0 C 0.55,0 1,0.45 1,1\",\n        [Orientation.OUT]: \"M 0,0 C 0,0.55 0.45,1 1,1\",\n        [Orientation.IN_OUT]: \"M 0,0 C 0.85,0 0.15,1 1,1\"\n    },\n    [Curve.BACK]: {\n        [Orientation.IN]: \"M 0,0 C 0.36,0 0.66,-0.56 1,1\",\n        [Orientation.OUT]: \"M 0,0 C 0.68,-0.6 0.32,1.6 1,1\",\n        [Orientation.IN_OUT]: \"M 0,0 C 0.34,1.56 0.64,1 1,1\"\n    }\n}\n\nexport const Linear = new EasePreset(Curve.LINEAR, Orientation.NONE, [0, 0, 1, 1]);\n\nexport const SineIn = new EasePreset(Curve.SINE, Orientation.IN, [0.12, 0, 0.39, 0]);\nexport const SineOut = new EasePreset(Curve.SINE, Orientation.OUT, [0.61, 1, 0.88, 1]);\nexport const SineInOut = new EasePreset(Curve.SINE, Orientation.IN_OUT, [0.37, 0, 0.63, 1]);\n\nexport const QuadIn = new EasePreset(Curve.QUAD, Orientation.IN, [0.11, 0, 0.5, 0]);\nexport const QuadOut = new EasePreset(Curve.QUAD, Orientation.OUT, [0.5, 1, 0.89, 1]);\nexport const QuadInOut = new EasePreset(Curve.QUAD, Orientation.IN_OUT, [0.45, 0, 0.55, 1]);\n\nexport const CubicIn = new EasePreset(Curve.CUBIC, Orientation.IN, [0.32, 0, 0.67, 0]);\nexport const CubicOut = new EasePreset(Curve.CUBIC, Orientation.OUT, [0.33, 1, 0.68, 1]);\nexport const CubicInOut = new EasePreset(Curve.CUBIC, Orientation.IN_OUT, [0.65, 0, 0.35, 1]);\n\nexport const QuartIn = new EasePreset(Curve.QUART, Orientation.IN, [0.5, 0, 0.75, 0]);\nexport const QuartOut = new EasePreset(Curve.QUART, Orientation.OUT, [0.25, 1, 0.5, 1]);\nexport const QuartInOut = new EasePreset(Curve.QUART, Orientation.IN_OUT, [0.76, 0, 0.24, 1]);\n\nexport const QuintIn = new EasePreset(Curve.QUINT, Orientation.IN, [0.64, 0, 0.78, 0]);\nexport const QuintOut = new EasePreset(Curve.QUINT, Orientation.OUT, [0.22, 1, 0.36, 1]);\nexport const QuintInOut = new EasePreset(Curve.QUINT, Orientation.IN_OUT, [0.83, 0, 0.17, 1]);\n\nexport const ExpoIn = new EasePreset(Curve.EXPO, Orientation.IN, [0.7, 0, 0.84, 0]);\nexport const ExpoOut = new EasePreset(Curve.EXPO, Orientation.OUT, [0.16, 1, 0.3, 1]);\nexport const ExpoInOut = new EasePreset(Curve.EXPO, Orientation.IN_OUT, [0.87, 0, 0.13, 1]);\n\nexport const CircIn = new EasePreset(Curve.CIRC, Orientation.IN, [0.55, 0, 1, 0.45]);\nexport const CircOut = new EasePreset(Curve.CIRC, Orientation.OUT, [0, 0.55, 0.45, 1]);\nexport const CircInOut = new EasePreset(Curve.CIRC, Orientation.IN_OUT, [0.85, 0, 0.15, 1]);\n\nexport const BackIn = new EasePreset(Curve.BACK, Orientation.IN, [0.36, 0, 0.66, -0.56]);\nexport const BackOut = new EasePreset(Curve.BACK, Orientation.OUT, [0.34, 1.56, 0.64, 1]);\nexport const BackInOut = new EasePreset(Curve.BACK, Orientation.IN_OUT, [0.68, -0.6, 0.32, 1.6]);\n\nexport const Custom = new EasePreset(Curve.CUSTOM, Orientation.NONE, [0, 0, 1, 1]);\n*/","import domTemplate from \"./dom/gui.html\";\nimport GUIViewEvent from \"./GUIViewEvent\";\nimport EasePanelDirector from \"./dom/directors/EasePanelDirector\";\nimport HTMLElementDirector from \"./HTMLElementDirector\";\nimport EaseEditorDirector from \"./dom/directors/EaseEditorDirector\";\n\nclass GUIView extends HTMLElementDirector {\n    constructor(curves) {\n        super(_renderTemplate(domTemplate));\n\n        this._easePanelDirector = new EasePanelDirector(this._element, curves);\n        this._easeEditorDirector = null;\n\n        this._easePanelDirector.on(GUIViewEvent.CURVE_PRESET_SELECTED, (...args) => this.emit(GUIViewEvent.CURVE_PRESET_SELECTED, ...args));\n        this._easePanelDirector.on(GUIViewEvent.ORIENTATION_PRESET_SELECTED, (...args) => this.emit(GUIViewEvent.ORIENTATION_PRESET_SELECTED, ...args));\n        this._easePanelDirector.on(GUIViewEvent.EDIT_EASE_CLICKED, (...args) => this.emit(GUIViewEvent.EDIT_EASE_CLICKED, ...args));\n    }\n\n    setOrientations(orientations) {\n        this._easePanelDirector.setOrientations(orientations);\n    }\n\n    setPreset(preset) {\n        this._easePanelDirector.setPreset(preset);\n        \n        if (this._isEditorOpen()) {\n            this._easeEditorDirector.ease = preset.ease;\n        }\n    }\n\n    openEditor(initialEase) {\n        if (this._isEditorOpen()) return;\n\n        this._element.classList.remove(\"mode-select\");\n        this._element.classList.add(\"mode-edit\");\n\n        this._easeEditorDirector = new EaseEditorDirector(this._element);\n        this._easeEditorDirector.on(GUIViewEvent.ACCEPT_EASE_EDIT_CLICKED, (...args) => this.emit(GUIViewEvent.ACCEPT_EASE_EDIT_CLICKED, ...args));\n        this._easeEditorDirector.on(GUIViewEvent.DISCARD_EASE_EDIT_CLICKED, (...args) => this.emit(GUIViewEvent.DISCARD_EASE_EDIT_CLICKED, ...args));\n        this._easeEditorDirector.on(GUIViewEvent.EASE_MODIFIED, (...args) => this.emit(GUIViewEvent.EASE_MODIFIED, ...args));\n        this._easeEditorDirector.ease = initialEase;\n    }\n\n    closeEditor() {\n        if (!this._isEditorOpen()) return;\n\n        this._element.classList.remove(\"mode-edit\");\n        this._element.classList.add(\"mode-select\");\n\n        this._easeEditorDirector.cleanUp();\n        this._easeEditorDirector = null;\n    }\n\n    showEditButton() {\n        this._easePanelDirector.showEditButton();\n    }\n\n    get domElement() {\n        return this._element;\n    }\n\n    _isEditorOpen() {\n        return !!this._easeEditorDirector;\n    }\n}\n\nfunction _renderTemplate(template) {\n    return (new DOMParser()).parseFromString(template, \"text/html\").body.firstChild;\n}\n\nexport {\n    GUIViewEvent\n};\n\nexport default GUIView;","export default Object.freeze({\n    CURVE_PRESET_SELECTED: \"CurvePresetSelectedGUIViewEvent\",\n    ORIENTATION_PRESET_SELECTED: \"OrientationPresetSelectedGUIViewEvent\",\n    EDIT_EASE_CLICKED: \"EditEaseClickedGUIViewEvent\",\n    EASE_MODIFIED: \"EaseModifiedGUIViewEvent\",\n    ACCEPT_EASE_EDIT_CLICKED: \"AcceptEaseEditClickedGUIViewEvent\",\n    DISCARD_EASE_EDIT_CLICKED: \"DiscardEaseEditClickedGUIViewEvent\"\n});","export default class HTMLElementDirector {\n    constructor(htmlElement) {\n        this._element = htmlElement;\n    }\n\n    on(eventKey, callback) {\n        this._element.addEventListener(eventKey, event => callback(...event.detail));\n    }\n\n    emit(eventKey, ...args) {\n        this._element.dispatchEvent(new CustomEvent(eventKey, { detail: args }));\n    }\n}","import HTMLElementDirector from \"../../HTMLElementDirector\";\nimport { curveSelector } from \"../selectors\";\nimport { Curve } from \"../../../model/preset/EasePreset\";\nimport GUIViewEvent from  \"../../GUIViewEvent\";\n\nexport default class CurveSelectorDirector extends HTMLElementDirector {\n    constructor(rootDomElement, curves) {\n        super(curveSelector(rootDomElement));\n\n        for (let option of this._composeOptions(curves)) {\n            this._element.options.add(option);\n        }\n\n        this._element.onchange = () => this.emit(GUIViewEvent.CURVE_PRESET_SELECTED, this._element.value);\n    }\n\n    set value(curve) {\n        this._element.value = curve;\n    }\n\n    _composeOptions(curves) {\n        const options = curves.map(curve => new Option(curve, curve));\n\n        return [...options, this._createCustomCurveOption()];\n    }\n    \n    _createCustomCurveOption() {\n        const customCurveOption = new Option(Curve.CUSTOM, Curve.CUSTOM);\n        customCurveOption.setAttribute(\"hidden\", true);\n        return customCurveOption;\n    }\n}","import Ease from \"../../../model/ease/Ease\";\nimport EaseEditor, { EditorCurveChangeEvent } from \"../../editor/EaseEditor\";\nimport { GUIViewEvent } from \"../../GUIView\";\nimport HTMLElementDirector from \"../../HTMLElementDirector\";\nimport { editorAcceptButton, editorCanvas, editorDeclineButton, editorSvgPathCopyButton, editorSvgPathInspector } from \"../selectors\";\n\nexport default class EaseEditorDirector extends HTMLElementDirector {\n    constructor(rootDomElement) {\n        super(editorCanvas(rootDomElement));\n        \n        this._editor = new EaseEditor(this._element);\n        this._element.addEventListener(EditorCurveChangeEvent.KEY, () => this.emit(GUIViewEvent.EASE_MODIFIED, this._editor.ease));\n\n        this._svgPathInspector = this._initSvgPathInspector(rootDomElement);\n        this._copyButton = this._initCopyButton(rootDomElement, this._svgPathInspector);\n        this._acceptButton = this._initAcceptButton(rootDomElement);\n        this._discardButton = this._initDiscardButton(rootDomElement);\n    }\n\n    set ease(ease) {\n        this._editor.ease = ease;\n        this._svgPathInspector.value = ease.toString();\n    }\n    \n    cleanUp() {\n        // Hack to reset event listeners assigned to original canvas by CurveJS & external listeners\n        const canvas = this._element\n        const canvasClone = canvas.cloneNode(true);\n\n        canvas.parentNode.replaceChild(canvasClone, canvas);\n    }\n\n    _initSvgPathInspector(rootDomElement) {\n        const inspectorElement = editorSvgPathInspector(rootDomElement);\n\n        inspectorElement.oninput = event => {\n            try {\n                const ease = Ease.fromSVGPath(inspectorElement.value);\n\n                this._editor.ease = ease;\n                this.emit(GUIViewEvent.EASE_MODIFIED, ease);\n            }\n            catch(e) {\n                console.warn(`Couldn't parse SVG path ${inspectorElement.value}`);\n            }\n        }\n\n        return inspectorElement;\n    }\n\n    _initCopyButton(rootDomElement, svgPathInspectorElement) {\n        const buttonElement = editorSvgPathCopyButton(rootDomElement);\n\n        buttonElement.onclick = () => {\n            svgPathInspectorElement.select();\n            document.execCommand(\"copy\");\n            console.info(`Copied ${svgPathInspectorElement.value}`);\n        };\n\n        return buttonElement;\n    }\n\n    _initAcceptButton(rootDomElement) {\n        const buttonElement = editorAcceptButton(rootDomElement);\n\n        buttonElement.onclick = () => this.emit(GUIViewEvent.ACCEPT_EASE_EDIT_CLICKED, this._editor.ease);\n\n        return buttonElement;\n    }\n\n    _initDiscardButton(rootDomElement) {\n        const buttonElement = editorDeclineButton(rootDomElement);\n\n        buttonElement.onclick = () => this.emit(GUIViewEvent.DISCARD_EASE_EDIT_CLICKED);\n\n        return buttonElement;\n    }\n}","import HTMLElementDirector from \"../../HTMLElementDirector\";\nimport { cornerCurveCanvas } from \"../selectors\";\n\nexport default class EasePanelBackgroundDirector extends HTMLElementDirector {\n    constructor(rootDomElement) {\n        super();\n\n        this._cornerCurveCanvas = cornerCurveCanvas(rootDomElement);\n        this._cornerCurveCanvas.width = this._cornerCurveCanvas.height = 60;\n\n        this._cornerCurveCanvasContext = this._cornerCurveCanvas.getContext(\"2d\");\n    }\n\n    refresh(ease) {\n        const ctx = this._cornerCurveCanvasContext;\n        const { width, height } = this._cornerCurveCanvas;\n\n        ctx.strokeStyle = ctx.fillStyle = \"#88CE02\";\n\t\tctx.lineWidth = 1;\n        ctx.clearRect(0, 0, width, height);\n        ctx.beginPath();\n\t\tctx.moveTo(ease.firstAnchor.x * width, (1 - ease.firstAnchor.y) * height);\n        \n        for (let i = 0; i < ease.anchors.length; i += 2) {\n            const startAnchor = ease.anchors[i];\n            const endAnchor = ease.anchors[i + 1];\n\n            ctx.bezierCurveTo(\n                startAnchor.handle.x * width, (1 - startAnchor.handle.y) * height, \n                endAnchor.handle.x * width, (1 - endAnchor.handle.y) * height, \n                endAnchor.x * width, (1 - endAnchor.y) * height);\n        }\n\n        ctx.lineTo(width, height);\n        ctx.lineTo(0, height);\n        ctx.stroke();\n        ctx.fill();\n    }\n}","import HTMLElementDirector from \"../../HTMLElementDirector\";\nimport { easePanel, editButton } from \"../selectors\";\nimport CurveSelectorDirector from \"./CurveSelectorDirector\";\nimport OrientationSelectorDirector from \"./OrientationSelectorDirector\";\nimport GUIViewEvent from \"../../GUIViewEvent\";\nimport EasePanelBackgroundDirector from \"./EasePanelBackgroundDirector\";\n\nexport default class EasePanelDirector extends HTMLElementDirector {\n    constructor(rootDomElement, curves) {\n        super(easePanel(rootDomElement));\n\n        this._curveSelector = new CurveSelectorDirector(rootDomElement, curves);\n        this._curveSelector.on(GUIViewEvent.CURVE_PRESET_SELECTED, (...args) => this.emit(GUIViewEvent.CURVE_PRESET_SELECTED, ...args));\n\n        this._orientationSelector = new OrientationSelectorDirector(rootDomElement);\n        this._orientationSelector.on(GUIViewEvent.ORIENTATION_PRESET_SELECTED, (...args) => this.emit(GUIViewEvent.ORIENTATION_PRESET_SELECTED, ...args));\n\n        this._background = new EasePanelBackgroundDirector(rootDomElement);\n\n        this._editButtonElement = editButton(rootDomElement);\n        this._editButtonElement.style.display = \"none\"\n        this._editButtonElement.addEventListener(\"click\", () => this.emit(GUIViewEvent.EDIT_EASE_CLICKED));\n    }\n\n    setOrientations(orientations) {\n        this._orientationSelector.values = orientations;\n    }\n\n    setPreset(preset) {\n        this._curveSelector.value = preset.curve;\n        this._orientationSelector.value = preset.orientation;\n        this._background.refresh(preset.ease);\n    }\n\n    showEditButton() {\n        this._editButtonElement.style.display = null;\n    }\n}","import HTMLElementDirector from \"../../HTMLElementDirector\";\nimport { orientationSelector } from \"../selectors\";\nimport GUIViewEvent from  \"../../GUIViewEvent\";\n\nexport default class OrientationSelectorDirector extends HTMLElementDirector {\n    constructor(rootDomElement) {\n        super(orientationSelector(rootDomElement));\n\n        this._element.onchange = () => this.emit(GUIViewEvent.ORIENTATION_PRESET_SELECTED, this._element.value);\n    }\n    \n    set values(orientations) {\n        this._element.options.length = 0;\n        \n        if (orientations.length > 0) {\n            for (let orientation of orientations) {\n                this._element.options.add(new Option(orientation, orientation));\n            }\n            this._element.removeAttribute(\"disabled\");\n        }\n        else {\n            this._element.setAttribute(\"disabled\", true);\n        }\n    }\n\n    set value(orientation) {\n        this._element.value = orientation;\n    }\n}","export function easePanel(rootDomElement) {\n    return rootDomElement.querySelector(\".ease-selector\");\n}\n\nexport function curveSelector(rootDomElement) {\n    return rootDomElement.querySelector(\".curve-selector\");\n}\n\nexport function orientationSelector(rootDomElement) {\n    return rootDomElement.querySelector(\".orientation-selector\");\n}\n\nexport function cornerCurveCanvas(rootDomElement) {\n    return rootDomElement.querySelector(\"canvas.corner-curve\");\n}\n\nexport function editButton(rootDomElement) {\n    return rootDomElement.querySelector(\".edit-button\");\n}\n\nexport function editorCanvas(rootDomElement) {\n    return rootDomElement.querySelector(\"canvas.editor\");\n}\n\nexport function editorSvgPathInspector(rootDomElement) {\n    return rootDomElement.querySelector(\".path-selector\");\n}\n\nexport function editorSvgPathCopyButton(rootDomElement) {\n    return rootDomElement.querySelector(\".copy-button\");\n}\n\nexport function editorAcceptButton(rootDomElement) {\n    return rootDomElement.querySelector(\".accept-button\");\n}\n\nexport function editorDeclineButton(rootDomElement) {\n    return rootDomElement.querySelector(\".decline-button\");\n}","import CurveJS from \"./lib/curvesjs/Curve\";\nimport BezierPoint from \"./lib/curvesjs/BezierPoint\";\nimport { EditorCurveChangeEvent } from \"./events\";\nimport Ease from \"../../model/ease/Ease\";\n\nexport default class EaseEditor {\n  constructor(canvas) {\n    this._canvas = canvas;\n    this._ctx = this._prepareContext(canvas);\n    this._curve = this._createCurveJSInstance(this._ctx);\n    this._propagateEvents(this._curve, canvas);\n  }\n\n  set ease(ease) {\n    const { points, pointColor, pointSize, cpDist } = this._curve;\n    const { anchors, firstAnchor, lastAnchor } = ease;\n    points.length = 0;\n\n    const firstPoint = new BezierPoint(this._toCanvasX(firstAnchor.x), this._toCanvasY(firstAnchor.y), this._ctx, pointColor, pointSize, cpDist);\n    firstPoint.cp2.x = this._toCanvasX(firstAnchor.handle.x);\n    firstPoint.cp2.y = this._toCanvasY(firstAnchor.handle.y);\n    firstPoint.cp1.x = -firstPoint.cp2.x;\n    firstPoint.cp1.y = -firstPoint.cp2.y;\n    points.push(firstPoint);\n\n    for (let i = 1; i < anchors.length - 1; i += 2) {\n      const precedingCurveEndAnchor = anchors[i];\n      const followingCurveStartAnchor = anchors[i + 1];\n      const point = new BezierPoint(this._toCanvasX(precedingCurveEndAnchor.x), this._toCanvasY(precedingCurveEndAnchor.y), this._ctx, pointColor, pointSize, cpDist);\n\n      point.cp1.x = this._toCanvasX(precedingCurveEndAnchor.handle.x);\n      point.cp1.y = this._toCanvasY(precedingCurveEndAnchor.handle.y);\n      point.cp2.x = this._toCanvasX(followingCurveStartAnchor.handle.x);\n      point.cp2.y = this._toCanvasY(followingCurveStartAnchor.handle.y);\n\n      points.push(point);\n    }\n\n    const lastPoint = new BezierPoint(this._toCanvasX(lastAnchor.x), this._toCanvasY(lastAnchor.y), this._ctx, pointColor, pointSize, cpDist);\n    lastPoint.cp1.x = this._toCanvasX(lastAnchor.handle.x);\n    lastPoint.cp1.y = this._toCanvasY(lastAnchor.handle.y);\n    lastPoint.cp2.x = -lastPoint.cp1.x;\n    lastPoint.cp2.y = -lastPoint.cp1.y;\n    points.push(lastPoint);\n\n    this._curve.draw();\n  }\n\n  get ease() {\n    const ease = new Ease();\n    const { cw, ch, points } = this._curve;\n\n    for (let i = 0; i < points.length - 1; i++) {\n      const startPoint = points[i];\n      const startAnchor = ease.addAnchor(this._fromCanvasX(startPoint.position.x), this._fromCanvasY(startPoint.position.y));\n      startAnchor.handle.x = this._fromCanvasX(startPoint.cp2.x);\n      startAnchor.handle.y = this._fromCanvasY(startPoint.cp2.y);\n\n      const endPoint = points[i + 1];\n      const endAnchor = ease.addAnchor(this._fromCanvasX(endPoint.position.x), this._fromCanvasY(endPoint.position.y));\n      endAnchor.handle.x = this._fromCanvasX(endPoint.cp1.x);\n      endAnchor.handle.y = this._fromCanvasY(endPoint.cp1.y);\n    }\n\n    return ease;\n  }\n\n  _prepareContext(canvas) {\n    const ctx = canvas.getContext(\"2d\");\n    ctx.canvas.width = canvas.clientWidth;\n    ctx.canvas.height = canvas.clientHeight;\n    return ctx;\n  }\n\n  _createCurveJSInstance(ctx) {\n    const curve = new CurveJS(ctx);\n\n    curve.setPointStyle('#ffffff', 8);\n    curve.setLineStyle('#ace247', 2);\n\n    return curve;\n  }\n\n  _propagateEvents(curve, canvas) {\n    curve.on('drag', () => canvas.dispatchEvent(new EditorCurveChangeEvent()));\n    curve.on('newpoint', () => canvas.dispatchEvent(new EditorCurveChangeEvent()));\n    curve.on('removepoint', () => canvas.dispatchEvent(new EditorCurveChangeEvent()));\n  }\n\n  _toCanvasX(x) {\n    return x * this._curve.cw;\n  }\n\n  _toCanvasY(y) {\n    return (1 - y) * this._curve.ch;\n  }\n\n  _fromCanvasX(x) {\n    return this._round(x / this._curve.cw);\n  }\n\n  _fromCanvasY(y) {\n    return this._round(1 - y / this._curve.ch);\n  }\n\n  _round(coord, numberOfFloatDigits = 3) {\n    const power = Math.pow(10, numberOfFloatDigits);\n    return Math.round(coord * power) / power;\n  }\n}\n\nexport {\n  EditorCurveChangeEvent\n}","export default class EditorCurveChangeEvent extends CustomEvent {\n    constructor() {\n        super(EditorCurveChangeEvent.KEY);\n    }\n\n    static KEY = \"editorCurveChangeEvent\";\n}","import EditorCurveChangeEvent from \"./EditorCurveChangeEvent\";\n\nexport { EditorCurveChangeEvent };","import Point from \"./Point\"\n\nexport default class BezierPoint {\n\n\tconstructor(x, y, context, color, size, cpDist) {\n\n\t\tthis.cpDist = cpDist;\n\n\t\tthis.color = color;\n\t\tthis.size = size;\n\n\t\tthis.position = new Point(x, y, this.color, this.size, context);\n\t\tthis.cp1 = new Point(x-this.cpDist, y, this.color, this.size, context);\n\t\tthis.cp2 = new Point(x+this.cpDist, y, this.color, this.size, context);\n\n\t\tthis.ctx = context;\n\t\tthis.r = 2;\n\n\t\tthis.collapsed = false;\n\n\t}\n\n\tcollapse() {\n\t\n\t\tif (!this.collapsed) {\n\t\t\tthis.collapsed = true;\n\t\t\tthis.cp1.x = this.cp2.x = this.position.x;\n\t\t\tthis.cp1.y = this.cp2.y = this.position.y;\n\t\t} else {\n\t\t\tthis.collapsed = false;\n\t\t\tthis.cp1.x = this.position.x - this.cpDist;\n\t\t\tthis.cp2.x = this.position.x + this.cpDist;\n\t\t}\n\n\t}\n\n\tmove() {\n\n\t\tif (!this.collapsed) {\n\t\t\tthis.v1x = this.cp1.x - this.position.x;\n\t\t\tthis.v1y = this.cp1.y - this.position.y;\n\t\t\tthis.v2x = this.cp2.x - this.position.x;\n\t\t\tthis.v2y = this.cp2.y - this.position.y;\n\t\t} else {\n\t\t\tthis.v1x = this.v1y = this.v2x = this.v2y = 0;\n\t\t}\n\n\t}\n\n\tsetPointStyle(color, size) {\n\n\t\tthis.position.color = color;\n\t\tthis.cp1.color = color;\n\t\tthis.cp2.color = color;\n\t\tthis.position.r = size/2;\n\t\tthis.cp1.r = size/2;\n\t\tthis.cp2.r = size/2;\n\t}\n\n\tdraw() {\n\n\t\tthis.ctx.lineWidth = 0.2;\n\n\t\tthis.ctx.beginPath();\n\t\tthis.ctx.moveTo(this.position.x, this.position.y);\n\t\tthis.ctx.lineTo(this.cp1.x, this.cp1.y);\n\t\tthis.ctx.stroke();\n\n\t\tthis.ctx.beginPath();\n\t\tthis.ctx.moveTo(this.position.x, this.position.y);\n\t\tthis.ctx.lineTo(this.cp2.x, this.cp2.y);\n\t\tthis.ctx.stroke();\n\n\t\tthis.position.draw();\n\t\tthis.cp1.draw();\n\t\tthis.cp2.draw();\n\n\t}\n}","/*\nThe MIT License (MIT)\n\nCopyright (c) 2015 Sidney Douw\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all\ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n*/\n\nimport BezierPoint from \"./BezierPoint\";\n\nexport default class Curve {\n\n\tconstructor(context, interval, cpDist) {\n\n\t\tthis.BezierPoint = BezierPoint;\n\n\t\tthis.cpDist = cpDist ? cpDist : context.canvas.width * 0.2;\n\n\t\tthis.pointColor = '#f00';\n\t\tthis.pointSize = 4;\n\n\t\tthis.lineColor = '#fff';\n\t\tthis.lineWidth = 1;\n\n\t\tthis.points = [\n\t\t\tnew BezierPoint(0, context.canvas.height, context, this.pointColor, this.pointSize, this.cpDist),\n\t\t\tnew BezierPoint(context.canvas.width, 0, context, this.pointColor, this.pointSize, this.cpDist)\n\t\t];\n\n\t\tthis.ctx = context;\n\t\tthis.cw = context.canvas.width;\n\t\tthis.ch = context.canvas.height;\n\n\t\tthis.mouseX = 0;\n\t\tthis.mouseY = 0;\n\n\t\tthis.events = {};\n\n\t\tthis.interval = interval;\n\n\t\tthis.canvasEvents();\n\t\tthis.createLUT();\n\t\tthis.draw();\n\n\t}\n\n\txGetY(frame) {\n\n\t\tlet tolerance = 0.0001;\n\t\t\n\t\tlet iMin = 0;\n\t\tlet iMax = 5000;\n\t\tlet key = (iMin+iMax)/2;\n\n\t\tlet xTarget = frame/this.interval;\n\t\tlet xCurrent = this.lookupX[key];\n\n\t\tlet i = 0;\n\n\t\twhile (Math.abs(xTarget-xCurrent) > tolerance){\n\t\t\ti++;\n\t\t\t\n\t\t\tif (xCurrent > xTarget) {\n\t\t\t\tiMax = key;\n\t\t\t} else if (xCurrent < xTarget) {\n\t\t\t\tiMin = key;\n\t\t\t}\n\t\t\tkey = Math.round((iMin+iMax)/2);\n\t\t\txCurrent = this.lookupX[key];\n\n\t\t\tif (i > 20) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn this.lookupY[key];\n\n\t}\n\n\tcreateLUT() {\n\t\t\n\t\tthis.lookupX = [];\n\t\tthis.lookupY = [];\n\n\t\t//Percent Based Tesselation\n\t\tfor (let i = 1; i < this.points.length; i++) {\n\t\t\tlet p1 = this.points[i-1];\n\t\t\tlet p2 = this.points[i];\n\t\t\tlet pct = (p2.position.x/this.cw) - (p1.position.x/this.cw);\n\t\t\tfor (let t = 0; t < 1; t+=1/(5000*pct)) {\n\t\t\t\tlet x = (Math.pow((1-t),3)*p1.position.x) + (3*Math.pow((1-t),2)*t*p1.cp2.x) + (3*(1-t)*Math.pow(t,2)*p2.cp1.x) + (Math.pow(t,3)*p2.position.x);\n\t\t\t\tlet y = (Math.pow((1-t),3)*p1.position.y) + (3*Math.pow((1-t),2)*t*p1.cp2.y) + (3*(1-t)*Math.pow(t,2)*p2.cp1.y) + (Math.pow(t,3)*p2.position.y);\n\t\t\t\tthis.lookupX.push(x/this.cw);\n\t\t\t\tthis.lookupY.push(-y/this.ch+1);\n\t\t\t}\n\t\t}\n\n\t}\n\n\ton(event, func) {\n\t\tthis.events['on'+event] = func.bind(this);\n\t}\n\n\tcanvasEvents() {\n\n\t\tlet x,\n\t\t\ty,\n\t\t\tdist,\n\t\t\tdragReady,\n\t\t\tdragCP,\n\t\t\tdraging;\n\n\t\tlet _this = this;\n\t\t\n\t\tthis.ctx.canvas.addEventListener('mousemove', function(evt){\n\n\t\t\tlet bbox = this.getBoundingClientRect();\n\n\t\t\tx = evt.clientX - bbox.left;\n\t\t\ty = evt.clientY - bbox.top;\n\n\t\t\t_this.mouseX = x;\n\t\t\t_this.mouseY = y;\n\n\t\t\tfor (let i = 0; i < _this.points.length; i++) {\n\t\t\t\tlet p = _this.points[i];\n\n\t\t\t\tif (!draging) {\n\n\t\t\t\t\tdist = Math.sqrt((x-p.position.x)*(x-p.position.x) + (y-p.position.y)*(y-p.position.y));\n\t\t\t\t\tif (dist <= _this.pointSize/2+2) {\n\t\t\t\t\t\tthis.style.cursor = 'pointer';\n\t\t\t\t\t\tdragReady = i;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdist = Math.sqrt((x-p.cp1.x)*(x-p.cp1.x) + (y-p.cp1.y)*(y-p.cp1.y));\n\t\t\t\t\t\tif (dist <= _this.pointSize/2+2) {\n\t\t\t\t\t\t\tthis.style.cursor = 'pointer';\n\t\t\t\t\t\t\tdragReady = i;\n\t\t\t\t\t\t\tdragCP = 'cp1';\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tdist = Math.sqrt((x-p.cp2.x)*(x-p.cp2.x) + (y-p.cp2.y)*(y-p.cp2.y));\n\t\t\t\t\t\t\tif (dist <= _this.pointSize/2+2) {\n\t\t\t\t\t\t\t\tthis.style.cursor = 'pointer';\n\t\t\t\t\t\t\t\tdragReady = i;\n\t\t\t\t\t\t\t\tdragCP = 'cp2';\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthis.style.cursor = 'initial';\n\t\t\t\t\t\t\t\tdragReady = false;\n\t\t\t\t\t\t\t\tdragCP = false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif (keys[18]) {\n\t\t\t\tlet deltaW = _this.cw / 20;\n\t\t\t\tlet deltaH = _this.ch/ 10;\n\n\t\t\t\tlet posX = Math.floor((x+deltaW/2) / deltaW);\n\t\t\t\tlet posY = Math.floor((y+deltaH/2) / deltaH);\n\n\t\t\t\tx = deltaW * posX;\n\t\t\t\ty = deltaH * posY;\n\t\t\t}\n\n\t\t\tif (draging) {\n\t\t\t\tif (dragCP == 'cp1') {\n\t\t\t\t\t_this.points[dragReady].cp1.x = x;\n\t\t\t\t\t_this.points[dragReady].cp1.y = y;\n\n\t\t\t\t\t_this.points[dragReady].move();\n\n\t\t\t\t\tif (!keys[16]) {\n\t\t\t\t\t\t_this.points[dragReady].cp2.x = x - _this.points[dragReady].v1x*2;\n\t\t\t\t\t\t_this.points[dragReady].cp2.y = y - _this.points[dragReady].v1y*2;\n\t\t\t\t\t}\n\t\t\t\t} else if (dragCP == 'cp2') {\n\n\t\t\t\t\t_this.points[dragReady].cp2.x = x;\n\t\t\t\t\t_this.points[dragReady].cp2.y = y;\n\n\t\t\t\t\t_this.points[dragReady].move();\n\n\t\t\t\t\tif (!keys[16]) {\n\t\t\t\t\t\t_this.points[dragReady].cp1.x = x - _this.points[dragReady].v2x*2;\n\t\t\t\t\t\t_this.points[dragReady].cp1.y = y - _this.points[dragReady].v2y*2;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t_this.points[dragReady].move();\n\n\t\t\t\t\t_this.points[dragReady].position.x = x;\n\t\t\t\t\t_this.points[dragReady].position.y = y;\n\n\t\t\t\t\tif (dragReady === 0) {\n\t\t\t\t\t\t_this.points[dragReady].position.x = 0;\n\t\t\t\t\t}\n\t\t\t\t\tif (dragReady == _this.points.length-1) {\n\t\t\t\t\t\t_this.points[dragReady].position.x = _this.cw;\n\t\t\t\t\t}\n\n\t\t\t\t\t_this.points[dragReady].cp1.x = _this.points[dragReady].position.x + _this.points[dragReady].v1x;\n\t\t\t\t\t_this.points[dragReady].cp1.y = _this.points[dragReady].position.y + _this.points[dragReady].v1y;\n\t\t\t\t\t_this.points[dragReady].cp2.x = _this.points[dragReady].position.x + _this.points[dragReady].v2x;\n\t\t\t\t\t_this.points[dragReady].cp2.y = _this.points[dragReady].position.y + _this.points[dragReady].v2y;\n\n\t\t\t\t\tlet temp;\n\n\t\t\t\t\tif (_this.points[dragReady-1] && _this.points[dragReady+1]) {\n\t\t\t\t\t\tif (_this.points[dragReady].position.x > _this.points[dragReady+1].position.x) {\n\t\t\t\t\t\t\ttemp = _this.points[dragReady];\n\t\t\t\t\t\t\t_this.points[dragReady] = _this.points[dragReady+1];\n\t\t\t\t\t\t\t_this.points[dragReady+1] = temp;\n\t\t\t\t\t\t\tdragReady++;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (_this.points[dragReady-1].position.x > _this.points[dragReady].position.x) {\n\t\t\t\t\t\t\ttemp = _this.points[dragReady];\n\t\t\t\t\t\t\t_this.points[dragReady] = _this.points[dragReady-1];\n\t\t\t\t\t\t\t_this.points[dragReady-1] = temp;\n\t\t\t\t\t\t\tdragReady--;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t\t_this.events.ondrag ? _this.events.ondrag() : null;\n\t\t\t\t_this.draw();\n\t\t\t}\n\n\t\t\t_this.events.onmousemove ? _this.events.onmousemove() : null;\n\n\t\t});\n\t\tthis.ctx.canvas.addEventListener('mousedown', function(evt){\n\t\t\tevt.preventDefault();\n\n\t\t\tif (dragReady || dragReady === 0) {\n\t\t\t\tdraging = true;\n\t\t\t} else {\n\t\t\t\tif (dist > 5) {\n\t\t\t\t\tdragReady = _this.addPoint(x, y);\n\t\t\t\t\tdraging = true;\n\t\t\t\t\tthis.style.cursor = 'pointer';\n\t\t\t\t\t_this.draw();\n\t\t\t\t\t_this.events.onnewpoint ? _this.events.onnewpoint() : null;\n\t\t\t\t}\n\t\t\t}\n\n\t\t});\n\t\tthis.ctx.canvas.addEventListener('mouseup', function(evt){\n\n\t\t\tdraging = false;\n\t\t\tif (dist > 5) {\n\t\t\t\tdragReady = dragCP = false;\n\t\t\t}\n\n\t\t\tfor (let i = 0; i < _this.points.length; i++) {\n\t\t\t\tlet p = _this.points[i];\n\t\t\t\tdist = Math.sqrt((x-p.position.x)*(x-p.position.x) + (y-p.position.y)*(y-p.position.y));\n\t\t\t\tif (dist <= _this.pointSize/2+2) {\n\t\t\t\t\tthis.style.cursor = 'pointer';\n\t\t\t\t\tdragReady = i;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t_this.createLUT();\n\n\t\t});\n\t\tthis.ctx.canvas.addEventListener('mouseleave', function(evt){\n\n\t\t\tif (draging) {\n\t\t\t\tif (evt.offsetX < 0 || evt.offsetX > _this.cw) {\n\t\t\t\t\tif (evt.offsetX < 0) {\n\t\t\t\t\t\tif (dragCP == 'cp1') {\n\t\t\t\t\t\t\t_this.points[dragReady].cp1.x = 0;\n\n\t\t\t\t\t\t\t_this.points[dragReady].move();\n\n\t\t\t\t\t\t\tif (!keys[16]) {\n\t\t\t\t\t\t\t\t_this.points[dragReady].cp2.x = 0 - _this.points[dragReady].v1x*2;\n\t\t\t\t\t\t\t\t_this.points[dragReady].cp2.y = y - _this.points[dragReady].v1y*2;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else if (dragCP == 'cp2') {\n\t\t\t\t\t\t\t_this.points[dragReady].cp2.x = 0;\n\n\t\t\t\t\t\t\t_this.points[dragReady].move();\n\n\t\t\t\t\t\t\tif (!keys[16]) {\n\t\t\t\t\t\t\t\t_this.points[dragReady].cp1.x = 0 - _this.points[dragReady].v2x*2;\n\t\t\t\t\t\t\t\t_this.points[dragReady].cp1.y = y - _this.points[dragReady].v2y*2;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t_this.points[dragReady].position.x = 0;\n\t\t\t\t\t\t\t_this.points[dragReady].cp1.x = 0 + _this.points[dragReady].v1x;\n\t\t\t\t\t\t\t_this.points[dragReady].cp2.x = 0 + _this.points[dragReady].v2x;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (dragCP == 'cp1') {\n\t\t\t\t\t\t\t_this.points[dragReady].cp1.x = _this.cw;\n\n\t\t\t\t\t\t\t_this.points[dragReady].move();\n\n\t\t\t\t\t\t\tif (!keys[16]) {\n\t\t\t\t\t\t\t\t_this.points[dragReady].cp2.x = _this.cw - _this.points[dragReady].v1x*2;\n\t\t\t\t\t\t\t\t_this.points[dragReady].cp2.y = y - _this.points[dragReady].v1y*2;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else if (dragCP == 'cp2') {\n\t\t\t\t\t\t\t_this.points[dragReady].cp2.x = _this.cw;\n\n\t\t\t\t\t\t\t_this.points[dragReady].move();\n\n\t\t\t\t\t\t\tif (!keys[16]) {\n\t\t\t\t\t\t\t\t_this.points[dragReady].cp1.x = _this.cw - _this.points[dragReady].v2x*2;\n\t\t\t\t\t\t\t\t_this.points[dragReady].cp1.y = y - _this.points[dragReady].v2y*2;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t_this.points[dragReady].position.x = _this.cw;\n\t\t\t\t\t\t\t_this.points[dragReady].cp1.x = _this.cw + _this.points[dragReady].v1x;\n\t\t\t\t\t\t\t_this.points[dragReady].cp2.x = _this.cw + _this.points[dragReady].v2x;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else if (evt.offsetY < 0 || evt.offsetY > _this.ch) {\n\t\t\t\t\tif (evt.offsetY < 0) {\n\t\t\t\t\t\tif (dragCP == 'cp1') {\n\t\t\t\t\t\t\t_this.points[dragReady].cp1.y = 0;\n\n\t\t\t\t\t\t\t_this.points[dragReady].move();\n\n\t\t\t\t\t\t\tif (!keys[16]) {\n\t\t\t\t\t\t\t\t_this.points[dragReady].cp2.x = x - _this.points[dragReady].v1x*2;\n\t\t\t\t\t\t\t\t_this.points[dragReady].cp2.y = 0 - _this.points[dragReady].v1y*2;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else if (dragCP == 'cp2') {\n\t\t\t\t\t\t\t_this.points[dragReady].cp2.y = 0;\n\n\t\t\t\t\t\t\t_this.points[dragReady].move();\n\n\t\t\t\t\t\t\tif (!keys[16]) {\n\t\t\t\t\t\t\t\t_this.points[dragReady].cp1.x = x - _this.points[dragReady].v2x*2;\n\t\t\t\t\t\t\t\t_this.points[dragReady].cp1.y = 0 - _this.points[dragReady].v2y*2;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t_this.points[dragReady].position.y = 0;\n\t\t\t\t\t\t\t_this.points[dragReady].cp1.y = 0 + _this.points[dragReady].v1y;\n\t\t\t\t\t\t\t_this.points[dragReady].cp2.y = 0 + _this.points[dragReady].v2y;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (dragCP == 'cp1') {\n\t\t\t\t\t\t\t_this.points[dragReady].cp1.y = _this.ch;\n\n\t\t\t\t\t\t\t_this.points[dragReady].move();\n\t\t\t\t\t\t\tif (!keys[16]) {\n\t\t\t\t\t\t\t\t_this.points[dragReady].cp2.x = x - _this.points[dragReady].v1x*2;\n\t\t\t\t\t\t\t\t_this.points[dragReady].cp2.y = _this.ch - _this.points[dragReady].v1y*2;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else if (dragCP == 'cp2') {\n\t\t\t\t\t\t\t_this.points[dragReady].cp2.y = _this.ch;\n\n\t\t\t\t\t\t\t_this.points[dragReady].move();\n\n\t\t\t\t\t\t\tif (!keys[16]) {\n\t\t\t\t\t\t\t\t_this.points[dragReady].cp1.x = x - _this.points[dragReady].v2x*2;\n\t\t\t\t\t\t\t\t_this.points[dragReady].cp1.y = _this.ch - _this.points[dragReady].v2y*2;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t_this.points[dragReady].position.y = _this.ch;\n\t\t\t\t\t\t\t_this.points[dragReady].cp1.y = _this.ch + _this.points[dragReady].v1y;\n\t\t\t\t\t\t\t_this.points[dragReady].cp2.y = _this.ch + _this.points[dragReady].v2y;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t_this.draw();\n\t\t\t_this.createLUT();\n\n\t\t\tdraging = dragReady = dragCP = false;\n\n\t\t});\n\t\tthis.ctx.canvas.addEventListener('click', function(evt){\n\t\t\tif (keys[16] && !dragCP) {\n\t\t\t\t_this.points[dragReady].collapse();\n\t\t\t\t_this.draw();\n\t\t\t\t_this.createLUT();\n\t\t\t\t_this.events.ontogglecontrol ? _this.events.ontogglecontrol() : null;\n\t\t\t}\n\t\t});\n\t\tthis.ctx.canvas.addEventListener('dblclick', function(evt){\n\t\t\t_this.points.splice(dragReady, 1);\n\t\t\tdraging = dragReady = dragCP = false;\n\t\t\tdist = 1000;\n\t\t\tthis.style.cursor = 'initial';\n\t\t\t_this.draw();\n\t\t\t_this.createLUT();\n\t\t\t_this.events.onremovepoint ? _this.events.onremovepoint() : null;\n\t\t});\n\n\t}\n\n\taddPoint(x, y) {\n\t\t\n\t\tthis.points.push(new BezierPoint(x, y, this.ctx, this.pointColor, this.pointSize, this.cpDist));\n\n\t\tthis.points.sort(function(a, b){\n\t\t\treturn a.position.x - b.position.x;\n\t\t});\n\n\t\tfor (let i = 0; i < this.points.length; i++) {\n\t\t\tlet p = this.points[i];\n\t\t\tif (x == p.position.x && y == p.position.y) {\n\t\t\t\treturn i;\n\t\t\t}\n\t\t}\n\n\t}\n\n\tsetPointStyle(color, size) {\n\t\t\n\t\tfor (let i = 0; i < this.points.length; i++) {\n\t\t\tthis.points[i].setPointStyle(color, size);\n\t\t\tthis.pointColor = color;\n\t\t\tthis.pointSize = size;\n\t\t}\n\t\tthis.draw();\n\n\t}\n\n\tsetLineStyle(color, width) {\n\t\t\n\t\tthis.lineColor = color;\n\t\tthis.lineWidth = width;\n\t\tthis.draw();\n\n\t}\n\n\tdraw() {\n\t\t\n\t\tthis.ctx.clearRect(0, 0, this.cw, this.ch);\n\t\t\n\t\tthis.ctx.strokeStyle = '#444';\n\t\tthis.ctx.lineWidth = 1;\n\n\t\tfor (let i = 1; i < 10; i++) {\n\t\t\tthis.ctx.beginPath();\n\t\t\tthis.ctx.moveTo((this.cw/10)*i-0.5, 0);\n\t\t\tthis.ctx.lineTo((this.cw/10)*i-0.5, this.ch);\n\t\t\tthis.ctx.stroke();\n\t\t}\n\t\tfor (let i = 1; i < 5; i++) {\n\t\t\tthis.ctx.beginPath();\n\t\t\tthis.ctx.moveTo(0, (this.ch/5)*i-0.5);\n\t\t\tthis.ctx.lineTo(this.cw, (this.ch/5)*i-0.5);\n\t\t\tthis.ctx.stroke();\n\t\t}\n\n\t\tthis.ctx.lineWidth = 0.5;\n\t\tfor (let i = 1; i < 20; i++) {\n\t\t\tthis.ctx.beginPath();\n\t\t\tthis.ctx.moveTo((this.cw/20)*i-0.5, 0);\n\t\t\tthis.ctx.lineTo((this.cw/20)*i-0.5, this.ch);\n\t\t\tthis.ctx.stroke();\n\t\t}\n\t\tfor (let i = 1; i < 10; i++) {\n\t\t\tthis.ctx.beginPath();\n\t\t\tthis.ctx.moveTo(0, (this.ch/10)*i-0.5);\n\t\t\tthis.ctx.lineTo(this.cw, (this.ch/10)*i-0.5);\n\t\t\tthis.ctx.stroke();\n\t\t}\n\n\t\tthis.ctx.strokeStyle = this.lineColor;\n\t\tthis.ctx.lineWidth = this.lineWidth;\n\n\t\tthis.ctx.beginPath();\n\t\tthis.ctx.moveTo(this.points[0].position.x, this.points[0].position.y);\n\t\tfor (let i = 1; i < this.points.length; i++) {\n\t\t\tlet p = this.points[i];\n\t\t\tlet pP = this.points[i-1];\n\t\t\tthis.ctx.bezierCurveTo(pP.cp2.x, pP.cp2.y, p.cp1.x, p.cp1.y, p.position.x, p.position.y);\n\t\t}\n\t\tthis.ctx.stroke();\n\n\t\tfor (let i = 0; i < this.points.length; i++) {\n\t\t\tthis.points[i].draw();\n\t\t}\n\n\t}\n}\n\n\nconst keys = [];\nwindow.addEventListener('keydown', function(e){\n\tkeys[e.keyCode] = true;\n});\nwindow.addEventListener('keyup', function(e){\n\tdelete keys[e.keyCode];\n});","export default class Point {\n\n\tconstructor(x, y, color, size, context) {\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.r = size/2;\n\t\tthis.color = color;\n\t\tthis.ctx = context;\n\n\t}\n\n\tdraw() {\n\n\t\tthis.ctx.fillStyle = this.color;\n\t\tthis.ctx.beginPath();\n\t\tthis.ctx.arc(this.x, this.y, this.r, 0, Math.PI*2, false);\n\t\tthis.ctx.closePath();\n\t\tthis.ctx.fill();\n\n\t}\n}\n","class CastEntry {\n    constructor(thirdPartyEasePreset, nativeEasePreset) {\n        this.external = thirdPartyEasePreset;\n        this.internal = nativeEasePreset;\n    }\n}\n\nexport function cast(thirdPartyEasePreset) {\n    return {\n        to(nativeEasePreset) {\n            return new CastEntry(thirdPartyEasePreset, nativeEasePreset);\n        }\n    };\n}\n\nexport default CastEntry;","export default class CastMap {\n    constructor(entries) {\n        this._entries = entries;\n    }\n\n    hasExternal(externalEase) {\n        return this._entries.some(entry => entry.external === externalEase);\n    }\n\n    externalToInternal(externalEase) {\n        return this._entries.find(entry => entry.external === externalEase).internal;\n    }\n\n    internalToExternal(internalEase) {\n        return this._entries.find(entry => entry.internal.toString() === internalEase.toString()).external;\n    }\n}","import CastMap from \"./CastMap\";\n\nexport default class Middleware {\n    constructor(...castEntries) {\n        this._presets = castEntries.map(entry => entry.internal);\n        this._castMap = new CastMap(castEntries);\n\n        this.castEntries = castEntries;\n    }\n\n    isEditingSupported() {\n        // Some frameworks don't allow custom easing curves, this flag is used to disable ease editor in such cases.\n        return true;\n    }\n\n    isFormatSupported(externalPreset) {\n        return !!externalPreset && this._castMap.hasExternal(externalPreset);\n    }\n\n    import(externalEase) {\n        return this._castMap.externalToInternal(externalEase);\n    }\n\n    export(internalEase) {\n        return this._castMap.internalToExternal(internalEase);\n    }\n\n    toString() {\n        return `[object ${Middleware.CLASS_NAME}]`;\n    }\n\n    get presets() {\n        return this._presets;\n    }\n\n    static CLASS_NAME = \"DatGuiEaseMiddleware\";\n}","// Module\nvar code = \"<div class=\\\"ease-gui mode-select\\\">\\n    <div class=\\\"header\\\">\\n        <div class=\\\"property-name\\\"></div>\\n        <div class=\\\"c\\\">\\n            <div class=\\\"ease-selector\\\">\\n                <div class=\\\"corner-curve-container\\\">\\n                    <div class=\\\"ratio-box\\\">\\n                        <div class=\\\"ratio-box-inner\\\">\\n                            <canvas class=\\\"corner-curve\\\"></canvas>\\n                        </div>\\n                    </div>\\n                </div>\\n\\n                <div class=\\\"template-selector\\\">\\n                    <div class=\\\"curve-selector-container\\\">\\n                        <select class=\\\"curve-selector\\\" dir=\\\"rtl\\\"></select>\\n                    </div>\\n                    <div class=\\\"orientation-selector-container\\\">\\n                        <select class=\\\"orientation-selector\\\"></select>\\n                    </div>\\n                    <div class=\\\"edit-button-container\\\">\\n                        <svg class=\\\"edit-button\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" height=\\\"18px\\\" viewBox=\\\"0 0 24 24\\\" width=\\\"18px\\\" fill=\\\"#606060\\\"><path d=\\\"M0 0h24v24H0z\\\" fill=\\\"none\\\"/><path d=\\\"M19.5 9.5c-1.03 0-1.9.62-2.29 1.5h-2.92c-.39-.88-1.26-1.5-2.29-1.5s-1.9.62-2.29 1.5H6.79c-.39-.88-1.26-1.5-2.29-1.5C3.12 9.5 2 10.62 2 12s1.12 2.5 2.5 2.5c1.03 0 1.9-.62 2.29-1.5h2.92c.39.88 1.26 1.5 2.29 1.5s1.9-.62 2.29-1.5h2.92c.39.88 1.26 1.5 2.29 1.5 1.38 0 2.5-1.12 2.5-2.5s-1.12-2.5-2.5-2.5z\\\"/></svg>\\n                    </div>\\n                </div>\\n            </div>\\n        </div>\\n    </div>\\n    <div class=\\\"editor-container\\\">\\n        <div class=\\\"ratio-box\\\">\\n            <div class=\\\"ratio-box-inner\\\">\\n                <canvas class=\\\"editor\\\"></canvas>\\n            </div>\\n        </div>\\n        <div class=\\\"path-selector-container\\\">\\n            <input type=\\\"text\\\" class=\\\"path-selector\\\" onclick=\\\"this.select();\\\" value=\\\"M0,0 C20, 23,123\\\" />\\n            <div class=\\\"copy-button-container\\\">\\n                <svg class=\\\"copy-button\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" height=\\\"18px\\\" viewBox=\\\"0 0 24 24\\\" width=\\\"18px\\\" fill=\\\"#606060\\\"><path d=\\\"M0 0h24v24H0V0z\\\" fill=\\\"none\\\"/><path d=\\\"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z\\\"/></svg>\\n            </div>\\n        </div>\\n        <div class=\\\"editor-buttons\\\">\\n            <div class=\\\"decline-button\\\">\\n                <div class=\\\"icon-container\\\">\\n                    <svg class=\\\"icon\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" height=\\\"24px\\\" viewBox=\\\"0 0 24 24\\\" width=\\\"24px\\\" fill=\\\"#c93333\\\"><path d=\\\"M0 0h24v24H0V0z\\\" fill=\\\"none\\\"/><path d=\\\"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z\\\"/></svg>\\n                </div>\\n                <div class=\\\"label-container\\\">\\n                    <div class=\\\"label\\\">DISCARD</div>\\n                </div>\\n            </div>\\n            <div class=\\\"accept-button\\\">\\n                <div class=\\\"label-container\\\">\\n                    <div class=\\\"label\\\">ACCEPT</div>\\n                </div>\\n                <div class=\\\"icon-container\\\">\\n                    <svg class=\\\"icon\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" height=\\\"24px\\\" viewBox=\\\"0 0 24 24\\\" width=\\\"24px\\\" fill=\\\"#84be18\\\"><path d=\\\"M0 0h24v24H0V0z\\\" fill=\\\"none\\\"/><path d=\\\"M9 16.2l-3.5-3.5c-.39-.39-1.01-.39-1.4 0-.39.39-.39 1.01 0 1.4l4.19 4.19c.39.39 1.02.39 1.41 0L20.3 7.7c.39-.39.39-1.01 0-1.4-.39-.39-1.01-.39-1.4 0L9 16.2z\\\"/></svg>\\n                </div>\\n            </div>\\n        </div>\\n    </div>\\n    <div>\\n        \\n    </div>\\n</div>\";\n// Exports\nexport default code;","// extracted by mini-css-extract-plugin\nexport {};","module.exports = __WEBPACK_EXTERNAL_MODULE_dat_gui__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import styles from \"./index.scss\";\nimport EaseManager from \"./EaseManager\";\nimport addEaseGUI from \"./gui/addEaseGUI\";\nimport Middleware from \"./middleware/Middleware\";\nimport CastEntry, { cast } from \"./middleware/CastEntry\";\nimport Ease, { Handle, Anchor, Point } from \"./gui/model/ease/Ease\";\nimport EasePreset from \"./gui/model/preset/EasePreset\";\n//import * as presets from \"./gui/model/preset/presets\";\n\nconst easeManager = new EaseManager();\n\nfunction addEase(object, property) {\n    const ease = object[property];\n        \n    if (easeManager.supports(ease)) {\n        return addEaseGUI.call(this, object, property, easeManager.getCompatibleMiddleware(ease));\n    }\n    else {\n        console.warn(\"No compatible middleware found.\");\n    }\n}\n\nexport function extend(dat) {\n    dat.gui.ease = easeManager;\n\n    const add = dat.GUI.prototype.add;\n    function addOverride(object, property) {\n        const value = object[property] || object;\n\n        if (easeManager.supports(value)) {\n            return addEase.call(this, ...arguments);\n        }\n        else {\n            return add.call(this, ...arguments);\n        }\n    }\n\n    dat.GUI.prototype.add = addOverride;\n    dat.gui.GUI.prototype.add = addOverride;\n\n    dat.GUI.prototype.addEase = addEase;\n    dat.gui.GUI.prototype.addEase = addEase;\n\n    return easeManager;\n}\n\nexport {\n    Middleware,\n    CastEntry,\n    Ease,\n    EasePreset,\n    Handle,\n    Anchor,\n    Point,\n    //presets,\n    cast,\n    easeManager as manager\n}\n\nexport default {\n    extend\n};"],"sourceRoot":""}