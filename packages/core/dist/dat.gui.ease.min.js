!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("dat.gui")):"function"==typeof define&&define.amd?define(["dat.gui"],e):"object"==typeof exports?exports.datGuiEase=e(require("dat.gui")):t.datGuiEase=e(t.dat)}(self,(function(t){return(()=>{"use strict";var e={293:e=>{e.exports=t}},n={};function o(t){var i=n[t];if(void 0!==i)return i.exports;var r=n[t]={exports:{}};return e[t](r,r.exports,o),r.exports}o.d=(t,e)=>{for(var n in e)o.o(e,n)&&!o.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},o.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),o.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var i={};return(()=>{o.r(i),o.d(i,{Anchor:()=>C,Curve:()=>E,Ease:()=>V,EaseEntry:()=>Zt,EaseTemplate:()=>ht,Handle:()=>w,Middleware:()=>u,Orientation:()=>k,Point:()=>v,default:()=>oe,extend:()=>ne,manager:()=>te,templates:()=>t});var t={};function e(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}o.r(t),o.d(t,{BackIn:()=>Nt,BackInOut:()=>Lt,BackOut:()=>Bt,CircIn:()=>Mt,CircInOut:()=>Ut,CircOut:()=>Rt,CubicIn:()=>_t,CubicInOut:()=>St,CubicOut:()=>gt,Custom:()=>zt,ExpoIn:()=>Pt,ExpoInOut:()=>At,ExpoOut:()=>It,Linear:()=>vt,QuadIn:()=>bt,QuadInOut:()=>wt,QuadOut:()=>xt,QuartIn:()=>Ot,QuartInOut:()=>Et,QuartOut:()=>Ct,QuintIn:()=>kt,QuintInOut:()=>jt,QuintOut:()=>Tt,SineIn:()=>yt,SineInOut:()=>mt,SineOut:()=>dt});var n=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._entries=e,this._entriesHashMap=this._createHashMap(e,this._createHash)}var n,o;return n=t,(o=[{key:"hasExternal",value:function(t){return this._entries.some((function(e){return e.external===t}))}},{key:"externalToInternal",value:function(t){return this._entries.find((function(e){return e.external===t})).internal}},{key:"internalToExternal",value:function(t){return this._entries.find((function(e){return e.internal.toString()===t.toString()})).external}},{key:"_createHashMap",value:function(t,e){var n={};return t.forEach((function(t,o){n[e(t,o)]=t})),n}},{key:"_createHash",value:function(t){return"".concat(t.internal.curve,".").concat(t.internal.orientation)}}])&&e(n.prototype,o),t}();function r(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var s,c,a,u=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._templates=e.map((function(t){return t.internal})),this._castMap=new n(e)}var e,o;return e=t,(o=[{key:"isEditingSupported",value:function(){return!0}},{key:"isFormatSupported",value:function(t){return!!t&&this._castMap.hasExternal(t)}},{key:"import",value:function(t){return this._castMap.externalToInternal(t)}},{key:"export",value:function(t){return this._castMap.internalToExternal(t)}},{key:"toString",value:function(){return"[object ".concat(t.CLASS_NAME,"]")}},{key:"templates",get:function(){return this._templates}}])&&r(e.prototype,o),t}();function l(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}a="DatGuiEaseMiddleware",(c="CLASS_NAME")in(s=u)?Object.defineProperty(s,c,{value:a,enumerable:!0,configurable:!0,writable:!0}):s[c]=a;var p=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._middlewares=[]}var e,n;return e=t,(n=[{key:"supports",value:function(t){return this._middlewares.some((function(e){return e.isFormatSupported(t)}))}},{key:"getCompatibleMiddleware",value:function(t){return this._middlewares.find((function(e){return e.isFormatSupported(t)}))||null}},{key:"use",value:function(t){t.toString()==="[object ".concat(u.CLASS_NAME,"]")?this._middlewares.push(t):console.warn("Middleware instance expected")}}])&&l(e.prototype,n),t}(),h=o(293);function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var v=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;f(this,t),this.x=e,this.y=n};function y(t){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function d(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function m(t,e){return(m=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function b(t,e){return!e||"object"!==y(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function x(t){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var w=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&m(t,e)}(i,t);var e,n,o=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,o=x(e);if(n){var i=x(this).constructor;t=Reflect.construct(o,arguments,i)}else t=o.apply(this,arguments);return b(this,t)});function i(){return d(this,i),o.apply(this,arguments)}return i}(v);function _(t){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function g(t,e){return(g=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function S(t,e){return!e||"object"!==_(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function O(t){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var C=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&g(t,e)}(i,t);var e,n,o=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,o=O(e);if(n){var i=O(this).constructor;t=Reflect.construct(o,arguments,i)}else t=o.apply(this,arguments);return S(this,t)});function i(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,t,e)).handle=new w(t,e),n}return i}(v);const E=Object.freeze({LINEAR:"Linear",SINE:"Sine",QUAD:"Quad",CUBIC:"Cubic",QUART:"Quart",QUINT:"Quint",EXPO:"Expo",CIRC:"Circ",BACK:"Back",ELASTIC:"Elastic",BOUNCE:"Bounce",CUSTOM:"Custom"}),k=Object.freeze({IN:"in",OUT:"out",IN_OUT:"inOut",NONE:"none"});function T(t){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function j(t,e){j=function(t,e){return new r(t,void 0,e)};var n=I(RegExp),o=RegExp.prototype,i=new WeakMap;function r(t,e,o){var r=n.call(this,t,e);return i.set(r,o||i.get(t)),r}function s(t,e){var n=i.get(e);return Object.keys(n).reduce((function(e,o){return e[o]=t[n[o]],e}),Object.create(null))}return P(r,n),r.prototype.exec=function(t){var e=o.exec.call(this,t);return e&&(e.groups=s(e,this)),e},r.prototype[Symbol.replace]=function(t,e){if("string"==typeof e){var n=i.get(this);return o[Symbol.replace].call(this,t,e.replace(/\$<([^>]+)>/g,(function(t,e){return"$"+n[e]})))}if("function"==typeof e){var r=this;return o[Symbol.replace].call(this,t,(function(){var t=[];return t.push.apply(t,arguments),"object"!==T(t[t.length-1])&&t.push(s(t,r)),e.apply(this,t)}))}return o[Symbol.replace].call(this,t,e)},j.apply(this,arguments)}function P(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&R(t,e)}function I(t){var e="function"==typeof Map?new Map:void 0;return(I=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,o)}function o(){return A(t,arguments,U(this).constructor)}return o.prototype=Object.create(t.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),R(o,t)})(t)}function A(t,e,n){return(A=M()?Reflect.construct:function(t,e,n){var o=[null];o.push.apply(o,e);var i=new(Function.bind.apply(t,o));return n&&R(i,n.prototype),i}).apply(null,arguments)}function M(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function R(t,e){return(R=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function U(t){return(U=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function N(t,e){if(t){if("string"==typeof t)return B(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?B(t,e):void 0}}function B(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function L(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function z(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var V=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E.CUSTOM;L(this,t),this.curve=e;for(var n=arguments.length,o=new Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];this._anchors=o}var e,n,o;return e=t,o=[{key:"fromSVGPath",value:function(e){var n=new t,o=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],o=!0,i=!1,r=void 0;try{for(var s,c=t[Symbol.iterator]();!(o=(s=c.next()).done)&&(n.push(s.value),!e||n.length!==e);o=!0);}catch(t){i=!0,r=t}finally{try{o||null==c.return||c.return()}finally{if(i)throw r}}return n}}(t,e)||N(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(e.match(j(/M ?([0-9]+),([0-9]+)/,{x:1,y:2})).splice(-2).map(Number.parseFloat),2),i=o[0],r=o[1],s=e.replace(/^M.*C ?/,"").replace(/ *$/,"").split(/[ ,]/).map(Number.parseFloat);n.anchors[0]=new C(i,r),n.anchors[0].handle.x=s[0],n.anchors[0].handle.y=s[1];for(var c=2;c<s.length-4;c+=6){var a=(c-2)/3+1;n.anchors[a]=new C(s[c+2],s[c+3]),n.anchors[a].handle.x=s[c],n.anchors[a].handle.y=s[c+1],n.anchors[a+1]=new C(s[c+2],s[c+3]),n.anchors[a+1].handle.x=s[c+4],n.anchors[a+1].handle.y=s[c+5]}var u,l=A(C,function(t){if(Array.isArray(t))return B(t)}(u=s.slice(-2))||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(u)||N(u)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}());return l.handle.x=s[s.length-4],l.handle.y=s[s.length-3],n.anchors.push(l),n}},{key:"toSVGPath",value:function(t){for(var e="M ".concat(t.firstAnchor.x,",").concat(t.firstAnchor.y," C"),n=0;n<t.anchors.length;n+=2){var o=t.anchors[n],i=t.anchors[n+1];e+=" ".concat(o.handle.x,",").concat(o.handle.y," ").concat(i.handle.x,",").concat(i.handle.y," ").concat(i.x,",").concat(i.y)}return e}}],(n=[{key:"anchors",get:function(){return this._anchors}},{key:"firstAnchor",get:function(){return this._anchors[0]}},{key:"lastAnchor",get:function(){return this._anchors[this._anchors.length-1]}},{key:"addAnchor",value:function(t,e){var n=new C(t,e);return this.anchors.push(n),n}},{key:"toString",value:function(){return t.toSVGPath(this)}}])&&z(e.prototype,n),o&&z(e,o),t}();function X(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var Y=function(){function t(e,n,o,i,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.x=e,this.y=n,this.r=i/2,this.color=o,this.ctx=r}var e,n;return e=t,(n=[{key:"draw",value:function(){this.ctx.fillStyle=this.color,this.ctx.beginPath(),this.ctx.arc(this.x,this.y,this.r,0,2*Math.PI,!1),this.ctx.closePath(),this.ctx.fill()}}])&&X(e.prototype,n),t}();function D(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var q=function(){function t(e,n,o,i,r,s){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.cpDist=s,this.color=i,this.size=r,this.position=new Y(e,n,this.color,this.size,o),this.cp1=new Y(e-this.cpDist,n,this.color,this.size,o),this.cp2=new Y(e+this.cpDist,n,this.color,this.size,o),this.ctx=o,this.r=2,this.collapsed=!1}var e,n;return e=t,(n=[{key:"collapse",value:function(){this.collapsed?(this.collapsed=!1,this.cp1.x=this.position.x-this.cpDist,this.cp2.x=this.position.x+this.cpDist):(this.collapsed=!0,this.cp1.x=this.cp2.x=this.position.x,this.cp1.y=this.cp2.y=this.position.y)}},{key:"move",value:function(){this.collapsed?this.v1x=this.v1y=this.v2x=this.v2y=0:(this.v1x=this.cp1.x-this.position.x,this.v1y=this.cp1.y-this.position.y,this.v2x=this.cp2.x-this.position.x,this.v2y=this.cp2.y-this.position.y)}},{key:"setPointStyle",value:function(t,e){this.position.color=t,this.cp1.color=t,this.cp2.color=t,this.position.r=e/2,this.cp1.r=e/2,this.cp2.r=e/2}},{key:"draw",value:function(){this.ctx.lineWidth=.2,this.ctx.beginPath(),this.ctx.moveTo(this.position.x,this.position.y),this.ctx.lineTo(this.cp1.x,this.cp1.y),this.ctx.stroke(),this.ctx.beginPath(),this.ctx.moveTo(this.position.x,this.position.y),this.ctx.lineTo(this.cp2.x,this.cp2.y),this.ctx.stroke(),this.position.draw(),this.cp1.draw(),this.cp2.draw()}}])&&D(e.prototype,n),t}();function Q(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var H=function(){function t(e,n,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.BezierPoint=q,this.cpDist=o||.2*e.canvas.width,this.pointColor="#f00",this.pointSize=4,this.lineColor="#fff",this.lineWidth=1,this.points=[new q(0,e.canvas.height,e,this.pointColor,this.pointSize,this.cpDist),new q(e.canvas.width,0,e,this.pointColor,this.pointSize,this.cpDist)],this.ctx=e,this.cw=e.canvas.width,this.ch=e.canvas.height,this.mouseX=0,this.mouseY=0,this.events={},this.interval=n,this.canvasEvents(),this.createLUT(),this.draw()}var e,n;return e=t,(n=[{key:"xGetY",value:function(t){for(var e=0,n=5e3,o=(e+n)/2,i=t/this.interval,r=this.lookupX[o],s=0;Math.abs(i-r)>1e-4&&(s++,r>i?n=o:r<i&&(e=o),o=Math.round((e+n)/2),r=this.lookupX[o],!(s>20)););return this.lookupY[o]}},{key:"createLUT",value:function(){this.lookupX=[],this.lookupY=[];for(var t=1;t<this.points.length;t++)for(var e=this.points[t-1],n=this.points[t],o=n.position.x/this.cw-e.position.x/this.cw,i=0;i<1;i+=1/(5e3*o)){var r=Math.pow(1-i,3)*e.position.x+3*Math.pow(1-i,2)*i*e.cp2.x+3*(1-i)*Math.pow(i,2)*n.cp1.x+Math.pow(i,3)*n.position.x,s=Math.pow(1-i,3)*e.position.y+3*Math.pow(1-i,2)*i*e.cp2.y+3*(1-i)*Math.pow(i,2)*n.cp1.y+Math.pow(i,3)*n.position.y;this.lookupX.push(r/this.cw),this.lookupY.push(-s/this.ch+1)}}},{key:"on",value:function(t,e){this.events["on"+t]=e.bind(this)}},{key:"canvasEvents",value:function(){var t,e,n,o,i,r,s=this;this.ctx.canvas.addEventListener("mousemove",(function(c){var a=this.getBoundingClientRect();t=c.clientX-a.left,e=c.clientY-a.top,s.mouseX=t,s.mouseY=e;for(var u=0;u<s.points.length;u++){var l=s.points[u];if(!r){if((n=Math.sqrt((t-l.position.x)*(t-l.position.x)+(e-l.position.y)*(e-l.position.y)))<=s.pointSize/2+2){this.style.cursor="pointer",o=u;break}if((n=Math.sqrt((t-l.cp1.x)*(t-l.cp1.x)+(e-l.cp1.y)*(e-l.cp1.y)))<=s.pointSize/2+2){this.style.cursor="pointer",o=u,i="cp1";break}if((n=Math.sqrt((t-l.cp2.x)*(t-l.cp2.x)+(e-l.cp2.y)*(e-l.cp2.y)))<=s.pointSize/2+2){this.style.cursor="pointer",o=u,i="cp2";break}this.style.cursor="initial",o=!1,i=!1}}if(G[18]){var p=s.cw/20,h=s.ch/10,f=Math.floor((t+p/2)/p),v=Math.floor((e+h/2)/h);t=p*f,e=h*v}if(r){if("cp1"==i)s.points[o].cp1.x=t,s.points[o].cp1.y=e,s.points[o].move(),G[16]||(s.points[o].cp2.x=t-2*s.points[o].v1x,s.points[o].cp2.y=e-2*s.points[o].v1y);else if("cp2"==i)s.points[o].cp2.x=t,s.points[o].cp2.y=e,s.points[o].move(),G[16]||(s.points[o].cp1.x=t-2*s.points[o].v2x,s.points[o].cp1.y=e-2*s.points[o].v2y);else{var y;s.points[o].move(),s.points[o].position.x=t,s.points[o].position.y=e,0===o&&(s.points[o].position.x=0),o==s.points.length-1&&(s.points[o].position.x=s.cw),s.points[o].cp1.x=s.points[o].position.x+s.points[o].v1x,s.points[o].cp1.y=s.points[o].position.y+s.points[o].v1y,s.points[o].cp2.x=s.points[o].position.x+s.points[o].v2x,s.points[o].cp2.y=s.points[o].position.y+s.points[o].v2y,s.points[o-1]&&s.points[o+1]&&(s.points[o].position.x>s.points[o+1].position.x&&(y=s.points[o],s.points[o]=s.points[o+1],s.points[o+1]=y,o++),s.points[o-1].position.x>s.points[o].position.x&&(y=s.points[o],s.points[o]=s.points[o-1],s.points[o-1]=y,o--))}s.events.ondrag&&s.events.ondrag(),s.draw()}s.events.onmousemove&&s.events.onmousemove()})),this.ctx.canvas.addEventListener("mousedown",(function(i){i.preventDefault(),o||0===o?r=!0:n>5&&(o=s.addPoint(t,e),r=!0,this.style.cursor="pointer",s.draw(),s.events.onnewpoint&&s.events.onnewpoint())})),this.ctx.canvas.addEventListener("mouseup",(function(c){r=!1,n>5&&(o=i=!1);for(var a=0;a<s.points.length;a++){var u=s.points[a];if((n=Math.sqrt((t-u.position.x)*(t-u.position.x)+(e-u.position.y)*(e-u.position.y)))<=s.pointSize/2+2){this.style.cursor="pointer",o=a;break}}s.createLUT()})),this.ctx.canvas.addEventListener("mouseleave",(function(n){r&&(n.offsetX<0||n.offsetX>s.cw?n.offsetX<0?"cp1"==i?(s.points[o].cp1.x=0,s.points[o].move(),G[16]||(s.points[o].cp2.x=0-2*s.points[o].v1x,s.points[o].cp2.y=e-2*s.points[o].v1y)):"cp2"==i?(s.points[o].cp2.x=0,s.points[o].move(),G[16]||(s.points[o].cp1.x=0-2*s.points[o].v2x,s.points[o].cp1.y=e-2*s.points[o].v2y)):(s.points[o].position.x=0,s.points[o].cp1.x=0+s.points[o].v1x,s.points[o].cp2.x=0+s.points[o].v2x):"cp1"==i?(s.points[o].cp1.x=s.cw,s.points[o].move(),G[16]||(s.points[o].cp2.x=s.cw-2*s.points[o].v1x,s.points[o].cp2.y=e-2*s.points[o].v1y)):"cp2"==i?(s.points[o].cp2.x=s.cw,s.points[o].move(),G[16]||(s.points[o].cp1.x=s.cw-2*s.points[o].v2x,s.points[o].cp1.y=e-2*s.points[o].v2y)):(s.points[o].position.x=s.cw,s.points[o].cp1.x=s.cw+s.points[o].v1x,s.points[o].cp2.x=s.cw+s.points[o].v2x):(n.offsetY<0||n.offsetY>s.ch)&&(n.offsetY<0?"cp1"==i?(s.points[o].cp1.y=0,s.points[o].move(),G[16]||(s.points[o].cp2.x=t-2*s.points[o].v1x,s.points[o].cp2.y=0-2*s.points[o].v1y)):"cp2"==i?(s.points[o].cp2.y=0,s.points[o].move(),G[16]||(s.points[o].cp1.x=t-2*s.points[o].v2x,s.points[o].cp1.y=0-2*s.points[o].v2y)):(s.points[o].position.y=0,s.points[o].cp1.y=0+s.points[o].v1y,s.points[o].cp2.y=0+s.points[o].v2y):"cp1"==i?(s.points[o].cp1.y=s.ch,s.points[o].move(),G[16]||(s.points[o].cp2.x=t-2*s.points[o].v1x,s.points[o].cp2.y=s.ch-2*s.points[o].v1y)):"cp2"==i?(s.points[o].cp2.y=s.ch,s.points[o].move(),G[16]||(s.points[o].cp1.x=t-2*s.points[o].v2x,s.points[o].cp1.y=s.ch-2*s.points[o].v2y)):(s.points[o].position.y=s.ch,s.points[o].cp1.y=s.ch+s.points[o].v1y,s.points[o].cp2.y=s.ch+s.points[o].v2y))),s.draw(),s.createLUT(),r=o=i=!1})),this.ctx.canvas.addEventListener("click",(function(t){G[16]&&!i&&(s.points[o].collapse(),s.draw(),s.createLUT(),s.events.ontogglecontrol&&s.events.ontogglecontrol())})),this.ctx.canvas.addEventListener("dblclick",(function(t){s.points.splice(o,1),r=o=i=!1,n=1e3,this.style.cursor="initial",s.draw(),s.createLUT(),s.events.onremovepoint&&s.events.onremovepoint()}))}},{key:"addPoint",value:function(t,e){this.points.push(new q(t,e,this.ctx,this.pointColor,this.pointSize,this.cpDist)),this.points.sort((function(t,e){return t.position.x-e.position.x}));for(var n=0;n<this.points.length;n++){var o=this.points[n];if(t==o.position.x&&e==o.position.y)return n}}},{key:"setPointStyle",value:function(t,e){for(var n=0;n<this.points.length;n++)this.points[n].setPointStyle(t,e),this.pointColor=t,this.pointSize=e;this.draw()}},{key:"setLineStyle",value:function(t,e){this.lineColor=t,this.lineWidth=e,this.draw()}},{key:"draw",value:function(){this.ctx.clearRect(0,0,this.cw,this.ch),this.ctx.strokeStyle="#444",this.ctx.lineWidth=1;for(var t=1;t<10;t++)this.ctx.beginPath(),this.ctx.moveTo(this.cw/10*t-.5,0),this.ctx.lineTo(this.cw/10*t-.5,this.ch),this.ctx.stroke();for(var e=1;e<5;e++)this.ctx.beginPath(),this.ctx.moveTo(0,this.ch/5*e-.5),this.ctx.lineTo(this.cw,this.ch/5*e-.5),this.ctx.stroke();this.ctx.lineWidth=.5;for(var n=1;n<20;n++)this.ctx.beginPath(),this.ctx.moveTo(this.cw/20*n-.5,0),this.ctx.lineTo(this.cw/20*n-.5,this.ch),this.ctx.stroke();for(var o=1;o<10;o++)this.ctx.beginPath(),this.ctx.moveTo(0,this.ch/10*o-.5),this.ctx.lineTo(this.cw,this.ch/10*o-.5),this.ctx.stroke();this.ctx.strokeStyle=this.lineColor,this.ctx.lineWidth=this.lineWidth,this.ctx.beginPath(),this.ctx.moveTo(this.points[0].position.x,this.points[0].position.y);for(var i=1;i<this.points.length;i++){var r=this.points[i],s=this.points[i-1];this.ctx.bezierCurveTo(s.cp2.x,s.cp2.y,r.cp1.x,r.cp1.y,r.position.x,r.position.y)}this.ctx.stroke();for(var c=0;c<this.points.length;c++)this.points[c].draw()}}])&&Q(e.prototype,n),t}(),G=[];function F(t){return(F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function W(t,e){return!e||"object"!==F(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function K(t){var e="function"==typeof Map?new Map:void 0;return(K=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,o)}function o(){return $(t,arguments,tt(this).constructor)}return o.prototype=Object.create(t.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),Z(o,t)})(t)}function $(t,e,n){return($=J()?Reflect.construct:function(t,e,n){var o=[null];o.push.apply(o,e);var i=new(Function.bind.apply(t,o));return n&&Z(i,n.prototype),i}).apply(null,arguments)}function J(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function Z(t,e){return(Z=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function tt(t){return(tt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}window.addEventListener("keydown",(function(t){G[t.keyCode]=!0})),window.addEventListener("keyup",(function(t){delete G[t.keyCode]}));var et=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Z(t,e)}(i,t);var e,n,o=(e=i,n=J(),function(){var t,o=tt(e);if(n){var i=tt(this).constructor;t=Reflect.construct(o,arguments,i)}else t=o.apply(this,arguments);return W(this,t)});function i(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),o.call(this,i.KEY)}return i}(K(CustomEvent));function nt(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}!function(t,e,n){e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t.KEY=n}(et,"KEY","editorCurveChangeEvent");var ot=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._canvas=e,this._ctx=this._prepareContext(e),this._curve=this._createCurveJSInstance(this._ctx),this._propagateEvents(this._curve,e)}var e,n;return e=t,(n=[{key:"ease",get:function(){for(var t=new V,e=this._curve,n=(e.cw,e.ch,e.points),o=0;o<n.length-1;o++){var i=n[o],r=t.addAnchor(this._fromCanvasX(i.position.x),this._fromCanvasY(i.position.y));r.handle.x=this._fromCanvasX(i.cp2.x),r.handle.y=this._fromCanvasY(i.cp2.y);var s=n[o+1],c=t.addAnchor(this._fromCanvasX(s.position.x),this._fromCanvasY(s.position.y));c.handle.x=this._fromCanvasX(s.cp1.x),c.handle.y=this._fromCanvasY(s.cp1.y)}return t},set:function(t){var e=this._curve,n=e.points,o=e.pointColor,i=e.pointSize,r=e.cpDist,s=t.anchors,c=t.firstAnchor,a=t.lastAnchor;n.length=0;var u=new q(this._toCanvasX(c.x),this._toCanvasY(c.y),this._ctx,o,i,r);u.cp2.x=this._toCanvasX(c.handle.x),u.cp2.y=this._toCanvasY(c.handle.y),u.cp1.x=-u.cp2.x,u.cp1.y=-u.cp2.y,n.push(u);for(var l=1;l<s.length-1;l+=2){var p=s[l],h=s[l+1],f=new q(this._toCanvasX(p.x),this._toCanvasY(p.y),this._ctx,o,i,r);f.cp1.x=this._toCanvasX(p.handle.x),f.cp1.y=this._toCanvasY(p.handle.y),f.cp2.x=this._toCanvasX(h.handle.x),f.cp2.y=this._toCanvasY(h.handle.y),n.push(f)}var v=new q(this._toCanvasX(a.x),this._toCanvasY(a.y),this._ctx,o,i,r);v.cp1.x=this._toCanvasX(a.handle.x),v.cp1.y=this._toCanvasY(a.handle.y),v.cp2.x=-v.cp1.x,v.cp2.y=-v.cp1.y,n.push(v),this._curve.draw()}},{key:"_prepareContext",value:function(t){var e=t.getContext("2d");return e.canvas.width=t.clientWidth,e.canvas.height=t.clientHeight,e}},{key:"_createCurveJSInstance",value:function(t){var e=new H(t);return e.setPointStyle("#ffffff",8),e.setLineStyle("#ace247",2),e}},{key:"_propagateEvents",value:function(t,e){t.on("drag",(function(){return e.dispatchEvent(new et)})),t.on("newpoint",(function(){return e.dispatchEvent(new et)})),t.on("removepoint",(function(){return e.dispatchEvent(new et)}))}},{key:"_toCanvasX",value:function(t){return t*this._curve.cw}},{key:"_toCanvasY",value:function(t){return(1-t)*this._curve.ch}},{key:"_fromCanvasX",value:function(t){return this._round(t/this._curve.cw)}},{key:"_fromCanvasY",value:function(t){return this._round(1-t/this._curve.ch)}},{key:"_round",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,n=Math.pow(10,e);return Math.round(t*n)/n}}])&&nt(e.prototype,n),t}();function it(t){return(it="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function rt(t){return function(t){if(Array.isArray(t))return st(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return st(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?st(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function st(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function ct(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function at(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function ut(t,e){return(ut=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function lt(t,e){return!e||"object"!==it(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function pt(t){return(pt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ht=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ut(t,e)}(s,t);var e,n,o,i,r=(o=s,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=pt(o);if(i){var n=pt(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return lt(this,t)});function s(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E.LINEAR,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:k.NONE,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,0,1,1];return ct(this,s),(t=r.call.apply(r,[this,e].concat(rt(ft(o))))).orientation=n,t.displayName=e,t}return e=s,(n=[{key:"clone",value:function(){var t=new s(this.curve,this.orientation);return t.anchors.length=0,this.anchors.forEach((function(e){var n=new C(e.x,e.y);n.handle.x=e.handle.x,n.handle.y=e.handle.y,t.anchors.push(n)})),t}},{key:"toString",value:function(){return"".concat(this.curve,".").concat(this.orientation)}}])&&at(e.prototype,n),s}(V);function ft(t){var e=new C(0,0),n=new C(1,1);return e.handle.x=t[0],e.handle.y=t[1],n.handle.x=t[2],n.handle.y=t[3],[e,n]}var vt=new ht(E.LINEAR,k.NONE,[0,0,1,1]),yt=new ht(E.SINE,k.IN,[.12,0,.39,0]),dt=new ht(E.SINE,k.OUT,[.61,1,.88,1]),mt=new ht(E.SINE,k.IN_OUT,[.37,0,.63,1]),bt=new ht(E.QUAD,k.IN,[.11,0,.5,0]),xt=new ht(E.QUAD,k.OUT,[.5,1,.89,1]),wt=new ht(E.QUAD,k.IN_OUT,[.45,0,.55,1]),_t=new ht(E.CUBIC,k.IN,[.32,0,.67,0]),gt=new ht(E.CUBIC,k.OUT,[.33,1,.68,1]),St=new ht(E.CUBIC,k.IN_OUT,[.65,0,.35,1]),Ot=new ht(E.QUART,k.IN,[.5,0,.75,0]),Ct=new ht(E.QUART,k.OUT,[.25,1,.5,1]),Et=new ht(E.QUART,k.IN_OUT,[.76,0,.24,1]),kt=new ht(E.QUINT,k.IN,[.64,0,.78,0]),Tt=new ht(E.QUINT,k.OUT,[.22,1,.36,1]),jt=new ht(E.QUINT,k.IN_OUT,[.83,0,.17,1]),Pt=new ht(E.EXPO,k.IN,[.7,0,.84,0]),It=new ht(E.EXPO,k.OUT,[.16,1,.3,1]),At=new ht(E.EXPO,k.IN_OUT,[.87,0,.13,1]),Mt=new ht(E.CIRC,k.IN,[.55,0,1,.45]),Rt=new ht(E.CIRC,k.OUT,[0,.55,.45,1]),Ut=new ht(E.CIRC,k.IN_OUT,[.85,0,.15,1]),Nt=new ht(E.BACK,k.IN,[.36,0,.66,-.56]),Bt=new ht(E.BACK,k.OUT,[.34,1.56,.64,1]),Lt=new ht(E.BACK,k.IN_OUT,[.68,-.6,.32,1.6]),zt=new ht(E.CUSTOM,k.NONE,[0,0,1,1]),Vt=function(t){for(var e={},n=0,o=Object.values(t);n<o.length;n++){var i=o[n];e[i.toString()]=i}return e}(t);function Xt(t){return(Xt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Yt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function Dt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function qt(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Qt(t,e){return(Qt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ht(t,e){return!e||"object"!==Xt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Gt(t){return(Gt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ft=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Qt(t,e)}(s,t);var e,n,o,i,r=(o=s,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Gt(o);if(i){var n=Gt(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return Ht(this,t)});function s(t,e,n){var o;Dt(this,s),o=r.apply(this,arguments);var i=t[e],c=n.import(i);return o._orientation=c.orientation,o._ease=c,o._preEditEase=null,o._editor=null,o._middleware=n,o._initDOM(),o.domElement.querySelector(".property-name").innerHTML=e,o._updateSelectors(c),o._updateCornerCurve(c),o}return e=s,(n=[{key:"getValue",value:function(){return this._ease.toString()}},{key:"setValue",value:function(t){this._ease=function(t){return Vt[t]||V.fromSVGPath(t)}(t),this._applyValue(this._ease)}},{key:"isModified",value:function(){return this.initialValue.toString()!==this._ease.toString()}},{key:"_applyValue",value:function(t){this.object[this.property]=this._middleware.export(t),this.__onChange&&this.__onChange.call(this,t),this.__onFinishChange&&this.__onFinishChange.call(this,t),this._updateElements(t),this.updateDisplay()}},{key:"_initDOM",value:function(){this.domElement=this._renderTemplate('<div class="ease-gui mode-select"> <div class="header"> <div class="property-name"></div> <div class="c"> <div class="ease-selector"> <div class="corner-curve-container"> <div class="ratio-box"> <div class="ratio-box-inner"> <canvas class="corner-curve"></canvas> </div> </div> </div> <div class="template-selector"> <div class="curve-selector-container"> <select class="curve-selector" dir="rtl"></select> </div> <div class="orientation-selector-container"> <select class="orientation-selector"></select> </div> <div class="edit-button-container"> <svg class="edit-button" xmlns="http://www.w3.org/2000/svg" height="18px" viewBox="0 0 24 24" width="18px" fill="#606060"><path d="M0 0h24v24H0z" fill="none"/><path d="M19.5 9.5c-1.03 0-1.9.62-2.29 1.5h-2.92c-.39-.88-1.26-1.5-2.29-1.5s-1.9.62-2.29 1.5H6.79c-.39-.88-1.26-1.5-2.29-1.5C3.12 9.5 2 10.62 2 12s1.12 2.5 2.5 2.5c1.03 0 1.9-.62 2.29-1.5h2.92c.39.88 1.26 1.5 2.29 1.5s1.9-.62 2.29-1.5h2.92c.39.88 1.26 1.5 2.29 1.5 1.38 0 2.5-1.12 2.5-2.5s-1.12-2.5-2.5-2.5z"/></svg> </div> </div> </div> </div> </div> <div class="editor-container"> <div class="ratio-box"> <div class="ratio-box-inner"> <canvas class="editor"></canvas> </div> </div> <div class="path-selector-container"> <input type="text" class="path-selector" onclick="this.select()" value="M0,0 C20, 23,123"/> <div class="copy-button-container"> <svg class="copy-button" xmlns="http://www.w3.org/2000/svg" height="18px" viewBox="0 0 24 24" width="18px" fill="#606060"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/></svg> </div> </div> <div class="editor-buttons"> <div class="decline-button"> <div class="icon-container"> <svg class="icon" xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="#c93333"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg> </div> <div class="label-container"> <div class="label">DISCARD</div> </div> </div> <div class="accept-button"> <div class="label-container"> <div class="label">ACCEPT</div> </div> <div class="icon-container"> <svg class="icon" xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="#84be18"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M9 16.2l-3.5-3.5c-.39-.39-1.01-.39-1.4 0-.39.39-.39 1.01 0 1.4l4.19 4.19c.39.39 1.02.39 1.41 0L20.3 7.7c.39-.39.39-1.01 0-1.4-.39-.39-1.01-.39-1.4 0L9 16.2z"/></svg> </div> </div> </div> </div> <div> </div> </div>'),this._initCurveSelector(),this._initOrientationSelector(),this._initCustomPathSelector(),this._initButtons()}},{key:"_initCurveSelector",value:function(){var t,e=this,n=this.domElement.querySelector(".curve-selector"),o=[],i=function(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return Yt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Yt(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var o=0,i=function(){};return{s:i,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,s=!0,c=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return s=t.done,t},e:function(t){c=!0,r=t},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw r}}}}(this._middleware.templates);try{for(i.s();!(t=i.n()).done;){var r=t.value;o.includes(r.curve)||(o.push(r.curve),n.options.add(new Option(r.displayName,r.curve)))}}catch(t){i.e(t)}finally{i.f()}var s=new Option(E.CUSTOM,E.CUSTOM);s.setAttribute("hidden",!0),n.options.add(s),n.onchange=function(){var t=e._ease,o=n.value,i=e._getCurveOrientations(o),r=e._getTemplateByCurveAndOrientation(o,i.includes(t.orientation)?t.orientation:i[0]);e.setValue(r.toString())}}},{key:"_initOrientationSelector",value:function(){var t=this,e=this.domElement.querySelector(".orientation-selector");e.onchange=function(){var n=t._getTemplateByCurveAndOrientation(t._ease.curve,e.value);t.setValue(n.toString())}}},{key:"_initCustomPathSelector",value:function(){var t=this,e=this.domElement.querySelector(".path-selector");e.oninput=function(n){var o=e.value;try{t.setValue(V.fromSVGPath(o).toString())}catch(t){console.warn("Couldn't parse SVG path ".concat(o))}}}},{key:"_initButtons",value:function(){this._initEditButton(),this._initCopyButton(),this._initAcceptButton(),this._initDeclineButton()}},{key:"_initEditButton",value:function(){var t=this,e=this.domElement.querySelector(".edit-button");this._middleware.isEditingSupported()?e.addEventListener("click",(function(){t._preEditEase=t._ease,t._openEditor(t._ease)})):e.style.display="none"}},{key:"_initCopyButton",value:function(){var t=this.domElement.querySelector(".copy-button"),e=this.domElement.querySelector(".path-selector");t.addEventListener("click",(function(){e.select(),document.execCommand("copy"),console.info("Copied ".concat(e.value))}))}},{key:"_initAcceptButton",value:function(){var t=this;this.domElement.querySelector(".accept-button").addEventListener("click",(function(){return t._closeEditor()}))}},{key:"_initDeclineButton",value:function(){var t=this;this.domElement.querySelector(".decline-button").addEventListener("click",(function(){t._closeEditor(),t.setValue(t._preEditEase.toString())}))}},{key:"_openEditor",value:function(t){var e=this;this._toggleEditMode(!0);var n=this.domElement.querySelector(".editor"),o=new ot(n);o.ease=t,n.addEventListener(et.KEY,(function(){e.setValue(o.ease.toString())})),this._editor=o}},{key:"_closeEditor",value:function(){var t=this.domElement.querySelector(".editor"),e=t.cloneNode(!0);t.parentNode.replaceChild(e,t),this._toggleEditMode(!1),this._editor=null}},{key:"_updateElements",value:function(t){this._updateSelectors(t),this._updatePathInspector(this._ease),this._updateCornerCurve(this._ease),this._editor&&(this._editor.ease=this._ease)}},{key:"_updateOrientations",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=this.domElement.querySelector(".orientation-selector");n.options.length=0,t.length>0?(t.forEach((function(t){return n.options.add(new Option(t,t))})),n.value=t.includes(e)?e:t[0],n.removeAttribute("disabled")):n.setAttribute("disabled",!0)}},{key:"_updateSelectors",value:function(t){var e=this.domElement.querySelector(".curve-selector"),n=this.domElement.querySelector(".orientation-selector");e.value=t.curve,this._updatePathInspector(t),this._updateOrientations(this._getCurveOrientations(t.curve),t.orientation),n.value=t.orientation}},{key:"_updateCornerCurve",value:function(t){var e=this.domElement.querySelector("canvas.corner-curve").getContext("2d"),n=e.canvas.width=60,o=e.canvas.height=60;e.strokeStyle=e.fillStyle="#88CE02",e.lineWidth=1,e.clearRect(0,0,n,o),e.beginPath(),e.moveTo(t.firstAnchor.x*n,(1-t.firstAnchor.y)*o);for(var i=0;i<t.anchors.length;i+=2){var r=t.anchors[i],s=t.anchors[i+1];e.bezierCurveTo(r.handle.x*n,(1-r.handle.y)*o,s.handle.x*n,(1-s.handle.y)*o,s.x*n,(1-s.y)*o)}e.lineTo(n,o),e.lineTo(0,o),e.stroke(),e.fill()}},{key:"_updatePathInspector",value:function(t){this.domElement.querySelector(".path-selector").value=V.toSVGPath(t)}},{key:"_toggleEditMode",value:function(t){t?(this.domElement.classList.remove("mode-select"),this.domElement.classList.add("mode-edit")):(this.domElement.classList.remove("mode-edit"),this.domElement.classList.add("mode-select"))}},{key:"_renderTemplate",value:function(t){return(new DOMParser).parseFromString(t,"text/html").body.firstChild}},{key:"_getCurveOrientations",value:function(t){return this._getCurveTemplates(t).map((function(t){return t.orientation}))}},{key:"_getCurveTemplates",value:function(t){return this._middleware.templates.filter((function(e){return e.curve===t}))}},{key:"_getTemplateBySelectorsValues",value:function(){var t=this.domElement.querySelector(".curve-selector").value,e=this.domElement.querySelector(".orientation-selector").value;return this._getTemplateByCurveAndOrientation(t,e)}},{key:"_getTemplateByCurveAndOrientation",value:function(t,e){return this._middleware.templates.find((function(n){return n.curve===t&&n.orientation===e}))}}])&&qt(e.prototype,n),s}(h.controllers.Controller),Wt=h.dom.dom;function Kt(t,e,n){var o=new Ft(t,e,n);!function(t,e){var n=t.getRoot(),o=n.__rememberedObjects.indexOf(e.object);if(-1!==o){var i=n.__rememberedObjectIndecesToControllers[o];if(void 0===i&&(i={},n.__rememberedObjectIndecesToControllers[o]=i),i[e.property]=e,n.load&&n.load.remembered){var r,s=n.load.remembered;if(s[t.preset])r=s[t.preset];else{if(!s.Default)return;r=s.Default}if(r[o]&&void 0!==r[o][e.property]){var c=r[o][e.property];e.initialValue=c,e.setValue(c)}}}}(this,o);var i=function(t){var e=document.createElement("li");return t.__ul.appendChild(e),t.onResize(),e}(this);return Wt.addClass(i,"cr"),Wt.addClass(i,"ease"),i.appendChild(o.domElement),function(t,e,n){n.__li=e,n.__gui=this,n.name=function(t){return this.__li.querySelector(".property-name").innerHTML=t,this},n.listen=function(){return this.__gui.listen(this),this},n.remove=function(){return this.__gui.remove(this),this};var o=n.setValue;n.setValue=function(e){return o.call.apply(o,[n].concat(Array.prototype.slice.call(arguments))),t.getRoot().__preset_select&&n.isModified()&&$t(t.getRoot(),!0),e}}(this,i,o),this.__controllers.push(o),o}function $t(t,e){var n=t.__preset_select[t.__preset_select.selectedIndex];n.innerHTML=e?n.value+"*":n.value}function Jt(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var Zt=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.external=e,this.internal=n.clone()}var e,n;return e=t,(n=[{key:"displayAs",value:function(t){return this.internal.displayName=t,this}}])&&Jt(e.prototype,n),t}(),te=new p;function ee(t,e){var n=t[e];if(te.supports(n))return Kt.call(this,t,e,te.getCompatibleMiddleware(n));console.warn("No compatible middleware found.")}function ne(t){t.gui.ease=te;var e=t.GUI.prototype.add;function n(t,n){var o=t[n]||t;te.supports(o)?ee.call.apply(ee,[this].concat(Array.prototype.slice.call(arguments))):e.call.apply(e,[this].concat(Array.prototype.slice.call(arguments)))}return t.GUI.prototype.add=n,t.gui.GUI.prototype.add=n,t.GUI.prototype.addEase=ee,t.gui.GUI.prototype.addEase=ee,te}const oe={extend:ne}})(),i})()}));